function Xu(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(n,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=r(i);fetch(i.href,s)}})();function Ss(t){const e=Object.create(null);for(const r of t.split(","))e[r]=1;return r=>r in e}const we={},kr=[],St=()=>{},Ca=()=>!1,ri=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),Ps=t=>t.startsWith("onUpdate:"),De=Object.assign,Ts=(t,e)=>{const r=t.indexOf(e);r>-1&&t.splice(r,1)},Yu=Object.prototype.hasOwnProperty,_e=(t,e)=>Yu.call(t,e),le=Array.isArray,Or=t=>ni(t)==="[object Map]",Aa=t=>ni(t)==="[object Set]",he=t=>typeof t=="function",xe=t=>typeof t=="string",Kt=t=>typeof t=="symbol",Ee=t=>t!==null&&typeof t=="object",Ia=t=>(Ee(t)||he(t))&&he(t.then)&&he(t.catch),ja=Object.prototype.toString,ni=t=>ja.call(t),Qu=t=>ni(t).slice(8,-1),Da=t=>ni(t)==="[object Object]",Es=t=>xe(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,zr=Ss(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),ii=t=>{const e=Object.create(null);return(r=>e[r]||(e[r]=t(r)))},Zu=/-\w/g,ot=ii(t=>t.replace(Zu,e=>e.slice(1).toUpperCase())),ec=/\B([A-Z])/g,dr=ii(t=>t.replace(ec,"-$1").toLowerCase()),si=ii(t=>t.charAt(0).toUpperCase()+t.slice(1)),bi=ii(t=>t?`on${si(t)}`:""),qt=(t,e)=>!Object.is(t,e),Ln=(t,...e)=>{for(let r=0;r<t.length;r++)t[r](...e)},La=(t,e,r,n=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:n,value:r})},ks=t=>{const e=parseFloat(t);return isNaN(e)?t:e},tc=t=>{const e=xe(t)?Number(t):NaN;return isNaN(e)?t:e};let eo;const oi=()=>eo||(eo=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function jr(t){if(le(t)){const e={};for(let r=0;r<t.length;r++){const n=t[r],i=xe(n)?sc(n):jr(n);if(i)for(const s in i)e[s]=i[s]}return e}else if(xe(t)||Ee(t))return t}const rc=/;(?![^(]*\))/g,nc=/:([^]+)/,ic=/\/\*[^]*?\*\//g;function sc(t){const e={};return t.replace(ic,"").split(rc).forEach(r=>{if(r){const n=r.split(nc);n.length>1&&(e[n[0].trim()]=n[1].trim())}}),e}function hr(t){let e="";if(xe(t))e=t;else if(le(t))for(let r=0;r<t.length;r++){const n=hr(t[r]);n&&(e+=n+" ")}else if(Ee(t))for(const r in t)t[r]&&(e+=r+" ");return e.trim()}const oc="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",ac=Ss(oc);function Na(t){return!!t||t===""}const Fa=t=>!!(t&&t.__v_isRef===!0),Ne=t=>xe(t)?t:t==null?"":le(t)||Ee(t)&&(t.toString===ja||!he(t.toString))?Fa(t)?Ne(t.value):JSON.stringify(t,Ua,2):String(t),Ua=(t,e)=>Fa(e)?Ua(t,e.value):Or(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((r,[n,i],s)=>(r[wi(n,s)+" =>"]=i,r),{})}:Aa(e)?{[`Set(${e.size})`]:[...e.values()].map(r=>wi(r))}:Kt(e)?wi(e):Ee(e)&&!le(e)&&!Da(e)?String(e):e,wi=(t,e="")=>{var r;return Kt(t)?`Symbol(${(r=t.description)!=null?r:e})`:t};let Je;class lc{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Je,!e&&Je&&(this.index=(Je.scopes||(Je.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,r;if(this.scopes)for(e=0,r=this.scopes.length;e<r;e++)this.scopes[e].pause();for(e=0,r=this.effects.length;e<r;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,r;if(this.scopes)for(e=0,r=this.scopes.length;e<r;e++)this.scopes[e].resume();for(e=0,r=this.effects.length;e<r;e++)this.effects[e].resume()}}run(e){if(this._active){const r=Je;try{return Je=this,e()}finally{Je=r}}}on(){++this._on===1&&(this.prevScope=Je,Je=this)}off(){this._on>0&&--this._on===0&&(Je=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let r,n;for(r=0,n=this.effects.length;r<n;r++)this.effects[r].stop();for(this.effects.length=0,r=0,n=this.cleanups.length;r<n;r++)this.cleanups[r]();if(this.cleanups.length=0,this.scopes){for(r=0,n=this.scopes.length;r<n;r++)this.scopes[r].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0}}}function uc(){return Je}let Te;const Si=new WeakSet;class Ma{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Je&&Je.active&&Je.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Si.has(this)&&(Si.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Ba(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,to(this),Va(this);const e=Te,r=ht;Te=this,ht=!0;try{return this.fn()}finally{qa(this),Te=e,ht=r,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)Rs(e);this.deps=this.depsTail=void 0,to(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Si.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Ki(this)&&this.run()}get dirty(){return Ki(this)}}let $a=0,Gr,Jr;function Ba(t,e=!1){if(t.flags|=8,e){t.next=Jr,Jr=t;return}t.next=Gr,Gr=t}function Os(){$a++}function xs(){if(--$a>0)return;if(Jr){let e=Jr;for(Jr=void 0;e;){const r=e.next;e.next=void 0,e.flags&=-9,e=r}}let t;for(;Gr;){let e=Gr;for(Gr=void 0;e;){const r=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(n){t||(t=n)}e=r}}if(t)throw t}function Va(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function qa(t){let e,r=t.depsTail,n=r;for(;n;){const i=n.prevDep;n.version===-1?(n===r&&(r=i),Rs(n),cc(n)):e=n,n.dep.activeLink=n.prevActiveLink,n.prevActiveLink=void 0,n=i}t.deps=e,t.depsTail=r}function Ki(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(Ha(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function Ha(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===sn)||(t.globalVersion=sn,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!Ki(t))))return;t.flags|=2;const e=t.dep,r=Te,n=ht;Te=t,ht=!0;try{Va(t);const i=t.fn(t._value);(e.version===0||qt(i,t._value))&&(t.flags|=128,t._value=i,e.version++)}catch(i){throw e.version++,i}finally{Te=r,ht=n,qa(t),t.flags&=-3}}function Rs(t,e=!1){const{dep:r,prevSub:n,nextSub:i}=t;if(n&&(n.nextSub=i,t.prevSub=void 0),i&&(i.prevSub=n,t.nextSub=void 0),r.subs===t&&(r.subs=n,!n&&r.computed)){r.computed.flags&=-5;for(let s=r.computed.deps;s;s=s.nextDep)Rs(s,!0)}!e&&!--r.sc&&r.map&&r.map.delete(r.key)}function cc(t){const{prevDep:e,nextDep:r}=t;e&&(e.nextDep=r,t.prevDep=void 0),r&&(r.prevDep=e,t.nextDep=void 0)}let ht=!0;const Wa=[];function At(){Wa.push(ht),ht=!1}function It(){const t=Wa.pop();ht=t===void 0?!0:t}function to(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const r=Te;Te=void 0;try{e()}finally{Te=r}}}let sn=0;class hc{constructor(e,r){this.sub=e,this.dep=r,this.version=r.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Cs{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!Te||!ht||Te===this.computed)return;let r=this.activeLink;if(r===void 0||r.sub!==Te)r=this.activeLink=new hc(Te,this),Te.deps?(r.prevDep=Te.depsTail,Te.depsTail.nextDep=r,Te.depsTail=r):Te.deps=Te.depsTail=r,Ka(r);else if(r.version===-1&&(r.version=this.version,r.nextDep)){const n=r.nextDep;n.prevDep=r.prevDep,r.prevDep&&(r.prevDep.nextDep=n),r.prevDep=Te.depsTail,r.nextDep=void 0,Te.depsTail.nextDep=r,Te.depsTail=r,Te.deps===r&&(Te.deps=n)}return r}trigger(e){this.version++,sn++,this.notify(e)}notify(e){Os();try{for(let r=this.subs;r;r=r.prevSub)r.sub.notify()&&r.sub.dep.notify()}finally{xs()}}}function Ka(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let n=e.deps;n;n=n.nextDep)Ka(n)}const r=t.dep.subs;r!==t&&(t.prevSub=r,r&&(r.nextSub=t)),t.dep.subs=t}}const zi=new WeakMap,lr=Symbol(""),Gi=Symbol(""),on=Symbol("");function Ue(t,e,r){if(ht&&Te){let n=zi.get(t);n||zi.set(t,n=new Map);let i=n.get(r);i||(n.set(r,i=new Cs),i.map=n,i.key=r),i.track()}}function Rt(t,e,r,n,i,s){const o=zi.get(t);if(!o){sn++;return}const l=a=>{a&&a.trigger()};if(Os(),e==="clear")o.forEach(l);else{const a=le(t),u=a&&Es(r);if(a&&r==="length"){const c=Number(n);o.forEach((h,y)=>{(y==="length"||y===on||!Kt(y)&&y>=c)&&l(h)})}else switch((r!==void 0||o.has(void 0))&&l(o.get(r)),u&&l(o.get(on)),e){case"add":a?u&&l(o.get("length")):(l(o.get(lr)),Or(t)&&l(o.get(Gi)));break;case"delete":a||(l(o.get(lr)),Or(t)&&l(o.get(Gi)));break;case"set":Or(t)&&l(o.get(lr));break}}xs()}function pr(t){const e=me(t);return e===t?e:(Ue(e,"iterate",on),st(t)?e:e.map(ft))}function ai(t){return Ue(t=me(t),"iterate",on),t}function Ut(t,e){return jt(t)?ur(t)?Dr(ft(e)):Dr(e):ft(e)}const dc={__proto__:null,[Symbol.iterator](){return Pi(this,Symbol.iterator,t=>Ut(this,t))},concat(...t){return pr(this).concat(...t.map(e=>le(e)?pr(e):e))},entries(){return Pi(this,"entries",t=>(t[1]=Ut(this,t[1]),t))},every(t,e){return Pt(this,"every",t,e,void 0,arguments)},filter(t,e){return Pt(this,"filter",t,e,r=>r.map(n=>Ut(this,n)),arguments)},find(t,e){return Pt(this,"find",t,e,r=>Ut(this,r),arguments)},findIndex(t,e){return Pt(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return Pt(this,"findLast",t,e,r=>Ut(this,r),arguments)},findLastIndex(t,e){return Pt(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return Pt(this,"forEach",t,e,void 0,arguments)},includes(...t){return Ti(this,"includes",t)},indexOf(...t){return Ti(this,"indexOf",t)},join(t){return pr(this).join(t)},lastIndexOf(...t){return Ti(this,"lastIndexOf",t)},map(t,e){return Pt(this,"map",t,e,void 0,arguments)},pop(){return Vr(this,"pop")},push(...t){return Vr(this,"push",t)},reduce(t,...e){return ro(this,"reduce",t,e)},reduceRight(t,...e){return ro(this,"reduceRight",t,e)},shift(){return Vr(this,"shift")},some(t,e){return Pt(this,"some",t,e,void 0,arguments)},splice(...t){return Vr(this,"splice",t)},toReversed(){return pr(this).toReversed()},toSorted(t){return pr(this).toSorted(t)},toSpliced(...t){return pr(this).toSpliced(...t)},unshift(...t){return Vr(this,"unshift",t)},values(){return Pi(this,"values",t=>Ut(this,t))}};function Pi(t,e,r){const n=ai(t),i=n[e]();return n!==t&&!st(t)&&(i._next=i.next,i.next=()=>{const s=i._next();return s.done||(s.value=r(s.value)),s}),i}const fc=Array.prototype;function Pt(t,e,r,n,i,s){const o=ai(t),l=o!==t&&!st(t),a=o[e];if(a!==fc[e]){const h=a.apply(t,s);return l?ft(h):h}let u=r;o!==t&&(l?u=function(h,y){return r.call(this,Ut(t,h),y,t)}:r.length>2&&(u=function(h,y){return r.call(this,h,y,t)}));const c=a.call(o,u,n);return l&&i?i(c):c}function ro(t,e,r,n){const i=ai(t);let s=r;return i!==t&&(st(t)?r.length>3&&(s=function(o,l,a){return r.call(this,o,l,a,t)}):s=function(o,l,a){return r.call(this,o,Ut(t,l),a,t)}),i[e](s,...n)}function Ti(t,e,r){const n=me(t);Ue(n,"iterate",on);const i=n[e](...r);return(i===-1||i===!1)&&js(r[0])?(r[0]=me(r[0]),n[e](...r)):i}function Vr(t,e,r=[]){At(),Os();const n=me(t)[e].apply(t,r);return xs(),It(),n}const pc=Ss("__proto__,__v_isRef,__isVue"),za=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Kt));function gc(t){Kt(t)||(t=String(t));const e=me(this);return Ue(e,"has",t),e.hasOwnProperty(t)}class Ga{constructor(e=!1,r=!1){this._isReadonly=e,this._isShallow=r}get(e,r,n){if(r==="__v_skip")return e.__v_skip;const i=this._isReadonly,s=this._isShallow;if(r==="__v_isReactive")return!i;if(r==="__v_isReadonly")return i;if(r==="__v_isShallow")return s;if(r==="__v_raw")return n===(i?s?Ec:Qa:s?Ya:Xa).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(n)?e:void 0;const o=le(e);if(!i){let a;if(o&&(a=dc[r]))return a;if(r==="hasOwnProperty")return gc}const l=Reflect.get(e,r,$e(e)?e:n);if((Kt(r)?za.has(r):pc(r))||(i||Ue(e,"get",r),s))return l;if($e(l)){const a=o&&Es(r)?l:l.value;return i&&Ee(a)?Xi(a):a}return Ee(l)?i?Xi(l):Ht(l):l}}class Ja extends Ga{constructor(e=!1){super(!1,e)}set(e,r,n,i){let s=e[r];const o=le(e)&&Es(r);if(!this._isShallow){const u=jt(s);if(!st(n)&&!jt(n)&&(s=me(s),n=me(n)),!o&&$e(s)&&!$e(n))return u||(s.value=n),!0}const l=o?Number(r)<e.length:_e(e,r),a=Reflect.set(e,r,n,$e(e)?e:i);return e===me(i)&&(l?qt(n,s)&&Rt(e,"set",r,n):Rt(e,"add",r,n)),a}deleteProperty(e,r){const n=_e(e,r);e[r];const i=Reflect.deleteProperty(e,r);return i&&n&&Rt(e,"delete",r,void 0),i}has(e,r){const n=Reflect.has(e,r);return(!Kt(r)||!za.has(r))&&Ue(e,"has",r),n}ownKeys(e){return Ue(e,"iterate",le(e)?"length":lr),Reflect.ownKeys(e)}}class vc extends Ga{constructor(e=!1){super(!0,e)}set(e,r){return!0}deleteProperty(e,r){return!0}}const mc=new Ja,yc=new vc,_c=new Ja(!0);const Ji=t=>t,bn=t=>Reflect.getPrototypeOf(t);function bc(t,e,r){return function(...n){const i=this.__v_raw,s=me(i),o=Or(s),l=t==="entries"||t===Symbol.iterator&&o,a=t==="keys"&&o,u=i[t](...n),c=r?Ji:e?Dr:ft;return!e&&Ue(s,"iterate",a?Gi:lr),{next(){const{value:h,done:y}=u.next();return y?{value:h,done:y}:{value:l?[c(h[0]),c(h[1])]:c(h),done:y}},[Symbol.iterator](){return this}}}}function wn(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function wc(t,e){const r={get(i){const s=this.__v_raw,o=me(s),l=me(i);t||(qt(i,l)&&Ue(o,"get",i),Ue(o,"get",l));const{has:a}=bn(o),u=e?Ji:t?Dr:ft;if(a.call(o,i))return u(s.get(i));if(a.call(o,l))return u(s.get(l));s!==o&&s.get(i)},get size(){const i=this.__v_raw;return!t&&Ue(me(i),"iterate",lr),i.size},has(i){const s=this.__v_raw,o=me(s),l=me(i);return t||(qt(i,l)&&Ue(o,"has",i),Ue(o,"has",l)),i===l?s.has(i):s.has(i)||s.has(l)},forEach(i,s){const o=this,l=o.__v_raw,a=me(l),u=e?Ji:t?Dr:ft;return!t&&Ue(a,"iterate",lr),l.forEach((c,h)=>i.call(s,u(c),u(h),o))}};return De(r,t?{add:wn("add"),set:wn("set"),delete:wn("delete"),clear:wn("clear")}:{add(i){!e&&!st(i)&&!jt(i)&&(i=me(i));const s=me(this);return bn(s).has.call(s,i)||(s.add(i),Rt(s,"add",i,i)),this},set(i,s){!e&&!st(s)&&!jt(s)&&(s=me(s));const o=me(this),{has:l,get:a}=bn(o);let u=l.call(o,i);u||(i=me(i),u=l.call(o,i));const c=a.call(o,i);return o.set(i,s),u?qt(s,c)&&Rt(o,"set",i,s):Rt(o,"add",i,s),this},delete(i){const s=me(this),{has:o,get:l}=bn(s);let a=o.call(s,i);a||(i=me(i),a=o.call(s,i)),l&&l.call(s,i);const u=s.delete(i);return a&&Rt(s,"delete",i,void 0),u},clear(){const i=me(this),s=i.size!==0,o=i.clear();return s&&Rt(i,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(i=>{r[i]=bc(i,t,e)}),r}function As(t,e){const r=wc(t,e);return(n,i,s)=>i==="__v_isReactive"?!t:i==="__v_isReadonly"?t:i==="__v_raw"?n:Reflect.get(_e(r,i)&&i in n?r:n,i,s)}const Sc={get:As(!1,!1)},Pc={get:As(!1,!0)},Tc={get:As(!0,!1)};const Xa=new WeakMap,Ya=new WeakMap,Qa=new WeakMap,Ec=new WeakMap;function kc(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Oc(t){return t.__v_skip||!Object.isExtensible(t)?0:kc(Qu(t))}function Ht(t){return jt(t)?t:Is(t,!1,mc,Sc,Xa)}function Za(t){return Is(t,!1,_c,Pc,Ya)}function Xi(t){return Is(t,!0,yc,Tc,Qa)}function Is(t,e,r,n,i){if(!Ee(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const s=Oc(t);if(s===0)return t;const o=i.get(t);if(o)return o;const l=new Proxy(t,s===2?n:r);return i.set(t,l),l}function ur(t){return jt(t)?ur(t.__v_raw):!!(t&&t.__v_isReactive)}function jt(t){return!!(t&&t.__v_isReadonly)}function st(t){return!!(t&&t.__v_isShallow)}function js(t){return t?!!t.__v_raw:!1}function me(t){const e=t&&t.__v_raw;return e?me(e):t}function xc(t){return!_e(t,"__v_skip")&&Object.isExtensible(t)&&La(t,"__v_skip",!0),t}const ft=t=>Ee(t)?Ht(t):t,Dr=t=>Ee(t)?Xi(t):t;function $e(t){return t?t.__v_isRef===!0:!1}function Re(t){return el(t,!1)}function Rc(t){return el(t,!0)}function el(t,e){return $e(t)?t:new Cc(t,e)}class Cc{constructor(e,r){this.dep=new Cs,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=r?e:me(e),this._value=r?e:ft(e),this.__v_isShallow=r}get value(){return this.dep.track(),this._value}set value(e){const r=this._rawValue,n=this.__v_isShallow||st(e)||jt(e);e=n?e:me(e),qt(e,r)&&(this._rawValue=e,this._value=n?e:ft(e),this.dep.trigger())}}function cr(t){return $e(t)?t.value:t}const Ac={get:(t,e,r)=>e==="__v_raw"?t:cr(Reflect.get(t,e,r)),set:(t,e,r,n)=>{const i=t[e];return $e(i)&&!$e(r)?(i.value=r,!0):Reflect.set(t,e,r,n)}};function tl(t){return ur(t)?t:new Proxy(t,Ac)}class Ic{constructor(e,r,n){this.fn=e,this.setter=r,this._value=void 0,this.dep=new Cs(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=sn-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!r,this.isSSR=n}notify(){if(this.flags|=16,!(this.flags&8)&&Te!==this)return Ba(this,!0),!0}get value(){const e=this.dep.track();return Ha(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function jc(t,e,r=!1){let n,i;return he(t)?n=t:(n=t.get,i=t.set),new Ic(n,i,r)}const Sn={},$n=new WeakMap;let er;function Dc(t,e=!1,r=er){if(r){let n=$n.get(r);n||$n.set(r,n=[]),n.push(t)}}function Lc(t,e,r=we){const{immediate:n,deep:i,once:s,scheduler:o,augmentJob:l,call:a}=r,u=_=>i?_:st(_)||i===!1||i===0?Ct(_,1):Ct(_);let c,h,y,g,d=!1,f=!1;if($e(t)?(h=()=>t.value,d=st(t)):ur(t)?(h=()=>u(t),d=!0):le(t)?(f=!0,d=t.some(_=>ur(_)||st(_)),h=()=>t.map(_=>{if($e(_))return _.value;if(ur(_))return u(_);if(he(_))return a?a(_,2):_()})):he(t)?e?h=a?()=>a(t,2):t:h=()=>{if(y){At();try{y()}finally{It()}}const _=er;er=c;try{return a?a(t,3,[g]):t(g)}finally{er=_}}:h=St,e&&i){const _=h,w=i===!0?1/0:i;h=()=>Ct(_(),w)}const p=uc(),v=()=>{c.stop(),p&&p.active&&Ts(p.effects,c)};if(s&&e){const _=e;e=(...w)=>{_(...w),v()}}let m=f?new Array(t.length).fill(Sn):Sn;const b=_=>{if(!(!(c.flags&1)||!c.dirty&&!_))if(e){const w=c.run();if(i||d||(f?w.some((P,O)=>qt(P,m[O])):qt(w,m))){y&&y();const P=er;er=c;try{const O=[w,m===Sn?void 0:f&&m[0]===Sn?[]:m,g];m=w,a?a(e,3,O):e(...O)}finally{er=P}}}else c.run()};return l&&l(b),c=new Ma(h),c.scheduler=o?()=>o(b,!1):b,g=_=>Dc(_,!1,c),y=c.onStop=()=>{const _=$n.get(c);if(_){if(a)a(_,4);else for(const w of _)w();$n.delete(c)}},e?n?b(!0):m=c.run():o?o(b.bind(null,!0),!0):c.run(),v.pause=c.pause.bind(c),v.resume=c.resume.bind(c),v.stop=v,v}function Ct(t,e=1/0,r){if(e<=0||!Ee(t)||t.__v_skip||(r=r||new Map,(r.get(t)||0)>=e))return t;if(r.set(t,e),e--,$e(t))Ct(t.value,e,r);else if(le(t))for(let n=0;n<t.length;n++)Ct(t[n],e,r);else if(Aa(t)||Or(t))t.forEach(n=>{Ct(n,e,r)});else if(Da(t)){for(const n in t)Ct(t[n],e,r);for(const n of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,n)&&Ct(t[n],e,r)}return t}function mn(t,e,r,n){try{return n?t(...n):t()}catch(i){li(i,e,r)}}function pt(t,e,r,n){if(he(t)){const i=mn(t,e,r,n);return i&&Ia(i)&&i.catch(s=>{li(s,e,r)}),i}if(le(t)){const i=[];for(let s=0;s<t.length;s++)i.push(pt(t[s],e,r,n));return i}}function li(t,e,r,n=!0){const i=e?e.vnode:null,{errorHandler:s,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||we;if(e){let l=e.parent;const a=e.proxy,u=`https://vuejs.org/error-reference/#runtime-${r}`;for(;l;){const c=l.ec;if(c){for(let h=0;h<c.length;h++)if(c[h](t,a,u)===!1)return}l=l.parent}if(s){At(),mn(s,null,10,[t,a,u]),It();return}}Nc(t,r,i,n,o)}function Nc(t,e,r,n=!0,i=!1){if(i)throw t;console.error(t)}const qe=[];let bt=-1;const xr=[];let Mt=null,wr=0;const rl=Promise.resolve();let Bn=null;function nl(t){const e=Bn||rl;return t?e.then(this?t.bind(this):t):e}function Fc(t){let e=bt+1,r=qe.length;for(;e<r;){const n=e+r>>>1,i=qe[n],s=an(i);s<t||s===t&&i.flags&2?e=n+1:r=n}return e}function Ds(t){if(!(t.flags&1)){const e=an(t),r=qe[qe.length-1];!r||!(t.flags&2)&&e>=an(r)?qe.push(t):qe.splice(Fc(e),0,t),t.flags|=1,il()}}function il(){Bn||(Bn=rl.then(ol))}function Uc(t){le(t)?xr.push(...t):Mt&&t.id===-1?Mt.splice(wr+1,0,t):t.flags&1||(xr.push(t),t.flags|=1),il()}function no(t,e,r=bt+1){for(;r<qe.length;r++){const n=qe[r];if(n&&n.flags&2){if(t&&n.id!==t.uid)continue;qe.splice(r,1),r--,n.flags&4&&(n.flags&=-2),n(),n.flags&4||(n.flags&=-2)}}}function sl(t){if(xr.length){const e=[...new Set(xr)].sort((r,n)=>an(r)-an(n));if(xr.length=0,Mt){Mt.push(...e);return}for(Mt=e,wr=0;wr<Mt.length;wr++){const r=Mt[wr];r.flags&4&&(r.flags&=-2),r.flags&8||r(),r.flags&=-2}Mt=null,wr=0}}const an=t=>t.id==null?t.flags&2?-1:1/0:t.id;function ol(t){try{for(bt=0;bt<qe.length;bt++){const e=qe[bt];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),mn(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;bt<qe.length;bt++){const e=qe[bt];e&&(e.flags&=-2)}bt=-1,qe.length=0,sl(),Bn=null,(qe.length||xr.length)&&ol()}}let rt=null,al=null;function Vn(t){const e=rt;return rt=t,al=t&&t.type.__scopeId||null,e}function Yi(t,e=rt,r){if(!e||t._n)return t;const n=(...i)=>{n._d&&Kn(-1);const s=Vn(e);let o;try{o=t(...i)}finally{Vn(s),n._d&&Kn(1)}return o};return n._n=!0,n._c=!0,n._d=!0,n}function Rr(t,e){if(rt===null)return t;const r=pi(rt),n=t.dirs||(t.dirs=[]);for(let i=0;i<e.length;i++){let[s,o,l,a=we]=e[i];s&&(he(s)&&(s={mounted:s,updated:s}),s.deep&&Ct(o),n.push({dir:s,instance:r,value:o,oldValue:void 0,arg:l,modifiers:a}))}return t}function Gt(t,e,r,n){const i=t.dirs,s=e&&e.dirs;for(let o=0;o<i.length;o++){const l=i[o];s&&(l.oldValue=s[o].value);let a=l.dir[n];a&&(At(),pt(a,r,8,[t.el,l,t,e]),It())}}const Mc=Symbol("_vte"),ll=t=>t.__isTeleport,xt=Symbol("_leaveCb"),Pn=Symbol("_enterCb");function $c(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return fr(()=>{t.isMounted=!0}),Ls(()=>{t.isUnmounting=!0}),t}const it=[Function,Array],ul={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:it,onEnter:it,onAfterEnter:it,onEnterCancelled:it,onBeforeLeave:it,onLeave:it,onAfterLeave:it,onLeaveCancelled:it,onBeforeAppear:it,onAppear:it,onAfterAppear:it,onAppearCancelled:it},cl=t=>{const e=t.subTree;return e.component?cl(e.component):e},Bc={name:"BaseTransition",props:ul,setup(t,{slots:e}){const r=Fl(),n=$c();return()=>{const i=e.default&&fl(e.default(),!0);if(!i||!i.length)return;const s=hl(i),o=me(t),{mode:l}=o;if(n.isLeaving)return Ei(s);const a=io(s);if(!a)return Ei(s);let u=Qi(a,o,n,r,h=>u=h);a.type!==We&&ln(a,u);let c=r.subTree&&io(r.subTree);if(c&&c.type!==We&&!rr(c,a)&&cl(r).type!==We){let h=Qi(c,o,n,r);if(ln(c,h),l==="out-in"&&a.type!==We)return n.isLeaving=!0,h.afterLeave=()=>{n.isLeaving=!1,r.job.flags&8||r.update(),delete h.afterLeave,c=void 0},Ei(s);l==="in-out"&&a.type!==We?h.delayLeave=(y,g,d)=>{const f=dl(n,c);f[String(c.key)]=c,y[xt]=()=>{g(),y[xt]=void 0,delete u.delayedLeave,c=void 0},u.delayedLeave=()=>{d(),delete u.delayedLeave,c=void 0}}:c=void 0}else c&&(c=void 0);return s}}};function hl(t){let e=t[0];if(t.length>1){for(const r of t)if(r.type!==We){e=r;break}}return e}const Vc=Bc;function dl(t,e){const{leavingVNodes:r}=t;let n=r.get(e.type);return n||(n=Object.create(null),r.set(e.type,n)),n}function Qi(t,e,r,n,i){const{appear:s,mode:o,persisted:l=!1,onBeforeEnter:a,onEnter:u,onAfterEnter:c,onEnterCancelled:h,onBeforeLeave:y,onLeave:g,onAfterLeave:d,onLeaveCancelled:f,onBeforeAppear:p,onAppear:v,onAfterAppear:m,onAppearCancelled:b}=e,_=String(t.key),w=dl(r,t),P=(U,L)=>{U&&pt(U,n,9,L)},O=(U,L)=>{const N=L[1];P(U,L),le(U)?U.every(x=>x.length<=1)&&N():U.length<=1&&N()},H={mode:o,persisted:l,beforeEnter(U){let L=a;if(!r.isMounted)if(s)L=p||a;else return;U[xt]&&U[xt](!0);const N=w[_];N&&rr(t,N)&&N.el[xt]&&N.el[xt](),P(L,[U])},enter(U){let L=u,N=c,x=h;if(!r.isMounted)if(s)L=v||u,N=m||c,x=b||h;else return;let $=!1;const Q=U[Pn]=A=>{$||($=!0,A?P(x,[U]):P(N,[U]),H.delayedLeave&&H.delayedLeave(),U[Pn]=void 0)};L?O(L,[U,Q]):Q()},leave(U,L){const N=String(t.key);if(U[Pn]&&U[Pn](!0),r.isUnmounting)return L();P(y,[U]);let x=!1;const $=U[xt]=Q=>{x||(x=!0,L(),Q?P(f,[U]):P(d,[U]),U[xt]=void 0,w[N]===t&&delete w[N])};w[N]=t,g?O(g,[U,$]):$()},clone(U){const L=Qi(U,e,r,n,i);return i&&i(L),L}};return H}function Ei(t){if(ui(t))return t=Wt(t),t.children=null,t}function io(t){if(!ui(t))return ll(t.type)&&t.children?hl(t.children):t;if(t.component)return t.component.subTree;const{shapeFlag:e,children:r}=t;if(r){if(e&16)return r[0];if(e&32&&he(r.default))return r.default()}}function ln(t,e){t.shapeFlag&6&&t.component?(t.transition=e,ln(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function fl(t,e=!1,r){let n=[],i=0;for(let s=0;s<t.length;s++){let o=t[s];const l=r==null?o.key:String(r)+String(o.key!=null?o.key:s);o.type===He?(o.patchFlag&128&&i++,n=n.concat(fl(o.children,e,l))):(e||o.type!==We)&&n.push(l!=null?Wt(o,{key:l}):o)}if(i>1)for(let s=0;s<n.length;s++)n[s].patchFlag=-2;return n}function pl(t,e){return he(t)?De({name:t.name},e,{setup:t}):t}function gl(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}const qn=new WeakMap;function Xr(t,e,r,n,i=!1){if(le(t)){t.forEach((d,f)=>Xr(d,e&&(le(e)?e[f]:e),r,n,i));return}if(Yr(n)&&!i){n.shapeFlag&512&&n.type.__asyncResolved&&n.component.subTree.component&&Xr(t,e,r,n.component.subTree);return}const s=n.shapeFlag&4?pi(n.component):n.el,o=i?null:s,{i:l,r:a}=t,u=e&&e.r,c=l.refs===we?l.refs={}:l.refs,h=l.setupState,y=me(h),g=h===we?Ca:d=>_e(y,d);if(u!=null&&u!==a){if(so(e),xe(u))c[u]=null,g(u)&&(h[u]=null);else if($e(u)){u.value=null;const d=e;d.k&&(c[d.k]=null)}}if(he(a))mn(a,l,12,[o,c]);else{const d=xe(a),f=$e(a);if(d||f){const p=()=>{if(t.f){const v=d?g(a)?h[a]:c[a]:a.value;if(i)le(v)&&Ts(v,s);else if(le(v))v.includes(s)||v.push(s);else if(d)c[a]=[s],g(a)&&(h[a]=c[a]);else{const m=[s];a.value=m,t.k&&(c[t.k]=m)}}else d?(c[a]=o,g(a)&&(h[a]=o)):f&&(a.value=o,t.k&&(c[t.k]=o))};if(o){const v=()=>{p(),qn.delete(t)};v.id=-1,qn.set(t,v),Ze(v,r)}else so(t),p()}}}function so(t){const e=qn.get(t);e&&(e.flags|=8,qn.delete(t))}oi().requestIdleCallback;oi().cancelIdleCallback;const Yr=t=>!!t.type.__asyncLoader,ui=t=>t.type.__isKeepAlive;function qc(t,e){vl(t,"a",e)}function Hc(t,e){vl(t,"da",e)}function vl(t,e,r=Me){const n=t.__wdc||(t.__wdc=()=>{let i=r;for(;i;){if(i.isDeactivated)return;i=i.parent}return t()});if(ci(e,n,r),r){let i=r.parent;for(;i&&i.parent;)ui(i.parent.vnode)&&Wc(n,e,r,i),i=i.parent}}function Wc(t,e,r,n){const i=ci(e,t,n,!0);hi(()=>{Ts(n[e],i)},r)}function ci(t,e,r=Me,n=!1){if(r){const i=r[t]||(r[t]=[]),s=e.__weh||(e.__weh=(...o)=>{At();const l=yn(r),a=pt(e,r,t,o);return l(),It(),a});return n?i.unshift(s):i.push(s),s}}const Dt=t=>(e,r=Me)=>{(!cn||t==="sp")&&ci(t,(...n)=>e(...n),r)},Kc=Dt("bm"),fr=Dt("m"),zc=Dt("bu"),Gc=Dt("u"),Ls=Dt("bum"),hi=Dt("um"),Jc=Dt("sp"),Xc=Dt("rtg"),Yc=Dt("rtc");function Qc(t,e=Me){ci("ec",t,e)}const Zc="components",ml=Symbol.for("v-ndc");function eh(t){return xe(t)?th(Zc,t,!1)||t:t||ml}function th(t,e,r=!0,n=!1){const i=rt||Me;if(i){const s=i.type;{const l=qh(s,!1);if(l&&(l===e||l===ot(e)||l===si(ot(e))))return s}const o=oo(i[t]||s[t],e)||oo(i.appContext[t],e);return!o&&n?s:o}}function oo(t,e){return t&&(t[e]||t[ot(e)]||t[si(ot(e))])}function Hn(t,e,r,n){let i;const s=r,o=le(t);if(o||xe(t)){const l=o&&ur(t);let a=!1,u=!1;l&&(a=!st(t),u=jt(t),t=ai(t)),i=new Array(t.length);for(let c=0,h=t.length;c<h;c++)i[c]=e(a?u?Dr(ft(t[c])):ft(t[c]):t[c],c,void 0,s)}else if(typeof t=="number"){i=new Array(t);for(let l=0;l<t;l++)i[l]=e(l+1,l,void 0,s)}else if(Ee(t))if(t[Symbol.iterator])i=Array.from(t,(l,a)=>e(l,a,void 0,s));else{const l=Object.keys(t);i=new Array(l.length);for(let a=0,u=l.length;a<u;a++){const c=l[a];i[a]=e(t[c],c,a,s)}}else i=[];return i}const Zi=t=>t?Ul(t)?pi(t):Zi(t.parent):null,Qr=De(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Zi(t.parent),$root:t=>Zi(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>_l(t),$forceUpdate:t=>t.f||(t.f=()=>{Ds(t.update)}),$nextTick:t=>t.n||(t.n=nl.bind(t.proxy)),$watch:t=>dh.bind(t)}),ki=(t,e)=>t!==we&&!t.__isScriptSetup&&_e(t,e),rh={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:r,setupState:n,data:i,props:s,accessCache:o,type:l,appContext:a}=t;if(e[0]!=="$"){const y=o[e];if(y!==void 0)switch(y){case 1:return n[e];case 2:return i[e];case 4:return r[e];case 3:return s[e]}else{if(ki(n,e))return o[e]=1,n[e];if(i!==we&&_e(i,e))return o[e]=2,i[e];if(_e(s,e))return o[e]=3,s[e];if(r!==we&&_e(r,e))return o[e]=4,r[e];es&&(o[e]=0)}}const u=Qr[e];let c,h;if(u)return e==="$attrs"&&Ue(t.attrs,"get",""),u(t);if((c=l.__cssModules)&&(c=c[e]))return c;if(r!==we&&_e(r,e))return o[e]=4,r[e];if(h=a.config.globalProperties,_e(h,e))return h[e]},set({_:t},e,r){const{data:n,setupState:i,ctx:s}=t;return ki(i,e)?(i[e]=r,!0):n!==we&&_e(n,e)?(n[e]=r,!0):_e(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(s[e]=r,!0)},has({_:{data:t,setupState:e,accessCache:r,ctx:n,appContext:i,props:s,type:o}},l){let a;return!!(r[l]||t!==we&&l[0]!=="$"&&_e(t,l)||ki(e,l)||_e(s,l)||_e(n,l)||_e(Qr,l)||_e(i.config.globalProperties,l)||(a=o.__cssModules)&&a[l])},defineProperty(t,e,r){return r.get!=null?t._.accessCache[e]=0:_e(r,"value")&&this.set(t,e,r.value,null),Reflect.defineProperty(t,e,r)}};function ao(t){return le(t)?t.reduce((e,r)=>(e[r]=null,e),{}):t}let es=!0;function nh(t){const e=_l(t),r=t.proxy,n=t.ctx;es=!1,e.beforeCreate&&lo(e.beforeCreate,t,"bc");const{data:i,computed:s,methods:o,watch:l,provide:a,inject:u,created:c,beforeMount:h,mounted:y,beforeUpdate:g,updated:d,activated:f,deactivated:p,beforeDestroy:v,beforeUnmount:m,destroyed:b,unmounted:_,render:w,renderTracked:P,renderTriggered:O,errorCaptured:H,serverPrefetch:U,expose:L,inheritAttrs:N,components:x,directives:$,filters:Q}=e;if(u&&ih(u,n,null),o)for(const k in o){const R=o[k];he(R)&&(n[k]=R.bind(r))}if(i){const k=i.call(r,r);Ee(k)&&(t.data=Ht(k))}if(es=!0,s)for(const k in s){const R=s[k],q=he(R)?R.bind(r,r):he(R.get)?R.get.bind(r,r):St,Y=!he(R)&&he(R.set)?R.set.bind(r):St,Z=je({get:q,set:Y});Object.defineProperty(n,k,{enumerable:!0,configurable:!0,get:()=>Z.value,set:ee=>Z.value=ee})}if(l)for(const k in l)yl(l[k],n,r,k);if(a){const k=he(a)?a.call(r):a;Reflect.ownKeys(k).forEach(R=>{Nn(R,k[R])})}c&&lo(c,t,"c");function S(k,R){le(R)?R.forEach(q=>k(q.bind(r))):R&&k(R.bind(r))}if(S(Kc,h),S(fr,y),S(zc,g),S(Gc,d),S(qc,f),S(Hc,p),S(Qc,H),S(Yc,P),S(Xc,O),S(Ls,m),S(hi,_),S(Jc,U),le(L))if(L.length){const k=t.exposed||(t.exposed={});L.forEach(R=>{Object.defineProperty(k,R,{get:()=>r[R],set:q=>r[R]=q,enumerable:!0})})}else t.exposed||(t.exposed={});w&&t.render===St&&(t.render=w),N!=null&&(t.inheritAttrs=N),x&&(t.components=x),$&&(t.directives=$),U&&gl(t)}function ih(t,e,r=St){le(t)&&(t=ts(t));for(const n in t){const i=t[n];let s;Ee(i)?"default"in i?s=dt(i.from||n,i.default,!0):s=dt(i.from||n):s=dt(i),$e(s)?Object.defineProperty(e,n,{enumerable:!0,configurable:!0,get:()=>s.value,set:o=>s.value=o}):e[n]=s}}function lo(t,e,r){pt(le(t)?t.map(n=>n.bind(e.proxy)):t.bind(e.proxy),e,r)}function yl(t,e,r,n){let i=n.includes(".")?Sl(r,n):()=>r[n];if(xe(t)){const s=e[t];he(s)&&Zr(i,s)}else if(he(t))Zr(i,t.bind(r));else if(Ee(t))if(le(t))t.forEach(s=>yl(s,e,r,n));else{const s=he(t.handler)?t.handler.bind(r):e[t.handler];he(s)&&Zr(i,s,t)}}function _l(t){const e=t.type,{mixins:r,extends:n}=e,{mixins:i,optionsCache:s,config:{optionMergeStrategies:o}}=t.appContext,l=s.get(e);let a;return l?a=l:!i.length&&!r&&!n?a=e:(a={},i.length&&i.forEach(u=>Wn(a,u,o,!0)),Wn(a,e,o)),Ee(e)&&s.set(e,a),a}function Wn(t,e,r,n=!1){const{mixins:i,extends:s}=e;s&&Wn(t,s,r,!0),i&&i.forEach(o=>Wn(t,o,r,!0));for(const o in e)if(!(n&&o==="expose")){const l=sh[o]||r&&r[o];t[o]=l?l(t[o],e[o]):e[o]}return t}const sh={data:uo,props:co,emits:co,methods:Wr,computed:Wr,beforeCreate:Be,created:Be,beforeMount:Be,mounted:Be,beforeUpdate:Be,updated:Be,beforeDestroy:Be,beforeUnmount:Be,destroyed:Be,unmounted:Be,activated:Be,deactivated:Be,errorCaptured:Be,serverPrefetch:Be,components:Wr,directives:Wr,watch:ah,provide:uo,inject:oh};function uo(t,e){return e?t?function(){return De(he(t)?t.call(this,this):t,he(e)?e.call(this,this):e)}:e:t}function oh(t,e){return Wr(ts(t),ts(e))}function ts(t){if(le(t)){const e={};for(let r=0;r<t.length;r++)e[t[r]]=t[r];return e}return t}function Be(t,e){return t?[...new Set([].concat(t,e))]:e}function Wr(t,e){return t?De(Object.create(null),t,e):e}function co(t,e){return t?le(t)&&le(e)?[...new Set([...t,...e])]:De(Object.create(null),ao(t),ao(e??{})):e}function ah(t,e){if(!t)return e;if(!e)return t;const r=De(Object.create(null),t);for(const n in e)r[n]=Be(t[n],e[n]);return r}function bl(){return{app:null,config:{isNativeTag:Ca,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let lh=0;function uh(t,e){return function(n,i=null){he(n)||(n=De({},n)),i!=null&&!Ee(i)&&(i=null);const s=bl(),o=new WeakSet,l=[];let a=!1;const u=s.app={_uid:lh++,_component:n,_props:i,_container:null,_context:s,_instance:null,version:Wh,get config(){return s.config},set config(c){},use(c,...h){return o.has(c)||(c&&he(c.install)?(o.add(c),c.install(u,...h)):he(c)&&(o.add(c),c(u,...h))),u},mixin(c){return s.mixins.includes(c)||s.mixins.push(c),u},component(c,h){return h?(s.components[c]=h,u):s.components[c]},directive(c,h){return h?(s.directives[c]=h,u):s.directives[c]},mount(c,h,y){if(!a){const g=u._ceVNode||Ke(n,i);return g.appContext=s,y===!0?y="svg":y===!1&&(y=void 0),t(g,c,y),a=!0,u._container=c,c.__vue_app__=u,pi(g.component)}},onUnmount(c){l.push(c)},unmount(){a&&(pt(l,u._instance,16),t(null,u._container),delete u._container.__vue_app__)},provide(c,h){return s.provides[c]=h,u},runWithContext(c){const h=Cr;Cr=u;try{return c()}finally{Cr=h}}};return u}}let Cr=null;function Nn(t,e){if(Me){let r=Me.provides;const n=Me.parent&&Me.parent.provides;n===r&&(r=Me.provides=Object.create(n)),r[t]=e}}function dt(t,e,r=!1){const n=Fl();if(n||Cr){let i=Cr?Cr._context.provides:n?n.parent==null||n.ce?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:void 0;if(i&&t in i)return i[t];if(arguments.length>1)return r&&he(e)?e.call(n&&n.proxy):e}}const ch=Symbol.for("v-scx"),hh=()=>dt(ch);function Zr(t,e,r){return wl(t,e,r)}function wl(t,e,r=we){const{immediate:n,deep:i,flush:s,once:o}=r,l=De({},r),a=e&&n||!e&&s!=="post";let u;if(cn){if(s==="sync"){const g=hh();u=g.__watcherHandles||(g.__watcherHandles=[])}else if(!a){const g=()=>{};return g.stop=St,g.resume=St,g.pause=St,g}}const c=Me;l.call=(g,d,f)=>pt(g,c,d,f);let h=!1;s==="post"?l.scheduler=g=>{Ze(g,c&&c.suspense)}:s!=="sync"&&(h=!0,l.scheduler=(g,d)=>{d?g():Ds(g)}),l.augmentJob=g=>{e&&(g.flags|=4),h&&(g.flags|=2,c&&(g.id=c.uid,g.i=c))};const y=Lc(t,e,l);return cn&&(u?u.push(y):a&&y()),y}function dh(t,e,r){const n=this.proxy,i=xe(t)?t.includes(".")?Sl(n,t):()=>n[t]:t.bind(n,n);let s;he(e)?s=e:(s=e.handler,r=e);const o=yn(this),l=wl(i,s.bind(n),r);return o(),l}function Sl(t,e){const r=e.split(".");return()=>{let n=t;for(let i=0;i<r.length&&n;i++)n=n[r[i]];return n}}const fh=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${ot(e)}Modifiers`]||t[`${dr(e)}Modifiers`];function ph(t,e,...r){if(t.isUnmounted)return;const n=t.vnode.props||we;let i=r;const s=e.startsWith("update:"),o=s&&fh(n,e.slice(7));o&&(o.trim&&(i=r.map(c=>xe(c)?c.trim():c)),o.number&&(i=r.map(ks)));let l,a=n[l=bi(e)]||n[l=bi(ot(e))];!a&&s&&(a=n[l=bi(dr(e))]),a&&pt(a,t,6,i);const u=n[l+"Once"];if(u){if(!t.emitted)t.emitted={};else if(t.emitted[l])return;t.emitted[l]=!0,pt(u,t,6,i)}}const gh=new WeakMap;function Pl(t,e,r=!1){const n=r?gh:e.emitsCache,i=n.get(t);if(i!==void 0)return i;const s=t.emits;let o={},l=!1;if(!he(t)){const a=u=>{const c=Pl(u,e,!0);c&&(l=!0,De(o,c))};!r&&e.mixins.length&&e.mixins.forEach(a),t.extends&&a(t.extends),t.mixins&&t.mixins.forEach(a)}return!s&&!l?(Ee(t)&&n.set(t,null),null):(le(s)?s.forEach(a=>o[a]=null):De(o,s),Ee(t)&&n.set(t,o),o)}function di(t,e){return!t||!ri(e)?!1:(e=e.slice(2).replace(/Once$/,""),_e(t,e[0].toLowerCase()+e.slice(1))||_e(t,dr(e))||_e(t,e))}function ho(t){const{type:e,vnode:r,proxy:n,withProxy:i,propsOptions:[s],slots:o,attrs:l,emit:a,render:u,renderCache:c,props:h,data:y,setupState:g,ctx:d,inheritAttrs:f}=t,p=Vn(t);let v,m;try{if(r.shapeFlag&4){const _=i||n,w=_;v=wt(u.call(w,_,c,h,g,y,d)),m=l}else{const _=e;v=wt(_.length>1?_(h,{attrs:l,slots:o,emit:a}):_(h,null)),m=e.props?l:vh(l)}}catch(_){en.length=0,li(_,t,1),v=Ke(We)}let b=v;if(m&&f!==!1){const _=Object.keys(m),{shapeFlag:w}=b;_.length&&w&7&&(s&&_.some(Ps)&&(m=mh(m,s)),b=Wt(b,m,!1,!0))}return r.dirs&&(b=Wt(b,null,!1,!0),b.dirs=b.dirs?b.dirs.concat(r.dirs):r.dirs),r.transition&&ln(b,r.transition),v=b,Vn(p),v}const vh=t=>{let e;for(const r in t)(r==="class"||r==="style"||ri(r))&&((e||(e={}))[r]=t[r]);return e},mh=(t,e)=>{const r={};for(const n in t)(!Ps(n)||!(n.slice(9)in e))&&(r[n]=t[n]);return r};function yh(t,e,r){const{props:n,children:i,component:s}=t,{props:o,children:l,patchFlag:a}=e,u=s.emitsOptions;if(e.dirs||e.transition)return!0;if(r&&a>=0){if(a&1024)return!0;if(a&16)return n?fo(n,o,u):!!o;if(a&8){const c=e.dynamicProps;for(let h=0;h<c.length;h++){const y=c[h];if(o[y]!==n[y]&&!di(u,y))return!0}}}else return(i||l)&&(!l||!l.$stable)?!0:n===o?!1:n?o?fo(n,o,u):!0:!!o;return!1}function fo(t,e,r){const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!0;for(let i=0;i<n.length;i++){const s=n[i];if(e[s]!==t[s]&&!di(r,s))return!0}return!1}function _h({vnode:t,parent:e},r){for(;e;){const n=e.subTree;if(n.suspense&&n.suspense.activeBranch===t&&(n.el=t.el),n===t)(t=e.vnode).el=r,e=e.parent;else break}}const Tl={},El=()=>Object.create(Tl),kl=t=>Object.getPrototypeOf(t)===Tl;function bh(t,e,r,n=!1){const i={},s=El();t.propsDefaults=Object.create(null),Ol(t,e,i,s);for(const o in t.propsOptions[0])o in i||(i[o]=void 0);r?t.props=n?i:Za(i):t.type.props?t.props=i:t.props=s,t.attrs=s}function wh(t,e,r,n){const{props:i,attrs:s,vnode:{patchFlag:o}}=t,l=me(i),[a]=t.propsOptions;let u=!1;if((n||o>0)&&!(o&16)){if(o&8){const c=t.vnode.dynamicProps;for(let h=0;h<c.length;h++){let y=c[h];if(di(t.emitsOptions,y))continue;const g=e[y];if(a)if(_e(s,y))g!==s[y]&&(s[y]=g,u=!0);else{const d=ot(y);i[d]=rs(a,l,d,g,t,!1)}else g!==s[y]&&(s[y]=g,u=!0)}}}else{Ol(t,e,i,s)&&(u=!0);let c;for(const h in l)(!e||!_e(e,h)&&((c=dr(h))===h||!_e(e,c)))&&(a?r&&(r[h]!==void 0||r[c]!==void 0)&&(i[h]=rs(a,l,h,void 0,t,!0)):delete i[h]);if(s!==l)for(const h in s)(!e||!_e(e,h))&&(delete s[h],u=!0)}u&&Rt(t.attrs,"set","")}function Ol(t,e,r,n){const[i,s]=t.propsOptions;let o=!1,l;if(e)for(let a in e){if(zr(a))continue;const u=e[a];let c;i&&_e(i,c=ot(a))?!s||!s.includes(c)?r[c]=u:(l||(l={}))[c]=u:di(t.emitsOptions,a)||(!(a in n)||u!==n[a])&&(n[a]=u,o=!0)}if(s){const a=me(r),u=l||we;for(let c=0;c<s.length;c++){const h=s[c];r[h]=rs(i,a,h,u[h],t,!_e(u,h))}}return o}function rs(t,e,r,n,i,s){const o=t[r];if(o!=null){const l=_e(o,"default");if(l&&n===void 0){const a=o.default;if(o.type!==Function&&!o.skipFactory&&he(a)){const{propsDefaults:u}=i;if(r in u)n=u[r];else{const c=yn(i);n=u[r]=a.call(null,e),c()}}else n=a;i.ce&&i.ce._setProp(r,n)}o[0]&&(s&&!l?n=!1:o[1]&&(n===""||n===dr(r))&&(n=!0))}return n}const Sh=new WeakMap;function xl(t,e,r=!1){const n=r?Sh:e.propsCache,i=n.get(t);if(i)return i;const s=t.props,o={},l=[];let a=!1;if(!he(t)){const c=h=>{a=!0;const[y,g]=xl(h,e,!0);De(o,y),g&&l.push(...g)};!r&&e.mixins.length&&e.mixins.forEach(c),t.extends&&c(t.extends),t.mixins&&t.mixins.forEach(c)}if(!s&&!a)return Ee(t)&&n.set(t,kr),kr;if(le(s))for(let c=0;c<s.length;c++){const h=ot(s[c]);po(h)&&(o[h]=we)}else if(s)for(const c in s){const h=ot(c);if(po(h)){const y=s[c],g=o[h]=le(y)||he(y)?{type:y}:De({},y),d=g.type;let f=!1,p=!0;if(le(d))for(let v=0;v<d.length;++v){const m=d[v],b=he(m)&&m.name;if(b==="Boolean"){f=!0;break}else b==="String"&&(p=!1)}else f=he(d)&&d.name==="Boolean";g[0]=f,g[1]=p,(f||_e(g,"default"))&&l.push(h)}}const u=[o,l];return Ee(t)&&n.set(t,u),u}function po(t){return t[0]!=="$"&&!zr(t)}const Ns=t=>t==="_"||t==="_ctx"||t==="$stable",Fs=t=>le(t)?t.map(wt):[wt(t)],Ph=(t,e,r)=>{if(e._n)return e;const n=Yi((...i)=>Fs(e(...i)),r);return n._c=!1,n},Rl=(t,e,r)=>{const n=t._ctx;for(const i in t){if(Ns(i))continue;const s=t[i];if(he(s))e[i]=Ph(i,s,n);else if(s!=null){const o=Fs(s);e[i]=()=>o}}},Cl=(t,e)=>{const r=Fs(e);t.slots.default=()=>r},Al=(t,e,r)=>{for(const n in e)(r||!Ns(n))&&(t[n]=e[n])},Th=(t,e,r)=>{const n=t.slots=El();if(t.vnode.shapeFlag&32){const i=e._;i?(Al(n,e,r),r&&La(n,"_",i,!0)):Rl(e,n)}else e&&Cl(t,e)},Eh=(t,e,r)=>{const{vnode:n,slots:i}=t;let s=!0,o=we;if(n.shapeFlag&32){const l=e._;l?r&&l===1?s=!1:Al(i,e,r):(s=!e.$stable,Rl(e,i)),o=e}else e&&(Cl(t,e),o={default:1});if(s)for(const l in i)!Ns(l)&&o[l]==null&&delete i[l]},Ze=Ch;function kh(t){return Oh(t)}function Oh(t,e){const r=oi();r.__VUE__=!0;const{insert:n,remove:i,patchProp:s,createElement:o,createText:l,createComment:a,setText:u,setElementText:c,parentNode:h,nextSibling:y,setScopeId:g=St,insertStaticContent:d}=t,f=(T,E,C,M=null,F=null,D=null,B=void 0,W=null,z=!!E.dynamicChildren)=>{if(T===E)return;T&&!rr(T,E)&&(M=I(T),ee(T,F,D,!0),T=null),E.patchFlag===-2&&(z=!1,E.dynamicChildren=null);const{type:V,ref:se,shapeFlag:J}=E;switch(V){case fi:p(T,E,C,M);break;case We:v(T,E,C,M);break;case xi:T==null&&m(E,C,M,B);break;case He:x(T,E,C,M,F,D,B,W,z);break;default:J&1?w(T,E,C,M,F,D,B,W,z):J&6?$(T,E,C,M,F,D,B,W,z):(J&64||J&128)&&V.process(T,E,C,M,F,D,B,W,z,te)}se!=null&&F?Xr(se,T&&T.ref,D,E||T,!E):se==null&&T&&T.ref!=null&&Xr(T.ref,null,D,T,!0)},p=(T,E,C,M)=>{if(T==null)n(E.el=l(E.children),C,M);else{const F=E.el=T.el;E.children!==T.children&&u(F,E.children)}},v=(T,E,C,M)=>{T==null?n(E.el=a(E.children||""),C,M):E.el=T.el},m=(T,E,C,M)=>{[T.el,T.anchor]=d(T.children,E,C,M,T.el,T.anchor)},b=({el:T,anchor:E},C,M)=>{let F;for(;T&&T!==E;)F=y(T),n(T,C,M),T=F;n(E,C,M)},_=({el:T,anchor:E})=>{let C;for(;T&&T!==E;)C=y(T),i(T),T=C;i(E)},w=(T,E,C,M,F,D,B,W,z)=>{if(E.type==="svg"?B="svg":E.type==="math"&&(B="mathml"),T==null)P(E,C,M,F,D,B,W,z);else{const V=T.el&&T.el._isVueCE?T.el:null;try{V&&V._beginPatch(),U(T,E,F,D,B,W,z)}finally{V&&V._endPatch()}}},P=(T,E,C,M,F,D,B,W)=>{let z,V;const{props:se,shapeFlag:J,transition:ne,dirs:oe}=T;if(z=T.el=o(T.type,D,se&&se.is,se),J&8?c(z,T.children):J&16&&H(T.children,z,null,M,F,Oi(T,D),B,W),oe&&Gt(T,null,M,"created"),O(z,T,T.scopeId,B,M),se){for(const Se in se)Se!=="value"&&!zr(Se)&&s(z,Se,null,se[Se],D,M);"value"in se&&s(z,"value",null,se.value,D),(V=se.onVnodeBeforeMount)&&_t(V,M,T)}oe&&Gt(T,null,M,"beforeMount");const ve=xh(F,ne);ve&&ne.beforeEnter(z),n(z,E,C),((V=se&&se.onVnodeMounted)||ve||oe)&&Ze(()=>{V&&_t(V,M,T),ve&&ne.enter(z),oe&&Gt(T,null,M,"mounted")},F)},O=(T,E,C,M,F)=>{if(C&&g(T,C),M)for(let D=0;D<M.length;D++)g(T,M[D]);if(F){let D=F.subTree;if(E===D||Dl(D.type)&&(D.ssContent===E||D.ssFallback===E)){const B=F.vnode;O(T,B,B.scopeId,B.slotScopeIds,F.parent)}}},H=(T,E,C,M,F,D,B,W,z=0)=>{for(let V=z;V<T.length;V++){const se=T[V]=W?$t(T[V]):wt(T[V]);f(null,se,E,C,M,F,D,B,W)}},U=(T,E,C,M,F,D,B)=>{const W=E.el=T.el;let{patchFlag:z,dynamicChildren:V,dirs:se}=E;z|=T.patchFlag&16;const J=T.props||we,ne=E.props||we;let oe;if(C&&Jt(C,!1),(oe=ne.onVnodeBeforeUpdate)&&_t(oe,C,E,T),se&&Gt(E,T,C,"beforeUpdate"),C&&Jt(C,!0),(J.innerHTML&&ne.innerHTML==null||J.textContent&&ne.textContent==null)&&c(W,""),V?L(T.dynamicChildren,V,W,C,M,Oi(E,F),D):B||R(T,E,W,null,C,M,Oi(E,F),D,!1),z>0){if(z&16)N(W,J,ne,C,F);else if(z&2&&J.class!==ne.class&&s(W,"class",null,ne.class,F),z&4&&s(W,"style",J.style,ne.style,F),z&8){const ve=E.dynamicProps;for(let Se=0;Se<ve.length;Se++){const be=ve[Se],ze=J[be],Ge=ne[be];(Ge!==ze||be==="value")&&s(W,be,ze,Ge,F,C)}}z&1&&T.children!==E.children&&c(W,E.children)}else!B&&V==null&&N(W,J,ne,C,F);((oe=ne.onVnodeUpdated)||se)&&Ze(()=>{oe&&_t(oe,C,E,T),se&&Gt(E,T,C,"updated")},M)},L=(T,E,C,M,F,D,B)=>{for(let W=0;W<E.length;W++){const z=T[W],V=E[W],se=z.el&&(z.type===He||!rr(z,V)||z.shapeFlag&198)?h(z.el):C;f(z,V,se,null,M,F,D,B,!0)}},N=(T,E,C,M,F)=>{if(E!==C){if(E!==we)for(const D in E)!zr(D)&&!(D in C)&&s(T,D,E[D],null,F,M);for(const D in C){if(zr(D))continue;const B=C[D],W=E[D];B!==W&&D!=="value"&&s(T,D,W,B,F,M)}"value"in C&&s(T,"value",E.value,C.value,F)}},x=(T,E,C,M,F,D,B,W,z)=>{const V=E.el=T?T.el:l(""),se=E.anchor=T?T.anchor:l("");let{patchFlag:J,dynamicChildren:ne,slotScopeIds:oe}=E;oe&&(W=W?W.concat(oe):oe),T==null?(n(V,C,M),n(se,C,M),H(E.children||[],C,se,F,D,B,W,z)):J>0&&J&64&&ne&&T.dynamicChildren?(L(T.dynamicChildren,ne,C,F,D,B,W),(E.key!=null||F&&E===F.subTree)&&Il(T,E,!0)):R(T,E,C,se,F,D,B,W,z)},$=(T,E,C,M,F,D,B,W,z)=>{E.slotScopeIds=W,T==null?E.shapeFlag&512?F.ctx.activate(E,C,M,B,z):Q(E,C,M,F,D,B,z):A(T,E,z)},Q=(T,E,C,M,F,D,B)=>{const W=T.component=Uh(T,M,F);if(ui(T)&&(W.ctx.renderer=te),Mh(W,!1,B),W.asyncDep){if(F&&F.registerDep(W,S,B),!T.el){const z=W.subTree=Ke(We);v(null,z,E,C),T.placeholder=z.el}}else S(W,T,E,C,F,D,B)},A=(T,E,C)=>{const M=E.component=T.component;if(yh(T,E,C))if(M.asyncDep&&!M.asyncResolved){k(M,E,C);return}else M.next=E,M.update();else E.el=T.el,M.vnode=E},S=(T,E,C,M,F,D,B)=>{const W=()=>{if(T.isMounted){let{next:J,bu:ne,u:oe,parent:ve,vnode:Se}=T;{const mt=jl(T);if(mt){J&&(J.el=Se.el,k(T,J,B)),mt.asyncDep.then(()=>{T.isUnmounted||W()});return}}let be=J,ze;Jt(T,!1),J?(J.el=Se.el,k(T,J,B)):J=Se,ne&&Ln(ne),(ze=J.props&&J.props.onVnodeBeforeUpdate)&&_t(ze,ve,J,Se),Jt(T,!0);const Ge=ho(T),vt=T.subTree;T.subTree=Ge,f(vt,Ge,h(vt.el),I(vt),T,F,D),J.el=Ge.el,be===null&&_h(T,Ge.el),oe&&Ze(oe,F),(ze=J.props&&J.props.onVnodeUpdated)&&Ze(()=>_t(ze,ve,J,Se),F)}else{let J;const{el:ne,props:oe}=E,{bm:ve,m:Se,parent:be,root:ze,type:Ge}=T,vt=Yr(E);Jt(T,!1),ve&&Ln(ve),!vt&&(J=oe&&oe.onVnodeBeforeMount)&&_t(J,be,E),Jt(T,!0);{ze.ce&&ze.ce._def.shadowRoot!==!1&&ze.ce._injectChildStyle(Ge);const mt=T.subTree=ho(T);f(null,mt,C,M,T,F,D),E.el=mt.el}if(Se&&Ze(Se,F),!vt&&(J=oe&&oe.onVnodeMounted)){const mt=E;Ze(()=>_t(J,be,mt),F)}(E.shapeFlag&256||be&&Yr(be.vnode)&&be.vnode.shapeFlag&256)&&T.a&&Ze(T.a,F),T.isMounted=!0,E=C=M=null}};T.scope.on();const z=T.effect=new Ma(W);T.scope.off();const V=T.update=z.run.bind(z),se=T.job=z.runIfDirty.bind(z);se.i=T,se.id=T.uid,z.scheduler=()=>Ds(se),Jt(T,!0),V()},k=(T,E,C)=>{E.component=T;const M=T.vnode.props;T.vnode=E,T.next=null,wh(T,E.props,M,C),Eh(T,E.children,C),At(),no(T),It()},R=(T,E,C,M,F,D,B,W,z=!1)=>{const V=T&&T.children,se=T?T.shapeFlag:0,J=E.children,{patchFlag:ne,shapeFlag:oe}=E;if(ne>0){if(ne&128){Y(V,J,C,M,F,D,B,W,z);return}else if(ne&256){q(V,J,C,M,F,D,B,W,z);return}}oe&8?(se&16&&fe(V,F,D),J!==V&&c(C,J)):se&16?oe&16?Y(V,J,C,M,F,D,B,W,z):fe(V,F,D,!0):(se&8&&c(C,""),oe&16&&H(J,C,M,F,D,B,W,z))},q=(T,E,C,M,F,D,B,W,z)=>{T=T||kr,E=E||kr;const V=T.length,se=E.length,J=Math.min(V,se);let ne;for(ne=0;ne<J;ne++){const oe=E[ne]=z?$t(E[ne]):wt(E[ne]);f(T[ne],oe,C,null,F,D,B,W,z)}V>se?fe(T,F,D,!0,!1,J):H(E,C,M,F,D,B,W,z,J)},Y=(T,E,C,M,F,D,B,W,z)=>{let V=0;const se=E.length;let J=T.length-1,ne=se-1;for(;V<=J&&V<=ne;){const oe=T[V],ve=E[V]=z?$t(E[V]):wt(E[V]);if(rr(oe,ve))f(oe,ve,C,null,F,D,B,W,z);else break;V++}for(;V<=J&&V<=ne;){const oe=T[J],ve=E[ne]=z?$t(E[ne]):wt(E[ne]);if(rr(oe,ve))f(oe,ve,C,null,F,D,B,W,z);else break;J--,ne--}if(V>J){if(V<=ne){const oe=ne+1,ve=oe<se?E[oe].el:M;for(;V<=ne;)f(null,E[V]=z?$t(E[V]):wt(E[V]),C,ve,F,D,B,W,z),V++}}else if(V>ne)for(;V<=J;)ee(T[V],F,D,!0),V++;else{const oe=V,ve=V,Se=new Map;for(V=ve;V<=ne;V++){const Ye=E[V]=z?$t(E[V]):wt(E[V]);Ye.key!=null&&Se.set(Ye.key,V)}let be,ze=0;const Ge=ne-ve+1;let vt=!1,mt=0;const Br=new Array(Ge);for(V=0;V<Ge;V++)Br[V]=0;for(V=oe;V<=J;V++){const Ye=T[V];if(ze>=Ge){ee(Ye,F,D,!0);continue}let yt;if(Ye.key!=null)yt=Se.get(Ye.key);else for(be=ve;be<=ne;be++)if(Br[be-ve]===0&&rr(Ye,E[be])){yt=be;break}yt===void 0?ee(Ye,F,D,!0):(Br[yt-ve]=V+1,yt>=mt?mt=yt:vt=!0,f(Ye,E[yt],C,null,F,D,B,W,z),ze++)}const Ys=vt?Rh(Br):kr;for(be=Ys.length-1,V=Ge-1;V>=0;V--){const Ye=ve+V,yt=E[Ye],Qs=E[Ye+1],Zs=Ye+1<se?Qs.el||Qs.placeholder:M;Br[V]===0?f(null,yt,C,Zs,F,D,B,W,z):vt&&(be<0||V!==Ys[be]?Z(yt,C,Zs,2):be--)}}},Z=(T,E,C,M,F=null)=>{const{el:D,type:B,transition:W,children:z,shapeFlag:V}=T;if(V&6){Z(T.component.subTree,E,C,M);return}if(V&128){T.suspense.move(E,C,M);return}if(V&64){B.move(T,E,C,te);return}if(B===He){n(D,E,C);for(let J=0;J<z.length;J++)Z(z[J],E,C,M);n(T.anchor,E,C);return}if(B===xi){b(T,E,C);return}if(M!==2&&V&1&&W)if(M===0)W.beforeEnter(D),n(D,E,C),Ze(()=>W.enter(D),F);else{const{leave:J,delayLeave:ne,afterLeave:oe}=W,ve=()=>{T.ctx.isUnmounted?i(D):n(D,E,C)},Se=()=>{D._isLeaving&&D[xt](!0),J(D,()=>{ve(),oe&&oe()})};ne?ne(D,ve,Se):Se()}else n(D,E,C)},ee=(T,E,C,M=!1,F=!1)=>{const{type:D,props:B,ref:W,children:z,dynamicChildren:V,shapeFlag:se,patchFlag:J,dirs:ne,cacheIndex:oe}=T;if(J===-2&&(F=!1),W!=null&&(At(),Xr(W,null,C,T,!0),It()),oe!=null&&(E.renderCache[oe]=void 0),se&256){E.ctx.deactivate(T);return}const ve=se&1&&ne,Se=!Yr(T);let be;if(Se&&(be=B&&B.onVnodeBeforeUnmount)&&_t(be,E,T),se&6)ue(T.component,C,M);else{if(se&128){T.suspense.unmount(C,M);return}ve&&Gt(T,null,E,"beforeUnmount"),se&64?T.type.remove(T,E,C,te,M):V&&!V.hasOnce&&(D!==He||J>0&&J&64)?fe(V,E,C,!1,!0):(D===He&&J&384||!F&&se&16)&&fe(z,E,C),M&&X(T)}(Se&&(be=B&&B.onVnodeUnmounted)||ve)&&Ze(()=>{be&&_t(be,E,T),ve&&Gt(T,null,E,"unmounted")},C)},X=T=>{const{type:E,el:C,anchor:M,transition:F}=T;if(E===He){pe(C,M);return}if(E===xi){_(T);return}const D=()=>{i(C),F&&!F.persisted&&F.afterLeave&&F.afterLeave()};if(T.shapeFlag&1&&F&&!F.persisted){const{leave:B,delayLeave:W}=F,z=()=>B(C,D);W?W(T.el,D,z):z()}else D()},pe=(T,E)=>{let C;for(;T!==E;)C=y(T),i(T),T=C;i(E)},ue=(T,E,C)=>{const{bum:M,scope:F,job:D,subTree:B,um:W,m:z,a:V}=T;go(z),go(V),M&&Ln(M),F.stop(),D&&(D.flags|=8,ee(B,T,E,C)),W&&Ze(W,E),Ze(()=>{T.isUnmounted=!0},E)},fe=(T,E,C,M=!1,F=!1,D=0)=>{for(let B=D;B<T.length;B++)ee(T[B],E,C,M,F)},I=T=>{if(T.shapeFlag&6)return I(T.component.subTree);if(T.shapeFlag&128)return T.suspense.next();const E=y(T.anchor||T.el),C=E&&E[Mc];return C?y(C):E};let G=!1;const K=(T,E,C)=>{T==null?E._vnode&&ee(E._vnode,null,null,!0):f(E._vnode||null,T,E,null,null,null,C),E._vnode=T,G||(G=!0,no(),sl(),G=!1)},te={p:f,um:ee,m:Z,r:X,mt:Q,mc:H,pc:R,pbc:L,n:I,o:t};return{render:K,hydrate:void 0,createApp:uh(K)}}function Oi({type:t,props:e},r){return r==="svg"&&t==="foreignObject"||r==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:r}function Jt({effect:t,job:e},r){r?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function xh(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function Il(t,e,r=!1){const n=t.children,i=e.children;if(le(n)&&le(i))for(let s=0;s<n.length;s++){const o=n[s];let l=i[s];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=i[s]=$t(i[s]),l.el=o.el),!r&&l.patchFlag!==-2&&Il(o,l)),l.type===fi&&l.patchFlag!==-1&&(l.el=o.el),l.type===We&&!l.el&&(l.el=o.el)}}function Rh(t){const e=t.slice(),r=[0];let n,i,s,o,l;const a=t.length;for(n=0;n<a;n++){const u=t[n];if(u!==0){if(i=r[r.length-1],t[i]<u){e[n]=i,r.push(n);continue}for(s=0,o=r.length-1;s<o;)l=s+o>>1,t[r[l]]<u?s=l+1:o=l;u<t[r[s]]&&(s>0&&(e[n]=r[s-1]),r[s]=n)}}for(s=r.length,o=r[s-1];s-- >0;)r[s]=o,o=e[o];return r}function jl(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:jl(e)}function go(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const Dl=t=>t.__isSuspense;function Ch(t,e){e&&e.pendingBranch?le(t)?e.effects.push(...t):e.effects.push(t):Uc(t)}const He=Symbol.for("v-fgt"),fi=Symbol.for("v-txt"),We=Symbol.for("v-cmt"),xi=Symbol.for("v-stc"),en=[];let nt=null;function de(t=!1){en.push(nt=t?null:[])}function Ah(){en.pop(),nt=en[en.length-1]||null}let un=1;function Kn(t,e=!1){un+=t,t<0&&nt&&e&&(nt.hasOnce=!0)}function Ll(t){return t.dynamicChildren=un>0?nt||kr:null,Ah(),un>0&&nt&&nt.push(t),t}function ge(t,e,r,n,i,s){return Ll(j(t,e,r,n,i,s,!0))}function zn(t,e,r,n,i){return Ll(Ke(t,e,r,n,i,!0))}function Gn(t){return t?t.__v_isVNode===!0:!1}function rr(t,e){return t.type===e.type&&t.key===e.key}const Nl=({key:t})=>t??null,Fn=({ref:t,ref_key:e,ref_for:r})=>(typeof t=="number"&&(t=""+t),t!=null?xe(t)||$e(t)||he(t)?{i:rt,r:t,k:e,f:!!r}:t:null);function j(t,e=null,r=null,n=0,i=null,s=t===He?0:1,o=!1,l=!1){const a={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&Nl(e),ref:e&&Fn(e),scopeId:al,slotScopeIds:null,children:r,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:n,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:rt};return l?(Us(a,r),s&128&&t.normalize(a)):r&&(a.shapeFlag|=xe(r)?8:16),un>0&&!o&&nt&&(a.patchFlag>0||s&6)&&a.patchFlag!==32&&nt.push(a),a}const Ke=Ih;function Ih(t,e=null,r=null,n=0,i=null,s=!1){if((!t||t===ml)&&(t=We),Gn(t)){const l=Wt(t,e,!0);return r&&Us(l,r),un>0&&!s&&nt&&(l.shapeFlag&6?nt[nt.indexOf(t)]=l:nt.push(l)),l.patchFlag=-2,l}if(Hh(t)&&(t=t.__vccOpts),e){e=jh(e);let{class:l,style:a}=e;l&&!xe(l)&&(e.class=hr(l)),Ee(a)&&(js(a)&&!le(a)&&(a=De({},a)),e.style=jr(a))}const o=xe(t)?1:Dl(t)?128:ll(t)?64:Ee(t)?4:he(t)?2:0;return j(t,e,r,n,i,o,s,!0)}function jh(t){return t?js(t)||kl(t)?De({},t):t:null}function Wt(t,e,r=!1,n=!1){const{props:i,ref:s,patchFlag:o,children:l,transition:a}=t,u=e?Lh(i||{},e):i,c={__v_isVNode:!0,__v_skip:!0,type:t.type,props:u,key:u&&Nl(u),ref:e&&e.ref?r&&s?le(s)?s.concat(Fn(e)):[s,Fn(e)]:Fn(e):s,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:l,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==He?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:a,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Wt(t.ssContent),ssFallback:t.ssFallback&&Wt(t.ssFallback),placeholder:t.placeholder,el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return a&&n&&ln(c,a.clone(c)),c}function Dh(t=" ",e=0){return Ke(fi,null,t,e)}function ct(t="",e=!1){return e?(de(),zn(We,null,t)):Ke(We,null,t)}function wt(t){return t==null||typeof t=="boolean"?Ke(We):le(t)?Ke(He,null,t.slice()):Gn(t)?$t(t):Ke(fi,null,String(t))}function $t(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Wt(t)}function Us(t,e){let r=0;const{shapeFlag:n}=t;if(e==null)e=null;else if(le(e))r=16;else if(typeof e=="object")if(n&65){const i=e.default;i&&(i._c&&(i._d=!1),Us(t,i()),i._c&&(i._d=!0));return}else{r=32;const i=e._;!i&&!kl(e)?e._ctx=rt:i===3&&rt&&(rt.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else he(e)?(e={default:e,_ctx:rt},r=32):(e=String(e),n&64?(r=16,e=[Dh(e)]):r=8);t.children=e,t.shapeFlag|=r}function Lh(...t){const e={};for(let r=0;r<t.length;r++){const n=t[r];for(const i in n)if(i==="class")e.class!==n.class&&(e.class=hr([e.class,n.class]));else if(i==="style")e.style=jr([e.style,n.style]);else if(ri(i)){const s=e[i],o=n[i];o&&s!==o&&!(le(s)&&s.includes(o))&&(e[i]=s?[].concat(s,o):o)}else i!==""&&(e[i]=n[i])}return e}function _t(t,e,r,n=null){pt(t,e,7,[r,n])}const Nh=bl();let Fh=0;function Uh(t,e,r){const n=t.type,i=(e?e.appContext:t.appContext)||Nh,s={uid:Fh++,vnode:t,type:n,parent:e,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new lc(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(i.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:xl(n,i),emitsOptions:Pl(n,i),emit:null,emitted:null,propsDefaults:we,inheritAttrs:n.inheritAttrs,ctx:we,data:we,props:we,attrs:we,slots:we,refs:we,setupState:we,setupContext:null,suspense:r,suspenseId:r?r.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=e?e.root:s,s.emit=ph.bind(null,s),t.ce&&t.ce(s),s}let Me=null;const Fl=()=>Me||rt;let Jn,ns;{const t=oi(),e=(r,n)=>{let i;return(i=t[r])||(i=t[r]=[]),i.push(n),s=>{i.length>1?i.forEach(o=>o(s)):i[0](s)}};Jn=e("__VUE_INSTANCE_SETTERS__",r=>Me=r),ns=e("__VUE_SSR_SETTERS__",r=>cn=r)}const yn=t=>{const e=Me;return Jn(t),t.scope.on(),()=>{t.scope.off(),Jn(e)}},vo=()=>{Me&&Me.scope.off(),Jn(null)};function Ul(t){return t.vnode.shapeFlag&4}let cn=!1;function Mh(t,e=!1,r=!1){e&&ns(e);const{props:n,children:i}=t.vnode,s=Ul(t);bh(t,n,s,e),Th(t,i,r||e);const o=s?$h(t,e):void 0;return e&&ns(!1),o}function $h(t,e){const r=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,rh);const{setup:n}=r;if(n){At();const i=t.setupContext=n.length>1?Vh(t):null,s=yn(t),o=mn(n,t,0,[t.props,i]),l=Ia(o);if(It(),s(),(l||t.sp)&&!Yr(t)&&gl(t),l){if(o.then(vo,vo),e)return o.then(a=>{mo(t,a)}).catch(a=>{li(a,t,0)});t.asyncDep=o}else mo(t,o)}else Ml(t)}function mo(t,e,r){he(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:Ee(e)&&(t.setupState=tl(e)),Ml(t)}function Ml(t,e,r){const n=t.type;t.render||(t.render=n.render||St);{const i=yn(t);At();try{nh(t)}finally{It(),i()}}}const Bh={get(t,e){return Ue(t,"get",""),t[e]}};function Vh(t){const e=r=>{t.exposed=r||{}};return{attrs:new Proxy(t.attrs,Bh),slots:t.slots,emit:t.emit,expose:e}}function pi(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(tl(xc(t.exposed)),{get(e,r){if(r in e)return e[r];if(r in Qr)return Qr[r](t)},has(e,r){return r in e||r in Qr}})):t.proxy}function qh(t,e=!0){return he(t)?t.displayName||t.name:t.name||e&&t.__name}function Hh(t){return he(t)&&"__vccOpts"in t}const je=(t,e)=>jc(t,e,cn);function Ms(t,e,r){try{Kn(-1);const n=arguments.length;return n===2?Ee(e)&&!le(e)?Gn(e)?Ke(t,null,[e]):Ke(t,e):Ke(t,null,e):(n>3?r=Array.prototype.slice.call(arguments,2):n===3&&Gn(r)&&(r=[r]),Ke(t,e,r))}finally{Kn(1)}}const Wh="3.5.25";let is;const yo=typeof window<"u"&&window.trustedTypes;if(yo)try{is=yo.createPolicy("vue",{createHTML:t=>t})}catch{}const $l=is?t=>is.createHTML(t):t=>t,Kh="http://www.w3.org/2000/svg",zh="http://www.w3.org/1998/Math/MathML",kt=typeof document<"u"?document:null,_o=kt&&kt.createElement("template"),Gh={insert:(t,e,r)=>{e.insertBefore(t,r||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,r,n)=>{const i=e==="svg"?kt.createElementNS(Kh,t):e==="mathml"?kt.createElementNS(zh,t):r?kt.createElement(t,{is:r}):kt.createElement(t);return t==="select"&&n&&n.multiple!=null&&i.setAttribute("multiple",n.multiple),i},createText:t=>kt.createTextNode(t),createComment:t=>kt.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>kt.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,r,n,i,s){const o=r?r.previousSibling:e.lastChild;if(i&&(i===s||i.nextSibling))for(;e.insertBefore(i.cloneNode(!0),r),!(i===s||!(i=i.nextSibling)););else{_o.innerHTML=$l(n==="svg"?`<svg>${t}</svg>`:n==="mathml"?`<math>${t}</math>`:t);const l=_o.content;if(n==="svg"||n==="mathml"){const a=l.firstChild;for(;a.firstChild;)l.appendChild(a.firstChild);l.removeChild(a)}e.insertBefore(l,r)}return[o?o.nextSibling:e.firstChild,r?r.previousSibling:e.lastChild]}},Lt="transition",qr="animation",hn=Symbol("_vtc"),Bl={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},Jh=De({},ul,Bl),Xh=t=>(t.displayName="Transition",t.props=Jh,t),Yh=Xh((t,{slots:e})=>Ms(Vc,Qh(t),e)),Xt=(t,e=[])=>{le(t)?t.forEach(r=>r(...e)):t&&t(...e)},bo=t=>t?le(t)?t.some(e=>e.length>1):t.length>1:!1;function Qh(t){const e={};for(const x in t)x in Bl||(e[x]=t[x]);if(t.css===!1)return e;const{name:r="v",type:n,duration:i,enterFromClass:s=`${r}-enter-from`,enterActiveClass:o=`${r}-enter-active`,enterToClass:l=`${r}-enter-to`,appearFromClass:a=s,appearActiveClass:u=o,appearToClass:c=l,leaveFromClass:h=`${r}-leave-from`,leaveActiveClass:y=`${r}-leave-active`,leaveToClass:g=`${r}-leave-to`}=t,d=Zh(i),f=d&&d[0],p=d&&d[1],{onBeforeEnter:v,onEnter:m,onEnterCancelled:b,onLeave:_,onLeaveCancelled:w,onBeforeAppear:P=v,onAppear:O=m,onAppearCancelled:H=b}=e,U=(x,$,Q,A)=>{x._enterCancelled=A,Yt(x,$?c:l),Yt(x,$?u:o),Q&&Q()},L=(x,$)=>{x._isLeaving=!1,Yt(x,h),Yt(x,g),Yt(x,y),$&&$()},N=x=>($,Q)=>{const A=x?O:m,S=()=>U($,x,Q);Xt(A,[$,S]),wo(()=>{Yt($,x?a:s),Tt($,x?c:l),bo(A)||So($,n,f,S)})};return De(e,{onBeforeEnter(x){Xt(v,[x]),Tt(x,s),Tt(x,o)},onBeforeAppear(x){Xt(P,[x]),Tt(x,a),Tt(x,u)},onEnter:N(!1),onAppear:N(!0),onLeave(x,$){x._isLeaving=!0;const Q=()=>L(x,$);Tt(x,h),x._enterCancelled?(Tt(x,y),Eo(x)):(Eo(x),Tt(x,y)),wo(()=>{x._isLeaving&&(Yt(x,h),Tt(x,g),bo(_)||So(x,n,p,Q))}),Xt(_,[x,Q])},onEnterCancelled(x){U(x,!1,void 0,!0),Xt(b,[x])},onAppearCancelled(x){U(x,!0,void 0,!0),Xt(H,[x])},onLeaveCancelled(x){L(x),Xt(w,[x])}})}function Zh(t){if(t==null)return null;if(Ee(t))return[Ri(t.enter),Ri(t.leave)];{const e=Ri(t);return[e,e]}}function Ri(t){return tc(t)}function Tt(t,e){e.split(/\s+/).forEach(r=>r&&t.classList.add(r)),(t[hn]||(t[hn]=new Set)).add(e)}function Yt(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.remove(n));const r=t[hn];r&&(r.delete(e),r.size||(t[hn]=void 0))}function wo(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let ed=0;function So(t,e,r,n){const i=t._endId=++ed,s=()=>{i===t._endId&&n()};if(r!=null)return setTimeout(s,r);const{type:o,timeout:l,propCount:a}=td(t,e);if(!o)return n();const u=o+"end";let c=0;const h=()=>{t.removeEventListener(u,y),s()},y=g=>{g.target===t&&++c>=a&&h()};setTimeout(()=>{c<a&&h()},l+1),t.addEventListener(u,y)}function td(t,e){const r=window.getComputedStyle(t),n=d=>(r[d]||"").split(", "),i=n(`${Lt}Delay`),s=n(`${Lt}Duration`),o=Po(i,s),l=n(`${qr}Delay`),a=n(`${qr}Duration`),u=Po(l,a);let c=null,h=0,y=0;e===Lt?o>0&&(c=Lt,h=o,y=s.length):e===qr?u>0&&(c=qr,h=u,y=a.length):(h=Math.max(o,u),c=h>0?o>u?Lt:qr:null,y=c?c===Lt?s.length:a.length:0);const g=c===Lt&&/\b(?:transform|all)(?:,|$)/.test(n(`${Lt}Property`).toString());return{type:c,timeout:h,propCount:y,hasTransform:g}}function Po(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((r,n)=>To(r)+To(t[n])))}function To(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function Eo(t){return(t?t.ownerDocument:document).body.offsetHeight}function rd(t,e,r){const n=t[hn];n&&(e=(e?[e,...n]:[...n]).join(" ")),e==null?t.removeAttribute("class"):r?t.setAttribute("class",e):t.className=e}const ko=Symbol("_vod"),nd=Symbol("_vsh"),id=Symbol(""),sd=/(?:^|;)\s*display\s*:/;function od(t,e,r){const n=t.style,i=xe(r);let s=!1;if(r&&!i){if(e)if(xe(e))for(const o of e.split(";")){const l=o.slice(0,o.indexOf(":")).trim();r[l]==null&&Un(n,l,"")}else for(const o in e)r[o]==null&&Un(n,o,"");for(const o in r)o==="display"&&(s=!0),Un(n,o,r[o])}else if(i){if(e!==r){const o=n[id];o&&(r+=";"+o),n.cssText=r,s=sd.test(r)}}else e&&t.removeAttribute("style");ko in t&&(t[ko]=s?n.display:"",t[nd]&&(n.display="none"))}const Oo=/\s*!important$/;function Un(t,e,r){if(le(r))r.forEach(n=>Un(t,e,n));else if(r==null&&(r=""),e.startsWith("--"))t.setProperty(e,r);else{const n=ad(t,e);Oo.test(r)?t.setProperty(dr(n),r.replace(Oo,""),"important"):t[n]=r}}const xo=["Webkit","Moz","ms"],Ci={};function ad(t,e){const r=Ci[e];if(r)return r;let n=ot(e);if(n!=="filter"&&n in t)return Ci[e]=n;n=si(n);for(let i=0;i<xo.length;i++){const s=xo[i]+n;if(s in t)return Ci[e]=s}return e}const Ro="http://www.w3.org/1999/xlink";function Co(t,e,r,n,i,s=ac(e)){n&&e.startsWith("xlink:")?r==null?t.removeAttributeNS(Ro,e.slice(6,e.length)):t.setAttributeNS(Ro,e,r):r==null||s&&!Na(r)?t.removeAttribute(e):t.setAttribute(e,s?"":Kt(r)?String(r):r)}function Ao(t,e,r,n,i){if(e==="innerHTML"||e==="textContent"){r!=null&&(t[e]=e==="innerHTML"?$l(r):r);return}const s=t.tagName;if(e==="value"&&s!=="PROGRESS"&&!s.includes("-")){const l=s==="OPTION"?t.getAttribute("value")||"":t.value,a=r==null?t.type==="checkbox"?"on":"":String(r);(l!==a||!("_value"in t))&&(t.value=a),r==null&&t.removeAttribute(e),t._value=r;return}let o=!1;if(r===""||r==null){const l=typeof t[e];l==="boolean"?r=Na(r):r==null&&l==="string"?(r="",o=!0):l==="number"&&(r=0,o=!0)}try{t[e]=r}catch{}o&&t.removeAttribute(i||e)}function Sr(t,e,r,n){t.addEventListener(e,r,n)}function ld(t,e,r,n){t.removeEventListener(e,r,n)}const Io=Symbol("_vei");function ud(t,e,r,n,i=null){const s=t[Io]||(t[Io]={}),o=s[e];if(n&&o)o.value=n;else{const[l,a]=cd(e);if(n){const u=s[e]=fd(n,i);Sr(t,l,u,a)}else o&&(ld(t,l,o,a),s[e]=void 0)}}const jo=/(?:Once|Passive|Capture)$/;function cd(t){let e;if(jo.test(t)){e={};let n;for(;n=t.match(jo);)t=t.slice(0,t.length-n[0].length),e[n[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):dr(t.slice(2)),e]}let Ai=0;const hd=Promise.resolve(),dd=()=>Ai||(hd.then(()=>Ai=0),Ai=Date.now());function fd(t,e){const r=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=r.attached)return;pt(pd(n,r.value),e,5,[n])};return r.value=t,r.attached=dd(),r}function pd(t,e){if(le(e)){const r=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{r.call(t),t._stopped=!0},e.map(n=>i=>!i._stopped&&n&&n(i))}else return e}const Do=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,gd=(t,e,r,n,i,s)=>{const o=i==="svg";e==="class"?rd(t,n,o):e==="style"?od(t,r,n):ri(e)?Ps(e)||ud(t,e,r,n,s):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):vd(t,e,n,o))?(Ao(t,e,n),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&Co(t,e,n,o,s,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!xe(n))?Ao(t,ot(e),n,s,e):(e==="true-value"?t._trueValue=n:e==="false-value"&&(t._falseValue=n),Co(t,e,n,o))};function vd(t,e,r,n){if(n)return!!(e==="innerHTML"||e==="textContent"||e in t&&Do(e)&&he(r));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="sandbox"&&t.tagName==="IFRAME"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const i=t.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return Do(e)&&xe(r)?!1:e in t}const Lo=t=>{const e=t.props["onUpdate:modelValue"]||!1;return le(e)?r=>Ln(e,r):e};function md(t){t.target.composing=!0}function No(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const Ii=Symbol("_assign");function Fo(t,e,r){return e&&(t=t.trim()),r&&(t=ks(t)),t}const Ar={created(t,{modifiers:{lazy:e,trim:r,number:n}},i){t[Ii]=Lo(i);const s=n||i.props&&i.props.type==="number";Sr(t,e?"change":"input",o=>{o.target.composing||t[Ii](Fo(t.value,r,s))}),(r||s)&&Sr(t,"change",()=>{t.value=Fo(t.value,r,s)}),e||(Sr(t,"compositionstart",md),Sr(t,"compositionend",No),Sr(t,"change",No))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:r,modifiers:{lazy:n,trim:i,number:s}},o){if(t[Ii]=Lo(o),t.composing)return;const l=(s||t.type==="number")&&!/^0\d/.test(t.value)?ks(t.value):t.value,a=e??"";l!==a&&(document.activeElement===t&&t.type!=="range"&&(n&&e===r||i&&t.value.trim()===a)||(t.value=a))}},yd=["ctrl","shift","alt","meta"],_d={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>yd.some(r=>t[`${r}Key`]&&!e.includes(r))},Xn=(t,e)=>{const r=t._withMods||(t._withMods={}),n=e.join(".");return r[n]||(r[n]=((i,...s)=>{for(let o=0;o<e.length;o++){const l=_d[e[o]];if(l&&l(i,e))return}return t(i,...s)}))},bd=De({patchProp:gd},Gh);let Uo;function wd(){return Uo||(Uo=kh(bd))}const Sd=((...t)=>{const e=wd().createApp(...t),{mount:r}=e;return e.mount=n=>{const i=Td(n);if(!i)return;const s=e._component;!he(s)&&!s.render&&!s.template&&(s.template=i.innerHTML),i.nodeType===1&&(i.textContent="");const o=r(i,!1,Pd(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),o},e});function Pd(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function Td(t){return xe(t)?document.querySelector(t):t}const Pr=typeof document<"u";function Vl(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function Ed(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&Vl(t.default)}const ye=Object.assign;function ji(t,e){const r={};for(const n in e){const i=e[n];r[n]=gt(i)?i.map(t):t(i)}return r}const tn=()=>{},gt=Array.isArray;function Mo(t,e){const r={};for(const n in t)r[n]=n in e?e[n]:t[n];return r}const ql=/#/g,kd=/&/g,Od=/\//g,xd=/=/g,Rd=/\?/g,Hl=/\+/g,Cd=/%5B/g,Ad=/%5D/g,Wl=/%5E/g,Id=/%60/g,Kl=/%7B/g,jd=/%7C/g,zl=/%7D/g,Dd=/%20/g;function $s(t){return t==null?"":encodeURI(""+t).replace(jd,"|").replace(Cd,"[").replace(Ad,"]")}function Ld(t){return $s(t).replace(Kl,"{").replace(zl,"}").replace(Wl,"^")}function ss(t){return $s(t).replace(Hl,"%2B").replace(Dd,"+").replace(ql,"%23").replace(kd,"%26").replace(Id,"`").replace(Kl,"{").replace(zl,"}").replace(Wl,"^")}function Nd(t){return ss(t).replace(xd,"%3D")}function Fd(t){return $s(t).replace(ql,"%23").replace(Rd,"%3F")}function Ud(t){return Fd(t).replace(Od,"%2F")}function dn(t){if(t==null)return null;try{return decodeURIComponent(""+t)}catch{}return""+t}const Md=/\/$/,$d=t=>t.replace(Md,"");function Di(t,e,r="/"){let n,i={},s="",o="";const l=e.indexOf("#");let a=e.indexOf("?");return a=l>=0&&a>l?-1:a,a>=0&&(n=e.slice(0,a),s=e.slice(a,l>0?l:e.length),i=t(s.slice(1))),l>=0&&(n=n||e.slice(0,l),o=e.slice(l,e.length)),n=Hd(n??e,r),{fullPath:n+s+o,path:n,query:i,hash:dn(o)}}function Bd(t,e){const r=e.query?t(e.query):"";return e.path+(r&&"?")+r+(e.hash||"")}function $o(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function Vd(t,e,r){const n=e.matched.length-1,i=r.matched.length-1;return n>-1&&n===i&&Lr(e.matched[n],r.matched[i])&&Gl(e.params,r.params)&&t(e.query)===t(r.query)&&e.hash===r.hash}function Lr(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function Gl(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const r in t)if(!qd(t[r],e[r]))return!1;return!0}function qd(t,e){return gt(t)?Bo(t,e):gt(e)?Bo(e,t):t===e}function Bo(t,e){return gt(e)?t.length===e.length&&t.every((r,n)=>r===e[n]):t.length===1&&t[0]===e}function Hd(t,e){if(t.startsWith("/"))return t;if(!t)return e;const r=e.split("/"),n=t.split("/"),i=n[n.length-1];(i===".."||i===".")&&n.push("");let s=r.length-1,o,l;for(o=0;o<n.length;o++)if(l=n[o],l!==".")if(l==="..")s>1&&s--;else break;return r.slice(0,s).join("/")+"/"+n.slice(o).join("/")}const Nt={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};let os=(function(t){return t.pop="pop",t.push="push",t})({}),Li=(function(t){return t.back="back",t.forward="forward",t.unknown="",t})({});function Wd(t){if(!t)if(Pr){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),$d(t)}const Kd=/^[^#]+#/;function zd(t,e){return t.replace(Kd,"#")+e}function Gd(t,e){const r=document.documentElement.getBoundingClientRect(),n=t.getBoundingClientRect();return{behavior:e.behavior,left:n.left-r.left-(e.left||0),top:n.top-r.top-(e.top||0)}}const gi=()=>({left:window.scrollX,top:window.scrollY});function Jd(t){let e;if("el"in t){const r=t.el,n=typeof r=="string"&&r.startsWith("#"),i=typeof r=="string"?n?document.getElementById(r.slice(1)):document.querySelector(r):r;if(!i)return;e=Gd(i,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function Vo(t,e){return(history.state?history.state.position-e:-1)+t}const as=new Map;function Xd(t,e){as.set(t,e)}function Yd(t){const e=as.get(t);return as.delete(t),e}function Qd(t){return typeof t=="string"||t&&typeof t=="object"}function Jl(t){return typeof t=="string"||typeof t=="symbol"}let Oe=(function(t){return t[t.MATCHER_NOT_FOUND=1]="MATCHER_NOT_FOUND",t[t.NAVIGATION_GUARD_REDIRECT=2]="NAVIGATION_GUARD_REDIRECT",t[t.NAVIGATION_ABORTED=4]="NAVIGATION_ABORTED",t[t.NAVIGATION_CANCELLED=8]="NAVIGATION_CANCELLED",t[t.NAVIGATION_DUPLICATED=16]="NAVIGATION_DUPLICATED",t})({});const Xl=Symbol("");Oe.MATCHER_NOT_FOUND+"",Oe.NAVIGATION_GUARD_REDIRECT+"",Oe.NAVIGATION_ABORTED+"",Oe.NAVIGATION_CANCELLED+"",Oe.NAVIGATION_DUPLICATED+"";function Nr(t,e){return ye(new Error,{type:t,[Xl]:!0},e)}function Et(t,e){return t instanceof Error&&Xl in t&&(e==null||!!(t.type&e))}const Zd=["params","query","hash"];function ef(t){if(typeof t=="string")return t;if(t.path!=null)return t.path;const e={};for(const r of Zd)r in t&&(e[r]=t[r]);return JSON.stringify(e,null,2)}function tf(t){const e={};if(t===""||t==="?")return e;const r=(t[0]==="?"?t.slice(1):t).split("&");for(let n=0;n<r.length;++n){const i=r[n].replace(Hl," "),s=i.indexOf("="),o=dn(s<0?i:i.slice(0,s)),l=s<0?null:dn(i.slice(s+1));if(o in e){let a=e[o];gt(a)||(a=e[o]=[a]),a.push(l)}else e[o]=l}return e}function qo(t){let e="";for(let r in t){const n=t[r];if(r=Nd(r),n==null){n!==void 0&&(e+=(e.length?"&":"")+r);continue}(gt(n)?n.map(i=>i&&ss(i)):[n&&ss(n)]).forEach(i=>{i!==void 0&&(e+=(e.length?"&":"")+r,i!=null&&(e+="="+i))})}return e}function rf(t){const e={};for(const r in t){const n=t[r];n!==void 0&&(e[r]=gt(n)?n.map(i=>i==null?null:""+i):n==null?n:""+n)}return e}const nf=Symbol(""),Ho=Symbol(""),vi=Symbol(""),Bs=Symbol(""),ls=Symbol("");function Hr(){let t=[];function e(n){return t.push(n),()=>{const i=t.indexOf(n);i>-1&&t.splice(i,1)}}function r(){t=[]}return{add:e,list:()=>t.slice(),reset:r}}function Bt(t,e,r,n,i,s=o=>o()){const o=n&&(n.enterCallbacks[i]=n.enterCallbacks[i]||[]);return()=>new Promise((l,a)=>{const u=y=>{y===!1?a(Nr(Oe.NAVIGATION_ABORTED,{from:r,to:e})):y instanceof Error?a(y):Qd(y)?a(Nr(Oe.NAVIGATION_GUARD_REDIRECT,{from:e,to:y})):(o&&n.enterCallbacks[i]===o&&typeof y=="function"&&o.push(y),l())},c=s(()=>t.call(n&&n.instances[i],e,r,u));let h=Promise.resolve(c);t.length<3&&(h=h.then(u)),h.catch(y=>a(y))})}function Ni(t,e,r,n,i=s=>s()){const s=[];for(const o of t)for(const l in o.components){let a=o.components[l];if(!(e!=="beforeRouteEnter"&&!o.instances[l]))if(Vl(a)){const u=(a.__vccOpts||a)[e];u&&s.push(Bt(u,r,n,o,l,i))}else{let u=a();s.push(()=>u.then(c=>{if(!c)throw new Error(`Couldn't resolve component "${l}" at "${o.path}"`);const h=Ed(c)?c.default:c;o.mods[l]=c,o.components[l]=h;const y=(h.__vccOpts||h)[e];return y&&Bt(y,r,n,o,l,i)()}))}}return s}function sf(t,e){const r=[],n=[],i=[],s=Math.max(e.matched.length,t.matched.length);for(let o=0;o<s;o++){const l=e.matched[o];l&&(t.matched.find(u=>Lr(u,l))?n.push(l):r.push(l));const a=t.matched[o];a&&(e.matched.find(u=>Lr(u,a))||i.push(a))}return[r,n,i]}let of=()=>location.protocol+"//"+location.host;function Yl(t,e){const{pathname:r,search:n,hash:i}=e,s=t.indexOf("#");if(s>-1){let o=i.includes(t.slice(s))?t.slice(s).length:1,l=i.slice(o);return l[0]!=="/"&&(l="/"+l),$o(l,"")}return $o(r,t)+n+i}function af(t,e,r,n){let i=[],s=[],o=null;const l=({state:y})=>{const g=Yl(t,location),d=r.value,f=e.value;let p=0;if(y){if(r.value=g,e.value=y,o&&o===d){o=null;return}p=f?y.position-f.position:0}else n(g);i.forEach(v=>{v(r.value,d,{delta:p,type:os.pop,direction:p?p>0?Li.forward:Li.back:Li.unknown})})};function a(){o=r.value}function u(y){i.push(y);const g=()=>{const d=i.indexOf(y);d>-1&&i.splice(d,1)};return s.push(g),g}function c(){if(document.visibilityState==="hidden"){const{history:y}=window;if(!y.state)return;y.replaceState(ye({},y.state,{scroll:gi()}),"")}}function h(){for(const y of s)y();s=[],window.removeEventListener("popstate",l),window.removeEventListener("pagehide",c),document.removeEventListener("visibilitychange",c)}return window.addEventListener("popstate",l),window.addEventListener("pagehide",c),document.addEventListener("visibilitychange",c),{pauseListeners:a,listen:u,destroy:h}}function Wo(t,e,r,n=!1,i=!1){return{back:t,current:e,forward:r,replaced:n,position:window.history.length,scroll:i?gi():null}}function lf(t){const{history:e,location:r}=window,n={value:Yl(t,r)},i={value:e.state};i.value||s(n.value,{back:null,current:n.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function s(a,u,c){const h=t.indexOf("#"),y=h>-1?(r.host&&document.querySelector("base")?t:t.slice(h))+a:of()+t+a;try{e[c?"replaceState":"pushState"](u,"",y),i.value=u}catch(g){console.error(g),r[c?"replace":"assign"](y)}}function o(a,u){s(a,ye({},e.state,Wo(i.value.back,a,i.value.forward,!0),u,{position:i.value.position}),!0),n.value=a}function l(a,u){const c=ye({},i.value,e.state,{forward:a,scroll:gi()});s(c.current,c,!0),s(a,ye({},Wo(n.value,a,null),{position:c.position+1},u),!1),n.value=a}return{location:n,state:i,push:l,replace:o}}function uf(t){t=Wd(t);const e=lf(t),r=af(t,e.state,e.location,e.replace);function n(s,o=!0){o||r.pauseListeners(),history.go(s)}const i=ye({location:"",base:t,go:n,createHref:zd.bind(null,t)},e,r);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>e.state.value}),i}let or=(function(t){return t[t.Static=0]="Static",t[t.Param=1]="Param",t[t.Group=2]="Group",t})({});var Ae=(function(t){return t[t.Static=0]="Static",t[t.Param=1]="Param",t[t.ParamRegExp=2]="ParamRegExp",t[t.ParamRegExpEnd=3]="ParamRegExpEnd",t[t.EscapeNext=4]="EscapeNext",t})(Ae||{});const cf={type:or.Static,value:""},hf=/[a-zA-Z0-9_]/;function df(t){if(!t)return[[]];if(t==="/")return[[cf]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(g){throw new Error(`ERR (${r})/"${u}": ${g}`)}let r=Ae.Static,n=r;const i=[];let s;function o(){s&&i.push(s),s=[]}let l=0,a,u="",c="";function h(){u&&(r===Ae.Static?s.push({type:or.Static,value:u}):r===Ae.Param||r===Ae.ParamRegExp||r===Ae.ParamRegExpEnd?(s.length>1&&(a==="*"||a==="+")&&e(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),s.push({type:or.Param,value:u,regexp:c,repeatable:a==="*"||a==="+",optional:a==="*"||a==="?"})):e("Invalid state to consume buffer"),u="")}function y(){u+=a}for(;l<t.length;){if(a=t[l++],a==="\\"&&r!==Ae.ParamRegExp){n=r,r=Ae.EscapeNext;continue}switch(r){case Ae.Static:a==="/"?(u&&h(),o()):a===":"?(h(),r=Ae.Param):y();break;case Ae.EscapeNext:y(),r=n;break;case Ae.Param:a==="("?r=Ae.ParamRegExp:hf.test(a)?y():(h(),r=Ae.Static,a!=="*"&&a!=="?"&&a!=="+"&&l--);break;case Ae.ParamRegExp:a===")"?c[c.length-1]=="\\"?c=c.slice(0,-1)+a:r=Ae.ParamRegExpEnd:c+=a;break;case Ae.ParamRegExpEnd:h(),r=Ae.Static,a!=="*"&&a!=="?"&&a!=="+"&&l--,c="";break;default:e("Unknown state");break}}return r===Ae.ParamRegExp&&e(`Unfinished custom RegExp for param "${u}"`),h(),o(),i}const Ko="[^/]+?",ff={sensitive:!1,strict:!1,start:!0,end:!0};var Ve=(function(t){return t[t._multiplier=10]="_multiplier",t[t.Root=90]="Root",t[t.Segment=40]="Segment",t[t.SubSegment=30]="SubSegment",t[t.Static=40]="Static",t[t.Dynamic=20]="Dynamic",t[t.BonusCustomRegExp=10]="BonusCustomRegExp",t[t.BonusWildcard=-50]="BonusWildcard",t[t.BonusRepeatable=-20]="BonusRepeatable",t[t.BonusOptional=-8]="BonusOptional",t[t.BonusStrict=.7000000000000001]="BonusStrict",t[t.BonusCaseSensitive=.25]="BonusCaseSensitive",t})(Ve||{});const pf=/[.+*?^${}()[\]/\\]/g;function gf(t,e){const r=ye({},ff,e),n=[];let i=r.start?"^":"";const s=[];for(const u of t){const c=u.length?[]:[Ve.Root];r.strict&&!u.length&&(i+="/");for(let h=0;h<u.length;h++){const y=u[h];let g=Ve.Segment+(r.sensitive?Ve.BonusCaseSensitive:0);if(y.type===or.Static)h||(i+="/"),i+=y.value.replace(pf,"\\$&"),g+=Ve.Static;else if(y.type===or.Param){const{value:d,repeatable:f,optional:p,regexp:v}=y;s.push({name:d,repeatable:f,optional:p});const m=v||Ko;if(m!==Ko){g+=Ve.BonusCustomRegExp;try{`${m}`}catch(_){throw new Error(`Invalid custom RegExp for param "${d}" (${m}): `+_.message)}}let b=f?`((?:${m})(?:/(?:${m}))*)`:`(${m})`;h||(b=p&&u.length<2?`(?:/${b})`:"/"+b),p&&(b+="?"),i+=b,g+=Ve.Dynamic,p&&(g+=Ve.BonusOptional),f&&(g+=Ve.BonusRepeatable),m===".*"&&(g+=Ve.BonusWildcard)}c.push(g)}n.push(c)}if(r.strict&&r.end){const u=n.length-1;n[u][n[u].length-1]+=Ve.BonusStrict}r.strict||(i+="/?"),r.end?i+="$":r.strict&&!i.endsWith("/")&&(i+="(?:/|$)");const o=new RegExp(i,r.sensitive?"":"i");function l(u){const c=u.match(o),h={};if(!c)return null;for(let y=1;y<c.length;y++){const g=c[y]||"",d=s[y-1];h[d.name]=g&&d.repeatable?g.split("/"):g}return h}function a(u){let c="",h=!1;for(const y of t){(!h||!c.endsWith("/"))&&(c+="/"),h=!1;for(const g of y)if(g.type===or.Static)c+=g.value;else if(g.type===or.Param){const{value:d,repeatable:f,optional:p}=g,v=d in u?u[d]:"";if(gt(v)&&!f)throw new Error(`Provided param "${d}" is an array but it is not repeatable (* or + modifiers)`);const m=gt(v)?v.join("/"):v;if(!m)if(p)y.length<2&&(c.endsWith("/")?c=c.slice(0,-1):h=!0);else throw new Error(`Missing required param "${d}"`);c+=m}}return c||"/"}return{re:o,score:n,keys:s,parse:l,stringify:a}}function vf(t,e){let r=0;for(;r<t.length&&r<e.length;){const n=e[r]-t[r];if(n)return n;r++}return t.length<e.length?t.length===1&&t[0]===Ve.Static+Ve.Segment?-1:1:t.length>e.length?e.length===1&&e[0]===Ve.Static+Ve.Segment?1:-1:0}function Ql(t,e){let r=0;const n=t.score,i=e.score;for(;r<n.length&&r<i.length;){const s=vf(n[r],i[r]);if(s)return s;r++}if(Math.abs(i.length-n.length)===1){if(zo(n))return 1;if(zo(i))return-1}return i.length-n.length}function zo(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const mf={strict:!1,end:!0,sensitive:!1};function yf(t,e,r){const n=gf(df(t.path),r),i=ye(n,{record:t,parent:e,children:[],alias:[]});return e&&!i.record.aliasOf==!e.record.aliasOf&&e.children.push(i),i}function _f(t,e){const r=[],n=new Map;e=Mo(mf,e);function i(h){return n.get(h)}function s(h,y,g){const d=!g,f=Jo(h);f.aliasOf=g&&g.record;const p=Mo(e,h),v=[f];if("alias"in h){const _=typeof h.alias=="string"?[h.alias]:h.alias;for(const w of _)v.push(Jo(ye({},f,{components:g?g.record.components:f.components,path:w,aliasOf:g?g.record:f})))}let m,b;for(const _ of v){const{path:w}=_;if(y&&w[0]!=="/"){const P=y.record.path,O=P[P.length-1]==="/"?"":"/";_.path=y.record.path+(w&&O+w)}if(m=yf(_,y,p),g?g.alias.push(m):(b=b||m,b!==m&&b.alias.push(m),d&&h.name&&!Xo(m)&&o(h.name)),Zl(m)&&a(m),f.children){const P=f.children;for(let O=0;O<P.length;O++)s(P[O],m,g&&g.children[O])}g=g||m}return b?()=>{o(b)}:tn}function o(h){if(Jl(h)){const y=n.get(h);y&&(n.delete(h),r.splice(r.indexOf(y),1),y.children.forEach(o),y.alias.forEach(o))}else{const y=r.indexOf(h);y>-1&&(r.splice(y,1),h.record.name&&n.delete(h.record.name),h.children.forEach(o),h.alias.forEach(o))}}function l(){return r}function a(h){const y=Sf(h,r);r.splice(y,0,h),h.record.name&&!Xo(h)&&n.set(h.record.name,h)}function u(h,y){let g,d={},f,p;if("name"in h&&h.name){if(g=n.get(h.name),!g)throw Nr(Oe.MATCHER_NOT_FOUND,{location:h});p=g.record.name,d=ye(Go(y.params,g.keys.filter(b=>!b.optional).concat(g.parent?g.parent.keys.filter(b=>b.optional):[]).map(b=>b.name)),h.params&&Go(h.params,g.keys.map(b=>b.name))),f=g.stringify(d)}else if(h.path!=null)f=h.path,g=r.find(b=>b.re.test(f)),g&&(d=g.parse(f),p=g.record.name);else{if(g=y.name?n.get(y.name):r.find(b=>b.re.test(y.path)),!g)throw Nr(Oe.MATCHER_NOT_FOUND,{location:h,currentLocation:y});p=g.record.name,d=ye({},y.params,h.params),f=g.stringify(d)}const v=[];let m=g;for(;m;)v.unshift(m.record),m=m.parent;return{name:p,path:f,params:d,matched:v,meta:wf(v)}}t.forEach(h=>s(h));function c(){r.length=0,n.clear()}return{addRoute:s,resolve:u,removeRoute:o,clearRoutes:c,getRoutes:l,getRecordMatcher:i}}function Go(t,e){const r={};for(const n of e)n in t&&(r[n]=t[n]);return r}function Jo(t){const e={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:bf(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function bf(t){const e={},r=t.props||!1;if("component"in t)e.default=r;else for(const n in t.components)e[n]=typeof r=="object"?r[n]:r;return e}function Xo(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function wf(t){return t.reduce((e,r)=>ye(e,r.meta),{})}function Sf(t,e){let r=0,n=e.length;for(;r!==n;){const s=r+n>>1;Ql(t,e[s])<0?n=s:r=s+1}const i=Pf(t);return i&&(n=e.lastIndexOf(i,n-1)),n}function Pf(t){let e=t;for(;e=e.parent;)if(Zl(e)&&Ql(t,e)===0)return e}function Zl({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function Yo(t){const e=dt(vi),r=dt(Bs),n=je(()=>{const a=cr(t.to);return e.resolve(a)}),i=je(()=>{const{matched:a}=n.value,{length:u}=a,c=a[u-1],h=r.matched;if(!c||!h.length)return-1;const y=h.findIndex(Lr.bind(null,c));if(y>-1)return y;const g=Qo(a[u-2]);return u>1&&Qo(c)===g&&h[h.length-1].path!==g?h.findIndex(Lr.bind(null,a[u-2])):y}),s=je(()=>i.value>-1&&xf(r.params,n.value.params)),o=je(()=>i.value>-1&&i.value===r.matched.length-1&&Gl(r.params,n.value.params));function l(a={}){if(Of(a)){const u=e[cr(t.replace)?"replace":"push"](cr(t.to)).catch(tn);return t.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>u),u}return Promise.resolve()}return{route:n,href:je(()=>n.value.href),isActive:s,isExactActive:o,navigate:l}}function Tf(t){return t.length===1?t[0]:t}const Ef=pl({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:Yo,setup(t,{slots:e}){const r=Ht(Yo(t)),{options:n}=dt(vi),i=je(()=>({[Zo(t.activeClass,n.linkActiveClass,"router-link-active")]:r.isActive,[Zo(t.exactActiveClass,n.linkExactActiveClass,"router-link-exact-active")]:r.isExactActive}));return()=>{const s=e.default&&Tf(e.default(r));return t.custom?s:Ms("a",{"aria-current":r.isExactActive?t.ariaCurrentValue:null,href:r.href,onClick:r.navigate,class:i.value},s)}}}),kf=Ef;function Of(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function xf(t,e){for(const r in e){const n=e[r],i=t[r];if(typeof n=="string"){if(n!==i)return!1}else if(!gt(i)||i.length!==n.length||n.some((s,o)=>s!==i[o]))return!1}return!0}function Qo(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const Zo=(t,e,r)=>t??e??r,Rf=pl({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:r}){const n=dt(ls),i=je(()=>t.route||n.value),s=dt(Ho,0),o=je(()=>{let u=cr(s);const{matched:c}=i.value;let h;for(;(h=c[u])&&!h.components;)u++;return u}),l=je(()=>i.value.matched[o.value]);Nn(Ho,je(()=>o.value+1)),Nn(nf,l),Nn(ls,i);const a=Re();return Zr(()=>[a.value,l.value,t.name],([u,c,h],[y,g,d])=>{c&&(c.instances[h]=u,g&&g!==c&&u&&u===y&&(c.leaveGuards.size||(c.leaveGuards=g.leaveGuards),c.updateGuards.size||(c.updateGuards=g.updateGuards))),u&&c&&(!g||!Lr(c,g)||!y)&&(c.enterCallbacks[h]||[]).forEach(f=>f(u))},{flush:"post"}),()=>{const u=i.value,c=t.name,h=l.value,y=h&&h.components[c];if(!y)return ea(r.default,{Component:y,route:u});const g=h.props[c],d=g?g===!0?u.params:typeof g=="function"?g(u):g:null,p=Ms(y,ye({},d,e,{onVnodeUnmounted:v=>{v.component.isUnmounted&&(h.instances[c]=null)},ref:a}));return ea(r.default,{Component:p,route:u})||p}}});function ea(t,e){if(!t)return null;const r=t(e);return r.length===1?r[0]:r}const eu=Rf;function Cf(t){const e=_f(t.routes,t),r=t.parseQuery||tf,n=t.stringifyQuery||qo,i=t.history,s=Hr(),o=Hr(),l=Hr(),a=Rc(Nt);let u=Nt;Pr&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const c=ji.bind(null,I=>""+I),h=ji.bind(null,Ud),y=ji.bind(null,dn);function g(I,G){let K,te;return Jl(I)?(K=e.getRecordMatcher(I),te=G):te=I,e.addRoute(te,K)}function d(I){const G=e.getRecordMatcher(I);G&&e.removeRoute(G)}function f(){return e.getRoutes().map(I=>I.record)}function p(I){return!!e.getRecordMatcher(I)}function v(I,G){if(G=ye({},G||a.value),typeof I=="string"){const C=Di(r,I,G.path),M=e.resolve({path:C.path},G),F=i.createHref(C.fullPath);return ye(C,M,{params:y(M.params),hash:dn(C.hash),redirectedFrom:void 0,href:F})}let K;if(I.path!=null)K=ye({},I,{path:Di(r,I.path,G.path).path});else{const C=ye({},I.params);for(const M in C)C[M]==null&&delete C[M];K=ye({},I,{params:h(C)}),G.params=h(G.params)}const te=e.resolve(K,G),ce=I.hash||"";te.params=c(y(te.params));const T=Bd(n,ye({},I,{hash:Ld(ce),path:te.path})),E=i.createHref(T);return ye({fullPath:T,hash:ce,query:n===qo?rf(I.query):I.query||{}},te,{redirectedFrom:void 0,href:E})}function m(I){return typeof I=="string"?Di(r,I,a.value.path):ye({},I)}function b(I,G){if(u!==I)return Nr(Oe.NAVIGATION_CANCELLED,{from:G,to:I})}function _(I){return O(I)}function w(I){return _(ye(m(I),{replace:!0}))}function P(I,G){const K=I.matched[I.matched.length-1];if(K&&K.redirect){const{redirect:te}=K;let ce=typeof te=="function"?te(I,G):te;return typeof ce=="string"&&(ce=ce.includes("?")||ce.includes("#")?ce=m(ce):{path:ce},ce.params={}),ye({query:I.query,hash:I.hash,params:ce.path!=null?{}:I.params},ce)}}function O(I,G){const K=u=v(I),te=a.value,ce=I.state,T=I.force,E=I.replace===!0,C=P(K,te);if(C)return O(ye(m(C),{state:typeof C=="object"?ye({},ce,C.state):ce,force:T,replace:E}),G||K);const M=K;M.redirectedFrom=G;let F;return!T&&Vd(n,te,K)&&(F=Nr(Oe.NAVIGATION_DUPLICATED,{to:M,from:te}),Z(te,te,!0,!1)),(F?Promise.resolve(F):L(M,te)).catch(D=>Et(D)?Et(D,Oe.NAVIGATION_GUARD_REDIRECT)?D:Y(D):R(D,M,te)).then(D=>{if(D){if(Et(D,Oe.NAVIGATION_GUARD_REDIRECT))return O(ye({replace:E},m(D.to),{state:typeof D.to=="object"?ye({},ce,D.to.state):ce,force:T}),G||M)}else D=x(M,te,!0,E,ce);return N(M,te,D),D})}function H(I,G){const K=b(I,G);return K?Promise.reject(K):Promise.resolve()}function U(I){const G=pe.values().next().value;return G&&typeof G.runWithContext=="function"?G.runWithContext(I):I()}function L(I,G){let K;const[te,ce,T]=sf(I,G);K=Ni(te.reverse(),"beforeRouteLeave",I,G);for(const C of te)C.leaveGuards.forEach(M=>{K.push(Bt(M,I,G))});const E=H.bind(null,I,G);return K.push(E),fe(K).then(()=>{K=[];for(const C of s.list())K.push(Bt(C,I,G));return K.push(E),fe(K)}).then(()=>{K=Ni(ce,"beforeRouteUpdate",I,G);for(const C of ce)C.updateGuards.forEach(M=>{K.push(Bt(M,I,G))});return K.push(E),fe(K)}).then(()=>{K=[];for(const C of T)if(C.beforeEnter)if(gt(C.beforeEnter))for(const M of C.beforeEnter)K.push(Bt(M,I,G));else K.push(Bt(C.beforeEnter,I,G));return K.push(E),fe(K)}).then(()=>(I.matched.forEach(C=>C.enterCallbacks={}),K=Ni(T,"beforeRouteEnter",I,G,U),K.push(E),fe(K))).then(()=>{K=[];for(const C of o.list())K.push(Bt(C,I,G));return K.push(E),fe(K)}).catch(C=>Et(C,Oe.NAVIGATION_CANCELLED)?C:Promise.reject(C))}function N(I,G,K){l.list().forEach(te=>U(()=>te(I,G,K)))}function x(I,G,K,te,ce){const T=b(I,G);if(T)return T;const E=G===Nt,C=Pr?history.state:{};K&&(te||E?i.replace(I.fullPath,ye({scroll:E&&C&&C.scroll},ce)):i.push(I.fullPath,ce)),a.value=I,Z(I,G,K,E),Y()}let $;function Q(){$||($=i.listen((I,G,K)=>{if(!ue.listening)return;const te=v(I),ce=P(te,ue.currentRoute.value);if(ce){O(ye(ce,{replace:!0,force:!0}),te).catch(tn);return}u=te;const T=a.value;Pr&&Xd(Vo(T.fullPath,K.delta),gi()),L(te,T).catch(E=>Et(E,Oe.NAVIGATION_ABORTED|Oe.NAVIGATION_CANCELLED)?E:Et(E,Oe.NAVIGATION_GUARD_REDIRECT)?(O(ye(m(E.to),{force:!0}),te).then(C=>{Et(C,Oe.NAVIGATION_ABORTED|Oe.NAVIGATION_DUPLICATED)&&!K.delta&&K.type===os.pop&&i.go(-1,!1)}).catch(tn),Promise.reject()):(K.delta&&i.go(-K.delta,!1),R(E,te,T))).then(E=>{E=E||x(te,T,!1),E&&(K.delta&&!Et(E,Oe.NAVIGATION_CANCELLED)?i.go(-K.delta,!1):K.type===os.pop&&Et(E,Oe.NAVIGATION_ABORTED|Oe.NAVIGATION_DUPLICATED)&&i.go(-1,!1)),N(te,T,E)}).catch(tn)}))}let A=Hr(),S=Hr(),k;function R(I,G,K){Y(I);const te=S.list();return te.length?te.forEach(ce=>ce(I,G,K)):console.error(I),Promise.reject(I)}function q(){return k&&a.value!==Nt?Promise.resolve():new Promise((I,G)=>{A.add([I,G])})}function Y(I){return k||(k=!I,Q(),A.list().forEach(([G,K])=>I?K(I):G()),A.reset()),I}function Z(I,G,K,te){const{scrollBehavior:ce}=t;if(!Pr||!ce)return Promise.resolve();const T=!K&&Yd(Vo(I.fullPath,0))||(te||!K)&&history.state&&history.state.scroll||null;return nl().then(()=>ce(I,G,T)).then(E=>E&&Jd(E)).catch(E=>R(E,I,G))}const ee=I=>i.go(I);let X;const pe=new Set,ue={currentRoute:a,listening:!0,addRoute:g,removeRoute:d,clearRoutes:e.clearRoutes,hasRoute:p,getRoutes:f,resolve:v,options:t,push:_,replace:w,go:ee,back:()=>ee(-1),forward:()=>ee(1),beforeEach:s.add,beforeResolve:o.add,afterEach:l.add,onError:S.add,isReady:q,install(I){I.component("RouterLink",kf),I.component("RouterView",eu),I.config.globalProperties.$router=ue,Object.defineProperty(I.config.globalProperties,"$route",{enumerable:!0,get:()=>cr(a)}),Pr&&!X&&a.value===Nt&&(X=!0,_(i.location).catch(te=>{}));const G={};for(const te in Nt)Object.defineProperty(G,te,{get:()=>a.value[te],enumerable:!0});I.provide(vi,ue),I.provide(Bs,Za(G)),I.provide(ls,a);const K=I.unmount;pe.add(I),I.unmount=function(){pe.delete(I),pe.size<1&&(u=Nt,$&&$(),$=null,a.value=Nt,X=!1,k=!1),K()}}};function fe(I){return I.reduce((G,K)=>G.then(()=>U(K)),Promise.resolve())}return ue}function Vs(){return dt(vi)}function tu(t){return dt(Bs)}const Ur=(t,e)=>{const r=t.__vccOpts||t;for(const[n,i]of e)r[n]=i;return r},Tn=100,Af={__name:"SnowEffect",setup(t){const e=Re(null);let r=null,n=null,i=[];const s=(u,c)=>{i=[];for(let h=0;h<Tn;h++)i.push({x:Math.random()*u,y:Math.random()*c,r:Math.random()*3+1,d:Math.random()*Tn,s:Math.random()*1+.5})},o=()=>{if(!r||!e.value)return;const u=e.value.width,c=e.value.height;r.clearRect(0,0,u,c),r.fillStyle="rgba(255, 255, 255, 0.8)",r.beginPath();for(let h=0;h<Tn;h++){const y=i[h];r.moveTo(y.x,y.y),r.arc(y.x,y.y,y.r,0,Math.PI*2,!0)}r.fill(),l(u,c),n=requestAnimationFrame(o)},l=(u,c)=>{for(let h=0;h<Tn;h++){const y=i[h];y.y+=y.s,y.x+=Math.sin(y.d)*.5,(y.x>u+5||y.x<-5||y.y>c)&&(h%3>0?i[h]={x:Math.random()*u,y:-10,r:y.r,d:y.d,s:y.s}:Math.sin(y.d)>0?i[h]={x:-5,y:Math.random()*c,r:y.r,d:y.d,s:y.s}:i[h]={x:u+5,y:Math.random()*c,r:y.r,d:y.d,s:y.s})}},a=()=>{e.value&&(e.value.width=window.innerWidth,e.value.height=window.innerHeight)};return fr(()=>{e.value&&(r=e.value.getContext("2d"),e.value.width=window.innerWidth,e.value.height=window.innerHeight,s(window.innerWidth,window.innerHeight),o(),window.addEventListener("resize",a))}),hi(()=>{cancelAnimationFrame(n),window.removeEventListener("resize",a)}),(u,c)=>(de(),ge("canvas",{ref_key:"canvas",ref:e,class:"snow-canvas"},null,512))}},If=Ur(Af,[["__scopeId","data-v-a01b1e4f"]]),jf={__name:"App",setup(t){const e=Re(!1),r=()=>{e.value=!e.value};return(n,i)=>(de(),ge(He,null,[j("button",{class:"snow-button",onClick:r},Ne(e.value?"Stop Snow ":"Let it Snow "),1),e.value?(de(),zn(If,{key:0})):ct("",!0),Ke(cr(eu),null,{default:Yi(({Component:s})=>[Ke(Yh,{name:"fade",mode:"out-in"},{default:Yi(()=>[(de(),zn(eh(s)))]),_:2},1024)]),_:1})],64))}},Df=Ur(jf,[["__scopeId","data-v-4930a9ed"]]);var us=function(t,e){return us=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},us(t,e)};function ru(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");us(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var Yn=function(){return Yn=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Yn.apply(this,arguments)};function Mr(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function nu(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var l=t.length-1;l>=0;l--)(o=t[l])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s}function iu(t,e){return function(r,n){e(r,n,t)}}function su(t,e,r,n,i,s){function o(v){if(v!==void 0&&typeof v!="function")throw new TypeError("Function expected");return v}for(var l=n.kind,a=l==="getter"?"get":l==="setter"?"set":"value",u=!e&&t?n.static?t:t.prototype:null,c=e||(u?Object.getOwnPropertyDescriptor(u,n.name):{}),h,y=!1,g=r.length-1;g>=0;g--){var d={};for(var f in n)d[f]=f==="access"?{}:n[f];for(var f in n.access)d.access[f]=n.access[f];d.addInitializer=function(v){if(y)throw new TypeError("Cannot add initializers after decoration has completed");s.push(o(v||null))};var p=(0,r[g])(l==="accessor"?{get:c.get,set:c.set}:c[a],d);if(l==="accessor"){if(p===void 0)continue;if(p===null||typeof p!="object")throw new TypeError("Object expected");(h=o(p.get))&&(c.get=h),(h=o(p.set))&&(c.set=h),(h=o(p.init))&&i.unshift(h)}else(h=o(p))&&(l==="field"?i.unshift(h):c[a]=h)}u&&Object.defineProperty(u,n.name,c),y=!0}function ou(t,e,r){for(var n=arguments.length>2,i=0;i<e.length;i++)r=n?e[i].call(t,r):e[i].call(t);return n?r:void 0}function au(t){return typeof t=="symbol"?t:"".concat(t)}function lu(t,e,r){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(t,"name",{configurable:!0,value:r?"".concat(r," ",e):e})}function uu(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function re(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function l(c){try{u(n.next(c))}catch(h){o(h)}}function a(c){try{u(n.throw(c))}catch(h){o(h)}}function u(c){c.done?s(c.value):i(c.value).then(l,a)}u((n=n.apply(t,e||[])).next())})}function cu(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,o=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return o.next=l(0),o.throw=l(1),o.return=l(2),typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(u){return function(c){return a([u,c])}}function a(u){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(r=0)),r;)try{if(n=1,i&&(s=u[0]&2?i.return:u[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,u[1])).done)return s;switch(i=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,i=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){r.label=u[1];break}if(u[0]===6&&r.label<s[1]){r.label=s[1],s=u;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(u);break}s[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(c){u=[6,c],i=0}finally{n=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}var mi=Object.create?(function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]});function hu(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&mi(e,t,r)}function Qn(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function qs(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(l){o={error:l}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return s}function du(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(qs(arguments[e]));return t}function fu(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),i=0,e=0;e<r;e++)for(var s=arguments[e],o=0,l=s.length;o<l;o++,i++)n[i]=s[o];return n}function pu(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,s;n<i;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return t.concat(s||Array.prototype.slice.call(e))}function Fr(t){return this instanceof Fr?(this.v=t,this):new Fr(t)}function gu(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),l("next"),l("throw"),l("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(g){return function(d){return Promise.resolve(d).then(g,h)}}function l(g,d){n[g]&&(i[g]=function(f){return new Promise(function(p,v){s.push([g,f,p,v])>1||a(g,f)})},d&&(i[g]=d(i[g])))}function a(g,d){try{u(n[g](d))}catch(f){y(s[0][3],f)}}function u(g){g.value instanceof Fr?Promise.resolve(g.value.v).then(c,h):y(s[0][2],g)}function c(g){a("next",g)}function h(g){a("throw",g)}function y(g,d){g(d),s.shift(),s.length&&a(s[0][0],s[0][1])}}function vu(t){var e,r;return e={},n("next"),n("throw",function(i){throw i}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(i,s){e[i]=t[i]?function(o){return(r=!r)?{value:Fr(t[i](o)),done:!1}:s?s(o):o}:s}}function mu(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof Qn=="function"?Qn(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(s){r[s]=t[s]&&function(o){return new Promise(function(l,a){o=t[s](o),i(l,a,o.done,o.value)})}}function i(s,o,l,a){Promise.resolve(a).then(function(u){s({value:u,done:l})},o)}}function yu(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}var Lf=Object.create?(function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}):function(t,e){t.default=e},cs=function(t){return cs=Object.getOwnPropertyNames||function(e){var r=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[r.length]=n);return r},cs(t)};function _u(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r=cs(t),n=0;n<r.length;n++)r[n]!=="default"&&mi(e,t,r[n]);return Lf(e,t),e}function bu(t){return t&&t.__esModule?t:{default:t}}function wu(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)}function Su(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r}function Pu(t,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof t=="function"?e===t:t.has(e)}function Tu(t,e,r){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var n,i;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=e[Symbol.asyncDispose]}if(n===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=e[Symbol.dispose],r&&(i=n)}if(typeof n!="function")throw new TypeError("Object not disposable.");i&&(n=function(){try{i.call(this)}catch(s){return Promise.reject(s)}}),t.stack.push({value:e,dispose:n,async:r})}else r&&t.stack.push({async:!0});return e}var Nf=typeof SuppressedError=="function"?SuppressedError:function(t,e,r){var n=new Error(r);return n.name="SuppressedError",n.error=t,n.suppressed=e,n};function Eu(t){function e(s){t.error=t.hasError?new Nf(s,t.error,"An error was suppressed during disposal."):s,t.hasError=!0}var r,n=0;function i(){for(;r=t.stack.pop();)try{if(!r.async&&n===1)return n=0,t.stack.push(r),Promise.resolve().then(i);if(r.dispose){var s=r.dispose.call(r.value);if(r.async)return n|=2,Promise.resolve(s).then(i,function(o){return e(o),i()})}else n|=1}catch(o){e(o)}if(n===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return i()}function ku(t,e){return typeof t=="string"&&/^\.\.?\//.test(t)?t.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(r,n,i,s,o){return n?e?".jsx":".js":i&&(!s||!o)?r:i+s+"."+o.toLowerCase()+"js"}):t}const Ff={__extends:ru,__assign:Yn,__rest:Mr,__decorate:nu,__param:iu,__esDecorate:su,__runInitializers:ou,__propKey:au,__setFunctionName:lu,__metadata:uu,__awaiter:re,__generator:cu,__createBinding:mi,__exportStar:hu,__values:Qn,__read:qs,__spread:du,__spreadArrays:fu,__spreadArray:pu,__await:Fr,__asyncGenerator:gu,__asyncDelegator:vu,__asyncValues:mu,__makeTemplateObject:yu,__importStar:_u,__importDefault:bu,__classPrivateFieldGet:wu,__classPrivateFieldSet:Su,__classPrivateFieldIn:Pu,__addDisposableResource:Tu,__disposeResources:Eu,__rewriteRelativeImportExtension:ku},Uf=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:Tu,get __assign(){return Yn},__asyncDelegator:vu,__asyncGenerator:gu,__asyncValues:mu,__await:Fr,__awaiter:re,__classPrivateFieldGet:wu,__classPrivateFieldIn:Pu,__classPrivateFieldSet:Su,__createBinding:mi,__decorate:nu,__disposeResources:Eu,__esDecorate:su,__exportStar:hu,__extends:ru,__generator:cu,__importDefault:bu,__importStar:_u,__makeTemplateObject:yu,__metadata:uu,__param:iu,__propKey:au,__read:qs,__rest:Mr,__rewriteRelativeImportExtension:ku,__runInitializers:ou,__setFunctionName:lu,__spread:du,__spreadArray:pu,__spreadArrays:fu,__values:Qn,default:Ff},Symbol.toStringTag,{value:"Module"})),Mf=t=>t?(...e)=>t(...e):(...e)=>fetch(...e);class Hs extends Error{constructor(e,r="FunctionsError",n){super(e),this.name=r,this.context=n}}class $f extends Hs{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class ta extends Hs{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class ra extends Hs{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var hs;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(hs||(hs={}));class Bf{constructor(e,{headers:r={},customFetch:n,region:i=hs.Any}={}){this.url=e,this.headers=r,this.region=i,this.fetch=Mf(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return re(this,arguments,void 0,function*(r,n={}){var i;let s,o;try{const{headers:l,method:a,body:u,signal:c,timeout:h}=n;let y={},{region:g}=n;g||(g=this.region);const d=new URL(`${this.url}/${r}`);g&&g!=="any"&&(y["x-region"]=g,d.searchParams.set("forceFunctionRegion",g));let f;u&&(l&&!Object.prototype.hasOwnProperty.call(l,"Content-Type")||!l)?typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(y["Content-Type"]="application/octet-stream",f=u):typeof u=="string"?(y["Content-Type"]="text/plain",f=u):typeof FormData<"u"&&u instanceof FormData?f=u:(y["Content-Type"]="application/json",f=JSON.stringify(u)):f=u;let p=c;h&&(o=new AbortController,s=setTimeout(()=>o.abort(),h),c?(p=o.signal,c.addEventListener("abort",()=>o.abort())):p=o.signal);const v=yield this.fetch(d.toString(),{method:a||"POST",headers:Object.assign(Object.assign(Object.assign({},y),this.headers),l),body:f,signal:p}).catch(w=>{throw new $f(w)}),m=v.headers.get("x-relay-error");if(m&&m==="true")throw new ta(v);if(!v.ok)throw new ra(v);let b=((i=v.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),_;return b==="application/json"?_=yield v.json():b==="application/octet-stream"||b==="application/pdf"?_=yield v.blob():b==="text/event-stream"?_=v:b==="multipart/form-data"?_=yield v.formData():_=yield v.text(),{data:_,error:null,response:v}}catch(l){return{data:null,error:l,response:l instanceof ra||l instanceof ta?l.context:void 0}}finally{s&&clearTimeout(s)}})}}function Vf(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function qf(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var r=function n(){var i=!1;try{i=this instanceof n}catch{}return i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var i=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return t[n]}})}),r}var Fe={};const $r=qf(Uf);var En={},kn={},On={},xn={},Rn={},Cn={},na;function Ou(){if(na)return Cn;na=1,Object.defineProperty(Cn,"__esModule",{value:!0});class t extends Error{constructor(r){super(r.message),this.name="PostgrestError",this.details=r.details,this.hint=r.hint,this.code=r.code}}return Cn.default=t,Cn}var ia;function xu(){if(ia)return Rn;ia=1,Object.defineProperty(Rn,"__esModule",{value:!0});const e=$r.__importDefault(Ou());class r{constructor(i){var s,o;this.shouldThrowOnError=!1,this.method=i.method,this.url=i.url,this.headers=new Headers(i.headers),this.schema=i.schema,this.body=i.body,this.shouldThrowOnError=(s=i.shouldThrowOnError)!==null&&s!==void 0?s:!1,this.signal=i.signal,this.isMaybeSingle=(o=i.isMaybeSingle)!==null&&o!==void 0?o:!1,i.fetch?this.fetch=i.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(i,s){return this.headers=new Headers(this.headers),this.headers.set(i,s),this}then(i,s){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const o=this.fetch;let l=o(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async a=>{var u,c,h,y;let g=null,d=null,f=null,p=a.status,v=a.statusText;if(a.ok){if(this.method!=="HEAD"){const w=await a.text();w===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((u=this.headers.get("Accept"))===null||u===void 0)&&u.includes("application/vnd.pgrst.plan+text"))?d=w:d=JSON.parse(w))}const b=(c=this.headers.get("Prefer"))===null||c===void 0?void 0:c.match(/count=(exact|planned|estimated)/),_=(h=a.headers.get("content-range"))===null||h===void 0?void 0:h.split("/");b&&_&&_.length>1&&(f=parseInt(_[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(d)&&(d.length>1?(g={code:"PGRST116",details:`Results contain ${d.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},d=null,f=null,p=406,v="Not Acceptable"):d.length===1?d=d[0]:d=null)}else{const b=await a.text();try{g=JSON.parse(b),Array.isArray(g)&&a.status===404&&(d=[],g=null,p=200,v="OK")}catch{a.status===404&&b===""?(p=204,v="No Content"):g={message:b}}if(g&&this.isMaybeSingle&&(!((y=g?.details)===null||y===void 0)&&y.includes("0 rows"))&&(g=null,p=200,v="OK"),g&&this.shouldThrowOnError)throw new e.default(g)}return{error:g,data:d,count:f,status:p,statusText:v}});return this.shouldThrowOnError||(l=l.catch(a=>{var u,c,h,y,g,d;let f="";const p=a?.cause;if(p){const v=(u=p?.message)!==null&&u!==void 0?u:"",m=(c=p?.code)!==null&&c!==void 0?c:"";f=`${(h=a?.name)!==null&&h!==void 0?h:"FetchError"}: ${a?.message}`,f+=`

Caused by: ${(y=p?.name)!==null&&y!==void 0?y:"Error"}: ${v}`,m&&(f+=` (${m})`),p?.stack&&(f+=`
${p.stack}`)}else f=(g=a?.stack)!==null&&g!==void 0?g:"";return{error:{message:`${(d=a?.name)!==null&&d!==void 0?d:"FetchError"}: ${a?.message}`,details:f,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),l.then(i,s)}returns(){return this}overrideTypes(){return this}}return Rn.default=r,Rn}var sa;function Ru(){if(sa)return xn;sa=1,Object.defineProperty(xn,"__esModule",{value:!0});const e=$r.__importDefault(xu());class r extends e.default{select(i){let s=!1;const o=(i??"*").split("").map(l=>/\s/.test(l)&&!s?"":(l==='"'&&(s=!s),l)).join("");return this.url.searchParams.set("select",o),this.headers.append("Prefer","return=representation"),this}order(i,{ascending:s=!0,nullsFirst:o,foreignTable:l,referencedTable:a=l}={}){const u=a?`${a}.order`:"order",c=this.url.searchParams.get(u);return this.url.searchParams.set(u,`${c?`${c},`:""}${i}.${s?"asc":"desc"}${o===void 0?"":o?".nullsfirst":".nullslast"}`),this}limit(i,{foreignTable:s,referencedTable:o=s}={}){const l=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(l,`${i}`),this}range(i,s,{foreignTable:o,referencedTable:l=o}={}){const a=typeof l>"u"?"offset":`${l}.offset`,u=typeof l>"u"?"limit":`${l}.limit`;return this.url.searchParams.set(a,`${i}`),this.url.searchParams.set(u,`${s-i+1}`),this}abortSignal(i){return this.signal=i,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:i=!1,verbose:s=!1,settings:o=!1,buffers:l=!1,wal:a=!1,format:u="text"}={}){var c;const h=[i?"analyze":null,s?"verbose":null,o?"settings":null,l?"buffers":null,a?"wal":null].filter(Boolean).join("|"),y=(c=this.headers.get("Accept"))!==null&&c!==void 0?c:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${u}; for="${y}"; options=${h};`),u==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(i){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${i}`),this}}return xn.default=r,xn}var oa;function Ws(){if(oa)return On;oa=1,Object.defineProperty(On,"__esModule",{value:!0});const e=$r.__importDefault(Ru()),r=new RegExp("[,()]");class n extends e.default{eq(s,o){return this.url.searchParams.append(s,`eq.${o}`),this}neq(s,o){return this.url.searchParams.append(s,`neq.${o}`),this}gt(s,o){return this.url.searchParams.append(s,`gt.${o}`),this}gte(s,o){return this.url.searchParams.append(s,`gte.${o}`),this}lt(s,o){return this.url.searchParams.append(s,`lt.${o}`),this}lte(s,o){return this.url.searchParams.append(s,`lte.${o}`),this}like(s,o){return this.url.searchParams.append(s,`like.${o}`),this}likeAllOf(s,o){return this.url.searchParams.append(s,`like(all).{${o.join(",")}}`),this}likeAnyOf(s,o){return this.url.searchParams.append(s,`like(any).{${o.join(",")}}`),this}ilike(s,o){return this.url.searchParams.append(s,`ilike.${o}`),this}ilikeAllOf(s,o){return this.url.searchParams.append(s,`ilike(all).{${o.join(",")}}`),this}ilikeAnyOf(s,o){return this.url.searchParams.append(s,`ilike(any).{${o.join(",")}}`),this}regexMatch(s,o){return this.url.searchParams.append(s,`match.${o}`),this}regexIMatch(s,o){return this.url.searchParams.append(s,`imatch.${o}`),this}is(s,o){return this.url.searchParams.append(s,`is.${o}`),this}isDistinct(s,o){return this.url.searchParams.append(s,`isdistinct.${o}`),this}in(s,o){const l=Array.from(new Set(o)).map(a=>typeof a=="string"&&r.test(a)?`"${a}"`:`${a}`).join(",");return this.url.searchParams.append(s,`in.(${l})`),this}contains(s,o){return typeof o=="string"?this.url.searchParams.append(s,`cs.${o}`):Array.isArray(o)?this.url.searchParams.append(s,`cs.{${o.join(",")}}`):this.url.searchParams.append(s,`cs.${JSON.stringify(o)}`),this}containedBy(s,o){return typeof o=="string"?this.url.searchParams.append(s,`cd.${o}`):Array.isArray(o)?this.url.searchParams.append(s,`cd.{${o.join(",")}}`):this.url.searchParams.append(s,`cd.${JSON.stringify(o)}`),this}rangeGt(s,o){return this.url.searchParams.append(s,`sr.${o}`),this}rangeGte(s,o){return this.url.searchParams.append(s,`nxl.${o}`),this}rangeLt(s,o){return this.url.searchParams.append(s,`sl.${o}`),this}rangeLte(s,o){return this.url.searchParams.append(s,`nxr.${o}`),this}rangeAdjacent(s,o){return this.url.searchParams.append(s,`adj.${o}`),this}overlaps(s,o){return typeof o=="string"?this.url.searchParams.append(s,`ov.${o}`):this.url.searchParams.append(s,`ov.{${o.join(",")}}`),this}textSearch(s,o,{config:l,type:a}={}){let u="";a==="plain"?u="pl":a==="phrase"?u="ph":a==="websearch"&&(u="w");const c=l===void 0?"":`(${l})`;return this.url.searchParams.append(s,`${u}fts${c}.${o}`),this}match(s){return Object.entries(s).forEach(([o,l])=>{this.url.searchParams.append(o,`eq.${l}`)}),this}not(s,o,l){return this.url.searchParams.append(s,`not.${o}.${l}`),this}or(s,{foreignTable:o,referencedTable:l=o}={}){const a=l?`${l}.or`:"or";return this.url.searchParams.append(a,`(${s})`),this}filter(s,o,l){return this.url.searchParams.append(s,`${o}.${l}`),this}}return On.default=n,On}var aa;function Cu(){if(aa)return kn;aa=1,Object.defineProperty(kn,"__esModule",{value:!0});const e=$r.__importDefault(Ws());class r{constructor(i,{headers:s={},schema:o,fetch:l}){this.url=i,this.headers=new Headers(s),this.schema=o,this.fetch=l}select(i,s){const{head:o=!1,count:l}=s??{},a=o?"HEAD":"GET";let u=!1;const c=(i??"*").split("").map(h=>/\s/.test(h)&&!u?"":(h==='"'&&(u=!u),h)).join("");return this.url.searchParams.set("select",c),l&&this.headers.append("Prefer",`count=${l}`),new e.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(i,{count:s,defaultToNull:o=!0}={}){var l;const a="POST";if(s&&this.headers.append("Prefer",`count=${s}`),o||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const u=i.reduce((c,h)=>c.concat(Object.keys(h)),[]);if(u.length>0){const c=[...new Set(u)].map(h=>`"${h}"`);this.url.searchParams.set("columns",c.join(","))}}return new e.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}upsert(i,{onConflict:s,ignoreDuplicates:o=!1,count:l,defaultToNull:a=!0}={}){var u;const c="POST";if(this.headers.append("Prefer",`resolution=${o?"ignore":"merge"}-duplicates`),s!==void 0&&this.url.searchParams.set("on_conflict",s),l&&this.headers.append("Prefer",`count=${l}`),a||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const h=i.reduce((y,g)=>y.concat(Object.keys(g)),[]);if(h.length>0){const y=[...new Set(h)].map(g=>`"${g}"`);this.url.searchParams.set("columns",y.join(","))}}return new e.default({method:c,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}update(i,{count:s}={}){var o;const l="PATCH";return s&&this.headers.append("Prefer",`count=${s}`),new e.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}delete({count:i}={}){var s;const o="DELETE";return i&&this.headers.append("Prefer",`count=${i}`),new e.default({method:o,url:this.url,headers:this.headers,schema:this.schema,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}}return kn.default=r,kn}var la;function Hf(){if(la)return En;la=1,Object.defineProperty(En,"__esModule",{value:!0});const t=$r,e=t.__importDefault(Cu()),r=t.__importDefault(Ws());class n{constructor(s,{headers:o={},schema:l,fetch:a}={}){this.url=s,this.headers=new Headers(o),this.schemaName=l,this.fetch=a}from(s){if(!s||typeof s!="string"||s.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");const o=new URL(`${this.url}/${s}`);return new e.default(o,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(s){return new n(this.url,{headers:this.headers,schema:s,fetch:this.fetch})}rpc(s,o={},{head:l=!1,get:a=!1,count:u}={}){var c;let h;const y=new URL(`${this.url}/rpc/${s}`);let g;l||a?(h=l?"HEAD":"GET",Object.entries(o).filter(([f,p])=>p!==void 0).map(([f,p])=>[f,Array.isArray(p)?`{${p.join(",")}}`:`${p}`]).forEach(([f,p])=>{y.searchParams.append(f,p)})):(h="POST",g=o);const d=new Headers(this.headers);return u&&d.set("Prefer",`count=${u}`),new r.default({method:h,url:y,headers:d,schema:this.schemaName,body:g,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch})}}return En.default=n,En}var ua;function Wf(){if(ua)return Fe;ua=1,Object.defineProperty(Fe,"__esModule",{value:!0}),Fe.PostgrestError=Fe.PostgrestBuilder=Fe.PostgrestTransformBuilder=Fe.PostgrestFilterBuilder=Fe.PostgrestQueryBuilder=Fe.PostgrestClient=void 0;const t=$r,e=t.__importDefault(Hf());Fe.PostgrestClient=e.default;const r=t.__importDefault(Cu());Fe.PostgrestQueryBuilder=r.default;const n=t.__importDefault(Ws());Fe.PostgrestFilterBuilder=n.default;const i=t.__importDefault(Ru());Fe.PostgrestTransformBuilder=i.default;const s=t.__importDefault(xu());Fe.PostgrestBuilder=s.default;const o=t.__importDefault(Ou());return Fe.PostgrestError=o.default,Fe.default={PostgrestClient:e.default,PostgrestQueryBuilder:r.default,PostgrestFilterBuilder:n.default,PostgrestTransformBuilder:i.default,PostgrestBuilder:s.default,PostgrestError:o.default},Fe}var Au=Wf();const Iu=Vf(Au),Kf=Xu({__proto__:null,default:Iu},[Au]),{PostgrestClient:zf,PostgrestQueryBuilder:Dm,PostgrestFilterBuilder:Lm,PostgrestTransformBuilder:Nm,PostgrestBuilder:Fm,PostgrestError:Um}=Iu||Kf;class Gf{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const n=r.node,i=parseInt(n.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let r=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(r+=`

Suggested solution: ${e.workaround}`),new Error(r)}static createWebSocket(e,r){const n=this.getWebSocketConstructor();return new n(e,r)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const Jf="2.86.0",Xf=`realtime-js/${Jf}`,ju="1.0.0",Yf="2.0.0",ca=ju,ds=1e4,Qf=1e3,Zf=100;var nr;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(nr||(nr={}));var Ie;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(Ie||(Ie={}));var ut;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(ut||(ut={}));var fs;(function(t){t.websocket="websocket"})(fs||(fs={}));var ir;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(ir||(ir={}));class ep{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,r){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return r(this._binaryEncodeUserBroadcastPush(e));let n=[e.join_ref,e.ref,e.topic,e.event,e.payload];return r(JSON.stringify(n))}_binaryEncodeUserBroadcastPush(e){var r;return this._isArrayBuffer((r=e.payload)===null||r===void 0?void 0:r.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var r,n;const i=(n=(r=e.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,i)}_encodeJsonUserBroadcastPush(e){var r,n;const i=(n=(r=e.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:{},o=new TextEncoder().encode(JSON.stringify(i)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,o)}_encodeUserBroadcastPush(e,r,n){var i,s;const o=e.topic,l=(i=e.ref)!==null&&i!==void 0?i:"",a=(s=e.join_ref)!==null&&s!==void 0?s:"",u=e.payload.event,c=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},h=Object.keys(c).length===0?"":JSON.stringify(c);if(a.length>255)throw new Error(`joinRef length ${a.length} exceeds maximum of 255`);if(l.length>255)throw new Error(`ref length ${l.length} exceeds maximum of 255`);if(o.length>255)throw new Error(`topic length ${o.length} exceeds maximum of 255`);if(u.length>255)throw new Error(`userEvent length ${u.length} exceeds maximum of 255`);if(h.length>255)throw new Error(`metadata length ${h.length} exceeds maximum of 255`);const y=this.USER_BROADCAST_PUSH_META_LENGTH+a.length+l.length+o.length+u.length+h.length,g=new ArrayBuffer(this.HEADER_LENGTH+y);let d=new DataView(g),f=0;d.setUint8(f++,this.KINDS.userBroadcastPush),d.setUint8(f++,a.length),d.setUint8(f++,l.length),d.setUint8(f++,o.length),d.setUint8(f++,u.length),d.setUint8(f++,h.length),d.setUint8(f++,r),Array.from(a,v=>d.setUint8(f++,v.charCodeAt(0))),Array.from(l,v=>d.setUint8(f++,v.charCodeAt(0))),Array.from(o,v=>d.setUint8(f++,v.charCodeAt(0))),Array.from(u,v=>d.setUint8(f++,v.charCodeAt(0))),Array.from(h,v=>d.setUint8(f++,v.charCodeAt(0)));var p=new Uint8Array(g.byteLength+n.byteLength);return p.set(new Uint8Array(g),0),p.set(new Uint8Array(n),g.byteLength),p.buffer}decode(e,r){if(this._isArrayBuffer(e)){let n=this._binaryDecode(e);return r(n)}if(typeof e=="string"){const n=JSON.parse(e),[i,s,o,l,a]=n;return r({join_ref:i,ref:s,topic:o,event:l,payload:a})}return r({})}_binaryDecode(e){const r=new DataView(e),n=r.getUint8(0),i=new TextDecoder;switch(n){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,r,i)}}_decodeUserBroadcast(e,r,n){const i=r.getUint8(1),s=r.getUint8(2),o=r.getUint8(3),l=r.getUint8(4);let a=this.HEADER_LENGTH+4;const u=n.decode(e.slice(a,a+i));a=a+i;const c=n.decode(e.slice(a,a+s));a=a+s;const h=n.decode(e.slice(a,a+o));a=a+o;const y=e.slice(a,e.byteLength),g=l===this.JSON_ENCODING?JSON.parse(n.decode(y)):y,d={type:this.BROADCAST_EVENT,event:c,payload:g};return o>0&&(d.meta=JSON.parse(h)),{join_ref:null,ref:null,topic:u,event:this.BROADCAST_EVENT,payload:d}}_isArrayBuffer(e){var r;return e instanceof ArrayBuffer||((r=e?.constructor)===null||r===void 0?void 0:r.name)==="ArrayBuffer"}_pick(e,r){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([n])=>r.includes(n)))}}class Du{constructor(e,r){this.callback=e,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Pe;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(Pe||(Pe={}));const ha=(t,e,r={})=>{var n;const i=(n=r.skipTypes)!==null&&n!==void 0?n:[];return e?Object.keys(e).reduce((s,o)=>(s[o]=tp(o,t,e,i),s),{}):{}},tp=(t,e,r,n)=>{const i=e.find(l=>l.name===t),s=i?.type,o=r[t];return s&&!n.includes(s)?Lu(s,o):ps(o)},Lu=(t,e)=>{if(t.charAt(0)==="_"){const r=t.slice(1,t.length);return sp(e,r)}switch(t){case Pe.bool:return rp(e);case Pe.float4:case Pe.float8:case Pe.int2:case Pe.int4:case Pe.int8:case Pe.numeric:case Pe.oid:return np(e);case Pe.json:case Pe.jsonb:return ip(e);case Pe.timestamp:return op(e);case Pe.abstime:case Pe.date:case Pe.daterange:case Pe.int4range:case Pe.int8range:case Pe.money:case Pe.reltime:case Pe.text:case Pe.time:case Pe.timestamptz:case Pe.timetz:case Pe.tsrange:case Pe.tstzrange:return ps(e);default:return ps(e)}},ps=t=>t,rp=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},np=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},ip=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},sp=(t,e)=>{if(typeof t!="string")return t;const r=t.length-1,n=t[r];if(t[0]==="{"&&n==="}"){let s;const o=t.slice(1,r);try{s=JSON.parse("["+o+"]")}catch{s=o?o.split(","):[]}return s.map(l=>Lu(e,l))}return t},op=t=>typeof t=="string"?t.replace(" ","T"):t,Nu=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class Fi{constructor(e,r,n={},i=ds){this.channel=e,this.event=r,this.payload=n,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,r){var n;return this._hasReceived(e)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:e,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:r}){this.recHooks.filter(n=>n.status===e).forEach(n=>n.callback(r))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var da;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(da||(da={}));class rn{constructor(e,r){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=r?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},i=>{const{onJoin:s,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=rn.syncState(this.state,i,s,o),this.pendingDiffs.forEach(a=>{this.state=rn.syncDiff(this.state,a,s,o)}),this.pendingDiffs=[],l()}),this.channel._on(n.diff,{},i=>{const{onJoin:s,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=rn.syncDiff(this.state,i,s,o),l())}),this.onJoin((i,s,o)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:s,newPresences:o})}),this.onLeave((i,s,o)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:s,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,r,n,i){const s=this.cloneDeep(e),o=this.transformState(r),l={},a={};return this.map(s,(u,c)=>{o[u]||(a[u]=c)}),this.map(o,(u,c)=>{const h=s[u];if(h){const y=c.map(p=>p.presence_ref),g=h.map(p=>p.presence_ref),d=c.filter(p=>g.indexOf(p.presence_ref)<0),f=h.filter(p=>y.indexOf(p.presence_ref)<0);d.length>0&&(l[u]=d),f.length>0&&(a[u]=f)}else l[u]=c}),this.syncDiff(s,{joins:l,leaves:a},n,i)}static syncDiff(e,r,n,i){const{joins:s,leaves:o}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),i||(i=()=>{}),this.map(s,(l,a)=>{var u;const c=(u=e[l])!==null&&u!==void 0?u:[];if(e[l]=this.cloneDeep(a),c.length>0){const h=e[l].map(g=>g.presence_ref),y=c.filter(g=>h.indexOf(g.presence_ref)<0);e[l].unshift(...y)}n(l,c,a)}),this.map(o,(l,a)=>{let u=e[l];if(!u)return;const c=a.map(h=>h.presence_ref);u=u.filter(h=>c.indexOf(h.presence_ref)<0),e[l]=u,i(l,u,a),u.length===0&&delete e[l]}),e}static map(e,r){return Object.getOwnPropertyNames(e).map(n=>r(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((r,n)=>{const i=e[n];return"metas"in i?r[n]=i.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):r[n]=i,r},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var fa;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(fa||(fa={}));var nn;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(nn||(nn={}));var Ot;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Ot||(Ot={}));class Ks{constructor(e,r={config:{}},n){var i,s;if(this.topic=e,this.params=r,this.socket=n,this.bindings={},this.state=Ie.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new Fi(this,ut.join,this.params,this.timeout),this.rejoinTimer=new Du(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Ie.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Ie.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=Ie.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Ie.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=Ie.errored,this.rejoinTimer.scheduleTimeout())}),this._on(ut.reply,{},(o,l)=>{this._trigger(this._replyEventName(l),o)}),this.presence=new rn(this),this.broadcastEndpointURL=Nu(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((s=(i=this.params.config)===null||i===void 0?void 0:i.broadcast)===null||s===void 0)&&s.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,r=this.timeout){var n,i,s;if(this.socket.isConnected()||this.socket.connect(),this.state==Ie.closed){const{config:{broadcast:o,presence:l,private:a}}=this.params,u=(i=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(g=>g.filter))!==null&&i!==void 0?i:[],c=!!this.bindings[nn.PRESENCE]&&this.bindings[nn.PRESENCE].length>0||((s=this.params.config.presence)===null||s===void 0?void 0:s.enabled)===!0,h={},y={broadcast:o,presence:Object.assign(Object.assign({},l),{enabled:c}),postgres_changes:u,private:a};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(g=>e?.(Ot.CHANNEL_ERROR,g)),this._onClose(()=>e?.(Ot.CLOSED)),this.updateJoinPayload(Object.assign({config:y},h)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:g})=>{var d;if(this.socket.setAuth(),g===void 0){e?.(Ot.SUBSCRIBED);return}else{const f=this.bindings.postgres_changes,p=(d=f?.length)!==null&&d!==void 0?d:0,v=[];for(let m=0;m<p;m++){const b=f[m],{filter:{event:_,schema:w,table:P,filter:O}}=b,H=g&&g[m];if(H&&H.event===_&&H.schema===w&&H.table===P&&H.filter===O)v.push(Object.assign(Object.assign({},b),{id:H.id}));else{this.unsubscribe(),this.state=Ie.errored,e?.(Ot.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=v,e&&e(Ot.SUBSCRIBED);return}}).receive("error",g=>{this.state=Ie.errored,e?.(Ot.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(g).join(", ")||"error")))}).receive("timeout",()=>{e?.(Ot.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,r={}){return await this.send({type:"presence",event:"track",payload:e},r.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,r,n){return this.state===Ie.joined&&e===nn.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,r,n)}async httpSend(e,r,n={}){var i;const s=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(r==null)return Promise.reject("Payload is required for httpSend()");const o={method:"POST",headers:{Authorization:s,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:r,private:this.private}]})},l=await this._fetchWithTimeout(this.broadcastEndpointURL,o,(i=n.timeout)!==null&&i!==void 0?i:this.timeout);if(l.status===202)return{success:!0};let a=l.statusText;try{const u=await l.json();a=u.error||u.message||a}catch{}return Promise.reject(new Error(a))}async send(e,r={}){var n,i;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:s,payload:o}=e,a={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,a,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((i=u.body)===null||i===void 0?void 0:i.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var o,l,a;const u=this._push(e.type,e,r.timeout||this.timeout);e.type==="broadcast"&&!(!((a=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||a===void 0)&&a.ack)&&s("ok"),u.receive("ok",()=>s("ok")),u.receive("error",()=>s("error")),u.receive("timeout",()=>s("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Ie.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(ut.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(i=>{n=new Fi(this,ut.leave,{},e),n.receive("ok",()=>{r(),i("ok")}).receive("timeout",()=>{r(),i("timed out")}).receive("error",()=>{i("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n?.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Ie.closed,this.bindings={}}async _fetchWithTimeout(e,r,n){const i=new AbortController,s=setTimeout(()=>i.abort(),n),o=await this.socket.fetch(e,Object.assign(Object.assign({},r),{signal:i.signal}));return clearTimeout(s),o}_push(e,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new Fi(this,e,r,n);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>Zf){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(e,r,n){return r}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,r,n){var i,s;const o=e.toLocaleLowerCase(),{close:l,error:a,leave:u,join:c}=ut;if(n&&[l,a,u,c].indexOf(o)>=0&&n!==this._joinRef())return;let y=this._onMessage(o,r,n);if(r&&!y)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(g=>{var d,f,p;return((d=g.filter)===null||d===void 0?void 0:d.event)==="*"||((p=(f=g.filter)===null||f===void 0?void 0:f.event)===null||p===void 0?void 0:p.toLocaleLowerCase())===o}).map(g=>g.callback(y,n)):(s=this.bindings[o])===null||s===void 0||s.filter(g=>{var d,f,p,v,m,b;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in g){const _=g.id,w=(d=g.filter)===null||d===void 0?void 0:d.event;return _&&((f=r.ids)===null||f===void 0?void 0:f.includes(_))&&(w==="*"||w?.toLocaleLowerCase()===((p=r.data)===null||p===void 0?void 0:p.type.toLocaleLowerCase()))}else{const _=(m=(v=g?.filter)===null||v===void 0?void 0:v.event)===null||m===void 0?void 0:m.toLocaleLowerCase();return _==="*"||_===((b=r?.event)===null||b===void 0?void 0:b.toLocaleLowerCase())}else return g.type.toLocaleLowerCase()===o}).map(g=>{if(typeof y=="object"&&"ids"in y){const d=y.data,{schema:f,table:p,commit_timestamp:v,type:m,errors:b}=d;y=Object.assign(Object.assign({},{schema:f,table:p,commit_timestamp:v,eventType:m,new:{},old:{},errors:b}),this._getPayloadRecords(d))}g.callback(y,n)})}_isClosed(){return this.state===Ie.closed}_isJoined(){return this.state===Ie.joined}_isJoining(){return this.state===Ie.joining}_isLeaving(){return this.state===Ie.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,r,n){const i=e.toLocaleLowerCase(),s={type:i,filter:r,callback:n};return this.bindings[i]?this.bindings[i].push(s):this.bindings[i]=[s],this}_off(e,r){const n=e.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(i=>{var s;return!(((s=i.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===n&&Ks.isEqual(i.filter,r))})),this}static isEqual(e,r){if(Object.keys(e).length!==Object.keys(r).length)return!1;for(const n in e)if(e[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(ut.close,{},e)}_onError(e){this._on(ut.error,{},r=>e(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Ie.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const r={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(r.new=ha(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(r.old=ha(e.columns,e.old_record)),r}}const Ui=()=>{},An={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},ap=[1e3,2e3,5e3,1e4],lp=1e4,up=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class cp{constructor(e,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=ds,this.transport=null,this.heartbeatIntervalMs=An.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Ui,this.ref=0,this.reconnectTimer=null,this.vsn=ca,this.logger=Ui,this.conn=null,this.sendBuffer=[],this.serializer=new ep,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=i=>i?(...s)=>i(...s):(...s)=>fetch(...s),!(!((n=r?.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${e}/${fs.websocket}`,this.httpEndpoint=Nu(e),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Gf.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const r=e.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,r??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const r=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const e=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,r,n){this.logger(e,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case nr.connecting:return ir.Connecting;case nr.open:return ir.Open;case nr.closing:return ir.Closing;default:return ir.Closed}}isConnected(){return this.connectionState()===ir.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,r={config:{}}){const n=`realtime:${e}`,i=this.getChannels().find(s=>s.topic===n);if(i)return i;{const s=new Ks(`realtime:${e}`,r,this);return this.channels.push(s),s}}push(e){const{topic:r,event:n,payload:i,ref:s}=e,o=()=>{this.encode(e,l=>{var a;(a=this.conn)===null||a===void 0||a.send(l)})};this.log("push",`${r} ${n} (${s})`,i),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(Qf,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},An.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let r=this.channels.find(n=>n.topic===e&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${e}"`),r.unsubscribe())}_remove(e){this.channels=this.channels.filter(r=>r.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(u){this.log("error","error in heartbeat callback",u)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:i,payload:s,ref:o}=r,l=o?`(${o})`:"",a=s.status||"";this.log("receive",`${a} ${n} ${i} ${l}`.trim(),s),this.channels.filter(u=>u._isMember(n)).forEach(u=>u._trigger(i,s,o)),this._triggerStateCallbacks("message",r)})}_clearTimer(e){var r;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){if(this.conn){if(this.conn.readyState===nr.open||this.conn.readyState===nr.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(r=>{this.log("error","error waiting for auth on connect",r),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var r;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(ut.error))}_appendParams(e,r){if(Object.keys(r).length===0)return e;const n=e.match(/\?/)?"&":"?",i=new URLSearchParams(r);return`${e}${n}${i}`}_workerObjectUrl(e){let r;if(e)r=e;else{const n=new Blob([up],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(e,r=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(e=null){let r;e?r=e:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{const i={access_token:r,version:Xf};r&&n.updateJoinPayload(i),n.joinedOnce&&n._isJoined()&&n._push(ut.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${e}`,r)})}_triggerStateCallbacks(e,r){try{this.stateChangeCallbacks[e].forEach(n=>{try{n(r)}catch(i){this.log("error",`error in ${e} callback`,i)}})}catch(n){this.log("error",`error triggering ${e} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new Du(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},An.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var r,n,i,s,o,l,a,u,c,h,y,g;switch(this.transport=(r=e?.transport)!==null&&r!==void 0?r:null,this.timeout=(n=e?.timeout)!==null&&n!==void 0?n:ds,this.heartbeatIntervalMs=(i=e?.heartbeatIntervalMs)!==null&&i!==void 0?i:An.HEARTBEAT_INTERVAL,this.worker=(s=e?.worker)!==null&&s!==void 0?s:!1,this.accessToken=(o=e?.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(l=e?.heartbeatCallback)!==null&&l!==void 0?l:Ui,this.vsn=(a=e?.vsn)!==null&&a!==void 0?a:ca,e?.params&&(this.params=e.params),e?.logger&&(this.logger=e.logger),(e?.logLevel||e?.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(u=e?.reconnectAfterMs)!==null&&u!==void 0?u:(d=>ap[d-1]||lp),this.vsn){case ju:this.encode=(c=e?.encode)!==null&&c!==void 0?c:((d,f)=>f(JSON.stringify(d))),this.decode=(h=e?.decode)!==null&&h!==void 0?h:((d,f)=>f(JSON.parse(d)));break;case Yf:this.encode=(y=e?.encode)!==null&&y!==void 0?y:this.serializer.encode.bind(this.serializer),this.decode=(g=e?.decode)!==null&&g!==void 0?g:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e?.workerUrl}}}class yi extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function ke(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class hp extends yi{constructor(e,r,n){super(e),this.name="StorageApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class gs extends yi{constructor(e,r){super(e),this.name="StorageUnknownError",this.originalError=r}}const zs=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),dp=()=>Response,vs=t=>{if(Array.isArray(t))return t.map(r=>vs(r));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([r,n])=>{const i=r.replace(/([-_][a-z])/gi,s=>s.toUpperCase().replace(/[-_]/g,""));e[i]=vs(n)}),e},fp=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},pp=t=>!t||typeof t!="string"||t.length===0||t.length>100||t.trim()!==t||t.includes("/")||t.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(t),Mi=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},gp=(t,e,r)=>re(void 0,void 0,void 0,function*(){const n=yield dp();t instanceof n&&!r?.noResolveJson?t.json().then(i=>{const s=t.status||500,o=i?.statusCode||s+"";e(new hp(Mi(i),s,o))}).catch(i=>{e(new gs(Mi(i),i))}):e(new gs(Mi(t),t))}),vp=(t,e,r,n)=>{const i={method:t,headers:e?.headers||{}};return t==="GET"||!n?i:(fp(n)?(i.headers=Object.assign({"Content-Type":"application/json"},e?.headers),i.body=JSON.stringify(n)):i.body=n,e?.duplex&&(i.duplex=e.duplex),Object.assign(Object.assign({},i),r))};function _n(t,e,r,n,i,s){return re(this,void 0,void 0,function*(){return new Promise((o,l)=>{t(r,vp(e,n,i,s)).then(a=>{if(!a.ok)throw a;return n?.noResolveJson?a:a.json()}).then(a=>o(a)).catch(a=>gp(a,l,n))})})}function fn(t,e,r,n){return re(this,void 0,void 0,function*(){return _n(t,"GET",e,r,n)})}function lt(t,e,r,n,i){return re(this,void 0,void 0,function*(){return _n(t,"POST",e,n,i,r)})}function ms(t,e,r,n,i){return re(this,void 0,void 0,function*(){return _n(t,"PUT",e,n,i,r)})}function mp(t,e,r,n){return re(this,void 0,void 0,function*(){return _n(t,"HEAD",e,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function Gs(t,e,r,n,i){return re(this,void 0,void 0,function*(){return _n(t,"DELETE",e,n,i,r)})}class yp{constructor(e,r){this.downloadFn=e,this.shouldThrowOnError=r}then(e,r){return this.execute().then(e,r)}execute(){return re(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(ke(e))return{data:null,error:e};throw e}})}}var Fu;class _p{constructor(e,r){this.downloadFn=e,this.shouldThrowOnError=r,this[Fu]="BlobDownloadBuilder",this.promise=null}asStream(){return new yp(this.downloadFn,this.shouldThrowOnError)}then(e,r){return this.getPromise().then(e,r)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return re(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(ke(e))return{data:null,error:e};throw e}})}}Fu=Symbol.toStringTag;const bp={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},pa={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class wp{constructor(e,r={},n,i){this.shouldThrowOnError=!1,this.url=e,this.headers=r,this.bucketId=n,this.fetch=zs(i)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,r,n,i){return re(this,void 0,void 0,function*(){try{let s;const o=Object.assign(Object.assign({},pa),i);let l=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const a=o.metadata;typeof Blob<"u"&&n instanceof Blob?(s=new FormData,s.append("cacheControl",o.cacheControl),a&&s.append("metadata",this.encodeMetadata(a)),s.append("",n)):typeof FormData<"u"&&n instanceof FormData?(s=n,s.has("cacheControl")||s.append("cacheControl",o.cacheControl),a&&!s.has("metadata")&&s.append("metadata",this.encodeMetadata(a))):(s=n,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,a&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(a))),(typeof ReadableStream<"u"&&s instanceof ReadableStream||s&&typeof s=="object"&&"pipe"in s&&typeof s.pipe=="function")&&!o.duplex&&(o.duplex="half")),i?.headers&&(l=Object.assign(Object.assign({},l),i.headers));const u=this._removeEmptyFolders(r),c=this._getFinalPath(u),h=yield(e=="PUT"?ms:lt)(this.fetch,`${this.url}/object/${c}`,s,Object.assign({headers:l},o?.duplex?{duplex:o.duplex}:{}));return{data:{path:u,id:h.Id,fullPath:h.Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(ke(s))return{data:null,error:s};throw s}})}upload(e,r,n){return re(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,r,n)})}uploadToSignedUrl(e,r,n,i){return re(this,void 0,void 0,function*(){const s=this._removeEmptyFolders(e),o=this._getFinalPath(s),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set("token",r);try{let a;const u=Object.assign({upsert:pa.upsert},i),c=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&n instanceof Blob?(a=new FormData,a.append("cacheControl",u.cacheControl),a.append("",n)):typeof FormData<"u"&&n instanceof FormData?(a=n,a.append("cacheControl",u.cacheControl)):(a=n,c["cache-control"]=`max-age=${u.cacheControl}`,c["content-type"]=u.contentType);const h=yield ms(this.fetch,l.toString(),a,{headers:c});return{data:{path:s,fullPath:h.Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(ke(a))return{data:null,error:a};throw a}})}createSignedUploadUrl(e,r){return re(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e);const i=Object.assign({},this.headers);r?.upsert&&(i["x-upsert"]="true");const s=yield lt(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:i}),o=new URL(this.url+s.url),l=o.searchParams.get("token");if(!l)throw new yi("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:l},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ke(n))return{data:null,error:n};throw n}})}update(e,r,n){return re(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,r,n)})}move(e,r,n){return re(this,void 0,void 0,function*(){try{return{data:yield lt(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:n?.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(ke(i))return{data:null,error:i};throw i}})}copy(e,r,n){return re(this,void 0,void 0,function*(){try{return{data:{path:(yield lt(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:n?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(ke(i))return{data:null,error:i};throw i}})}createSignedUrl(e,r,n){return re(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e),s=yield lt(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:r},n?.transform?{transform:n.transform}:{}),{headers:this.headers});const o=n?.download?`&download=${n.download===!0?"":n.download}`:"";return s={signedUrl:encodeURI(`${this.url}${s.signedURL}${o}`)},{data:s,error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(ke(i))return{data:null,error:i};throw i}})}createSignedUrls(e,r,n){return re(this,void 0,void 0,function*(){try{const i=yield lt(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:e},{headers:this.headers}),s=n?.download?`&download=${n.download===!0?"":n.download}`:"";return{data:i.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${s}`):null})),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(ke(i))return{data:null,error:i};throw i}})}download(e,r){const i=typeof r?.transform<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString(r?.transform||{}),o=s?`?${s}`:"",l=this._getFinalPath(e),a=()=>fn(this.fetch,`${this.url}/${i}/${l}${o}`,{headers:this.headers,noResolveJson:!0});return new _p(a,this.shouldThrowOnError)}info(e){return re(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{const n=yield fn(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:vs(n),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ke(n))return{data:null,error:n};throw n}})}exists(e){return re(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{return yield mp(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ke(n)&&n instanceof gs){const i=n.originalError;if([400,404].includes(i?.status))return{data:!1,error:n}}throw n}})}getPublicUrl(e,r){const n=this._getFinalPath(e),i=[],s=r?.download?`download=${r.download===!0?"":r.download}`:"";s!==""&&i.push(s);const l=typeof r?.transform<"u"?"render/image":"object",a=this.transformOptsToQueryString(r?.transform||{});a!==""&&i.push(a);let u=i.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${n}${u}`)}}}remove(e){return re(this,void 0,void 0,function*(){try{return{data:yield Gs(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ke(r))return{data:null,error:r};throw r}})}list(e,r,n){return re(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},bp),r),{prefix:e||""});return{data:yield lt(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},n),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(ke(i))return{data:null,error:i};throw i}})}listV2(e,r){return re(this,void 0,void 0,function*(){try{const n=Object.assign({},e);return{data:yield lt(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ke(n))return{data:null,error:n};throw n}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const r=[];return e.width&&r.push(`width=${e.width}`),e.height&&r.push(`height=${e.height}`),e.resize&&r.push(`resize=${e.resize}`),e.format&&r.push(`format=${e.format}`),e.quality&&r.push(`quality=${e.quality}`),r.join("&")}}const Uu="2.86.0",Mu={"X-Client-Info":`storage-js/${Uu}`};class Sp{constructor(e,r={},n,i){this.shouldThrowOnError=!1;const s=new URL(e);i?.useNewHostname&&/supabase\.(co|in|red)$/.test(s.hostname)&&!s.hostname.includes("storage.supabase.")&&(s.hostname=s.hostname.replace("supabase.","storage.supabase.")),this.url=s.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Mu),r),this.fetch=zs(n)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(e){return re(this,void 0,void 0,function*(){try{const r=this.listBucketOptionsToQueryString(e);return{data:yield fn(this.fetch,`${this.url}/bucket${r}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ke(r))return{data:null,error:r};throw r}})}getBucket(e){return re(this,void 0,void 0,function*(){try{return{data:yield fn(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ke(r))return{data:null,error:r};throw r}})}createBucket(e){return re(this,arguments,void 0,function*(r,n={public:!1}){try{return{data:yield lt(this.fetch,`${this.url}/bucket`,{id:r,name:r,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(ke(i))return{data:null,error:i};throw i}})}updateBucket(e,r){return re(this,void 0,void 0,function*(){try{return{data:yield ms(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ke(n))return{data:null,error:n};throw n}})}emptyBucket(e){return re(this,void 0,void 0,function*(){try{return{data:yield lt(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ke(r))return{data:null,error:r};throw r}})}deleteBucket(e){return re(this,void 0,void 0,function*(){try{return{data:yield Gs(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ke(r))return{data:null,error:r};throw r}})}listBucketOptionsToQueryString(e){const r={};return e&&("limit"in e&&(r.limit=String(e.limit)),"offset"in e&&(r.offset=String(e.offset)),e.search&&(r.search=e.search),e.sortColumn&&(r.sortColumn=e.sortColumn),e.sortOrder&&(r.sortOrder=e.sortOrder)),Object.keys(r).length>0?"?"+new URLSearchParams(r).toString():""}}var pn=class extends Error{constructor(t,e){super(t),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&e.icebergType?.includes("CommitState")===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function Pp(t,e,r){const n=new URL(e,t);if(r)for(const[i,s]of Object.entries(r))s!==void 0&&n.searchParams.set(i,s);return n.toString()}async function Tp(t){return!t||t.type==="none"?{}:t.type==="bearer"?{Authorization:`Bearer ${t.token}`}:t.type==="header"?{[t.name]:t.value}:t.type==="custom"?await t.getHeaders():{}}function Ep(t){const e=t.fetchImpl??globalThis.fetch;return{async request({method:r,path:n,query:i,body:s,headers:o}){const l=Pp(t.baseUrl,n,i),a=await Tp(t.auth),u=await e(l,{method:r,headers:{...s?{"Content-Type":"application/json"}:{},...a,...o},body:s?JSON.stringify(s):void 0}),c=await u.text(),h=(u.headers.get("content-type")||"").includes("application/json"),y=h&&c?JSON.parse(c):c;if(!u.ok){const g=h?y:void 0,d=g?.error;throw new pn(d?.message??`Request failed with status ${u.status}`,{status:u.status,icebergType:d?.type,icebergCode:d?.code,details:g})}return{status:u.status,headers:u.headers,data:y}}}}function In(t){return t.join("")}var kp=class{constructor(t,e=""){this.client=t,this.prefix=e}async listNamespaces(t){const e=t?{parent:In(t.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(n=>({namespace:n}))}async createNamespace(t,e){const r={namespace:t.namespace,properties:e?.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:r})).data}async dropNamespace(t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${In(t.namespace)}`})}async loadNamespaceMetadata(t){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${In(t.namespace)}`})).data.properties}}async namespaceExists(t){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${In(t.namespace)}`}),!0}catch(e){if(e instanceof pn&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(t,e){try{return await this.createNamespace(t,e)}catch(r){if(r instanceof pn&&r.status===409)return;throw r}}};function gr(t){return t.join("")}var Op=class{constructor(t,e="",r){this.client=t,this.prefix=e,this.accessDelegation=r}async listTables(t){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${gr(t.namespace)}/tables`})).data.identifiers}async createTable(t,e){const r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${gr(t.namespace)}/tables`,body:e,headers:r})).data.metadata}async updateTable(t,e){const r=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${gr(t.namespace)}/tables/${t.name}`,body:e});return{"metadata-location":r.data["metadata-location"],metadata:r.data.metadata}}async dropTable(t,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${gr(t.namespace)}/tables/${t.name}`,query:{purgeRequested:String(e?.purge??!1)}})}async loadTable(t){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${gr(t.namespace)}/tables/${t.name}`,headers:e})).data.metadata}async tableExists(t){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${gr(t.namespace)}/tables/${t.name}`,headers:e}),!0}catch(r){if(r instanceof pn&&r.status===404)return!1;throw r}}async createTableIfNotExists(t,e){try{return await this.createTable(t,e)}catch(r){if(r instanceof pn&&r.status===409)return await this.loadTable({namespace:t.namespace,name:e.name});throw r}}},xp=class{constructor(t){let e="v1";t.catalogName&&(e+=`/${t.catalogName}`);const r=t.baseUrl.endsWith("/")?t.baseUrl:`${t.baseUrl}/`;this.client=Ep({baseUrl:r,auth:t.auth,fetchImpl:t.fetch}),this.accessDelegation=t.accessDelegation?.join(","),this.namespaceOps=new kp(this.client,e),this.tableOps=new Op(this.client,e,this.accessDelegation)}async listNamespaces(t){return this.namespaceOps.listNamespaces(t)}async createNamespace(t,e){return this.namespaceOps.createNamespace(t,e)}async dropNamespace(t){await this.namespaceOps.dropNamespace(t)}async loadNamespaceMetadata(t){return this.namespaceOps.loadNamespaceMetadata(t)}async listTables(t){return this.tableOps.listTables(t)}async createTable(t,e){return this.tableOps.createTable(t,e)}async updateTable(t,e){return this.tableOps.updateTable(t,e)}async dropTable(t,e){await this.tableOps.dropTable(t,e)}async loadTable(t){return this.tableOps.loadTable(t)}async namespaceExists(t){return this.namespaceOps.namespaceExists(t)}async tableExists(t){return this.tableOps.tableExists(t)}async createNamespaceIfNotExists(t,e){return this.namespaceOps.createNamespaceIfNotExists(t,e)}async createTableIfNotExists(t,e){return this.tableOps.createTableIfNotExists(t,e)}};class Rp{constructor(e,r={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Mu),r),this.fetch=zs(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return re(this,void 0,void 0,function*(){try{return{data:yield lt(this.fetch,`${this.url}/bucket`,{name:e},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ke(r))return{data:null,error:r};throw r}})}listBuckets(e){return re(this,void 0,void 0,function*(){try{const r=new URLSearchParams;e?.limit!==void 0&&r.set("limit",e.limit.toString()),e?.offset!==void 0&&r.set("offset",e.offset.toString()),e?.sortColumn&&r.set("sortColumn",e.sortColumn),e?.sortOrder&&r.set("sortOrder",e.sortOrder),e?.search&&r.set("search",e.search);const n=r.toString(),i=n?`${this.url}/bucket?${n}`:`${this.url}/bucket`;return{data:yield fn(this.fetch,i,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ke(r))return{data:null,error:r};throw r}})}deleteBucket(e){return re(this,void 0,void 0,function*(){try{return{data:yield Gs(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ke(r))return{data:null,error:r};throw r}})}from(e){if(!pp(e))throw new yi("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");return new xp({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:()=>re(this,void 0,void 0,function*(){return this.headers})},fetch:this.fetch})}}const Js={"X-Client-Info":`storage-js/${Uu}`,"Content-Type":"application/json"};class $u extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function et(t){return typeof t=="object"&&t!==null&&"__isStorageVectorsError"in t}class $i extends $u{constructor(e,r,n){super(e),this.name="StorageVectorsApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Cp extends $u{constructor(e,r){super(e),this.name="StorageVectorsUnknownError",this.originalError=r}}var ga;(function(t){t.InternalError="InternalError",t.S3VectorConflictException="S3VectorConflictException",t.S3VectorNotFoundException="S3VectorNotFoundException",t.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",t.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",t.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(ga||(ga={}));const Xs=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),Ap=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},va=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Ip=(t,e,r)=>re(void 0,void 0,void 0,function*(){if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!r?.noResolveJson){const i=t.status||500,s=t;if(typeof s.json=="function")s.json().then(o=>{const l=o?.statusCode||o?.code||i+"";e(new $i(va(o),i,l))}).catch(()=>{const o=i+"",l=s.statusText||`HTTP ${i} error`;e(new $i(l,i,o))});else{const o=i+"",l=s.statusText||`HTTP ${i} error`;e(new $i(l,i,o))}}else e(new Cp(va(t),t))}),jp=(t,e,r,n)=>{const i={method:t,headers:e?.headers||{}};return n?(Ap(n)?(i.headers=Object.assign({"Content-Type":"application/json"},e?.headers),i.body=JSON.stringify(n)):i.body=n,Object.assign(Object.assign({},i),r)):i};function Dp(t,e,r,n,i,s){return re(this,void 0,void 0,function*(){return new Promise((o,l)=>{t(r,jp(e,n,i,s)).then(a=>{if(!a.ok)throw a;if(n?.noResolveJson)return a;const u=a.headers.get("content-type");return!u||!u.includes("application/json")?{}:a.json()}).then(a=>o(a)).catch(a=>Ip(a,l,n))})})}function tt(t,e,r,n,i){return re(this,void 0,void 0,function*(){return Dp(t,"POST",e,n,i,r)})}class Lp{constructor(e,r={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Js),r),this.fetch=Xs(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(e){return re(this,void 0,void 0,function*(){try{return{data:(yield tt(this.fetch,`${this.url}/CreateIndex`,e,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(et(r))return{data:null,error:r};throw r}})}getIndex(e,r){return re(this,void 0,void 0,function*(){try{return{data:yield tt(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:e,indexName:r},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(et(n))return{data:null,error:n};throw n}})}listIndexes(e){return re(this,void 0,void 0,function*(){try{return{data:yield tt(this.fetch,`${this.url}/ListIndexes`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(et(r))return{data:null,error:r};throw r}})}deleteIndex(e,r){return re(this,void 0,void 0,function*(){try{return{data:(yield tt(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:e,indexName:r},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(et(n))return{data:null,error:n};throw n}})}}class Np{constructor(e,r={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Js),r),this.fetch=Xs(n)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(e){return re(this,void 0,void 0,function*(){try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield tt(this.fetch,`${this.url}/PutVectors`,e,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(et(r))return{data:null,error:r};throw r}})}getVectors(e){return re(this,void 0,void 0,function*(){try{return{data:yield tt(this.fetch,`${this.url}/GetVectors`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(et(r))return{data:null,error:r};throw r}})}listVectors(e){return re(this,void 0,void 0,function*(){try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:yield tt(this.fetch,`${this.url}/ListVectors`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(et(r))return{data:null,error:r};throw r}})}queryVectors(e){return re(this,void 0,void 0,function*(){try{return{data:yield tt(this.fetch,`${this.url}/QueryVectors`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(et(r))return{data:null,error:r};throw r}})}deleteVectors(e){return re(this,void 0,void 0,function*(){try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield tt(this.fetch,`${this.url}/DeleteVectors`,e,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(et(r))return{data:null,error:r};throw r}})}}class Fp{constructor(e,r={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Js),r),this.fetch=Xs(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return re(this,void 0,void 0,function*(){try{return{data:(yield tt(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(et(r))return{data:null,error:r};throw r}})}getBucket(e){return re(this,void 0,void 0,function*(){try{return{data:yield tt(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:e},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(et(r))return{data:null,error:r};throw r}})}listBuckets(){return re(this,arguments,void 0,function*(e={}){try{return{data:yield tt(this.fetch,`${this.url}/ListVectorBuckets`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(et(r))return{data:null,error:r};throw r}})}deleteBucket(e){return re(this,void 0,void 0,function*(){try{return{data:(yield tt(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(et(r))return{data:null,error:r};throw r}})}}class Up extends Fp{constructor(e,r={}){super(e,r.headers||{},r.fetch)}from(e){return new Mp(this.url,this.headers,e,this.fetch)}createBucket(e){const r=Object.create(null,{createBucket:{get:()=>super.createBucket}});return re(this,void 0,void 0,function*(){return r.createBucket.call(this,e)})}getBucket(e){const r=Object.create(null,{getBucket:{get:()=>super.getBucket}});return re(this,void 0,void 0,function*(){return r.getBucket.call(this,e)})}listBuckets(){const e=Object.create(null,{listBuckets:{get:()=>super.listBuckets}});return re(this,arguments,void 0,function*(r={}){return e.listBuckets.call(this,r)})}deleteBucket(e){const r=Object.create(null,{deleteBucket:{get:()=>super.deleteBucket}});return re(this,void 0,void 0,function*(){return r.deleteBucket.call(this,e)})}}class Mp extends Lp{constructor(e,r,n,i){super(e,r,i),this.vectorBucketName=n}createIndex(e){const r=Object.create(null,{createIndex:{get:()=>super.createIndex}});return re(this,void 0,void 0,function*(){return r.createIndex.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const e=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return re(this,arguments,void 0,function*(r={}){return e.listIndexes.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName}))})}getIndex(e){const r=Object.create(null,{getIndex:{get:()=>super.getIndex}});return re(this,void 0,void 0,function*(){return r.getIndex.call(this,this.vectorBucketName,e)})}deleteIndex(e){const r=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return re(this,void 0,void 0,function*(){return r.deleteIndex.call(this,this.vectorBucketName,e)})}index(e){return new $p(this.url,this.headers,this.vectorBucketName,e,this.fetch)}}class $p extends Np{constructor(e,r,n,i,s){super(e,r,s),this.vectorBucketName=n,this.indexName=i}putVectors(e){const r=Object.create(null,{putVectors:{get:()=>super.putVectors}});return re(this,void 0,void 0,function*(){return r.putVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(e){const r=Object.create(null,{getVectors:{get:()=>super.getVectors}});return re(this,void 0,void 0,function*(){return r.getVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const e=Object.create(null,{listVectors:{get:()=>super.listVectors}});return re(this,arguments,void 0,function*(r={}){return e.listVectors.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(e){const r=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return re(this,void 0,void 0,function*(){return r.queryVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(e){const r=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return re(this,void 0,void 0,function*(){return r.deleteVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class Bp extends Sp{constructor(e,r={},n,i){super(e,r,n,i)}from(e){return new wp(this.url,this.headers,e,this.fetch)}get vectors(){return new Up(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new Rp(this.url+"/iceberg",this.headers,this.fetch)}}const Vp="2.86.0";let Kr="";typeof Deno<"u"?Kr="deno":typeof document<"u"?Kr="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Kr="react-native":Kr="node";const qp={"X-Client-Info":`supabase-js-${Kr}/${Vp}`},Hp={headers:qp},Wp={schema:"public"},Kp={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},zp={},Gp=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),Jp=()=>Headers,Xp=(t,e,r)=>{const n=Gp(r),i=Jp();return async(s,o)=>{var l;const a=(l=await e())!==null&&l!==void 0?l:t;let u=new i(o?.headers);return u.has("apikey")||u.set("apikey",t),u.has("Authorization")||u.set("Authorization",`Bearer ${a}`),n(s,Object.assign(Object.assign({},o),{headers:u}))}};function Yp(t){return t.endsWith("/")?t:t+"/"}function Qp(t,e){var r,n;const{db:i,auth:s,realtime:o,global:l}=t,{db:a,auth:u,realtime:c,global:h}=e,y={db:Object.assign(Object.assign({},a),i),auth:Object.assign(Object.assign({},u),s),realtime:Object.assign(Object.assign({},c),o),storage:{},global:Object.assign(Object.assign(Object.assign({},h),l),{headers:Object.assign(Object.assign({},(r=h?.headers)!==null&&r!==void 0?r:{}),(n=l?.headers)!==null&&n!==void 0?n:{})}),accessToken:async()=>""};return t.accessToken?y.accessToken=t.accessToken:delete y.accessToken,y}function Zp(t){const e=t?.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(Yp(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const Bu="2.86.0",Tr=30*1e3,ys=3,Bi=ys*Tr,eg="http://localhost:9999",tg="supabase.auth.token",rg={"X-Client-Info":`gotrue-js/${Bu}`},_s="X-Supabase-Api-Version",Vu={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},ng=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,ig=600*1e3;class gn extends Error{constructor(e,r,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function ie(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class sg extends gn{constructor(e,r,n){super(e,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function og(t){return ie(t)&&t.name==="AuthApiError"}class sr extends gn{constructor(e,r){super(e),this.name="AuthUnknownError",this.originalError=r}}class zt extends gn{constructor(e,r,n,i){super(e,n,i),this.name=r,this.status=n}}class Qe extends zt{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function ag(t){return ie(t)&&t.name==="AuthSessionMissingError"}class vr extends zt{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class jn extends zt{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Dn extends zt{constructor(e,r=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function lg(t){return ie(t)&&t.name==="AuthImplicitGrantRedirectError"}class ma extends zt{constructor(e,r=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class bs extends zt{constructor(e,r){super(e,"AuthRetryableFetchError",r,void 0)}}function Vi(t){return ie(t)&&t.name==="AuthRetryableFetchError"}class ya extends zt{constructor(e,r,n){super(e,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class ws extends zt{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Zn="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),_a=` 	
\r=`.split(""),ug=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<_a.length;e+=1)t[_a[e].charCodeAt(0)]=-2;for(let e=0;e<Zn.length;e+=1)t[Zn[e].charCodeAt(0)]=e;return t})();function ba(t,e,r){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;r(Zn[n]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;r(Zn[n]),e.queuedBits-=6}}function qu(t,e,r){const n=ug[t];if(n>-1)for(e.queue=e.queue<<6|n,e.queuedBits+=6;e.queuedBits>=8;)r(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function wa(t){const e=[],r=o=>{e.push(String.fromCodePoint(o))},n={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},s=o=>{dg(o,n,r)};for(let o=0;o<t.length;o+=1)qu(t.charCodeAt(o),i,s);return e.join("")}function cg(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function hg(t,e){for(let r=0;r<t.length;r+=1){let n=t.charCodeAt(r);if(n>55295&&n<=56319){const i=(n-55296)*1024&65535;n=(t.charCodeAt(r+1)-56320&65535|i)+65536,r+=1}cg(n,e)}}function dg(t,e,r){if(e.utf8seq===0){if(t<=127){r(t);return}for(let n=1;n<6;n+=1)if((t>>7-n&1)===0){e.utf8seq=n;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&r(e.codepoint)}}function Ir(t){const e=[],r={queue:0,queuedBits:0},n=i=>{e.push(i)};for(let i=0;i<t.length;i+=1)qu(t.charCodeAt(i),r,n);return new Uint8Array(e)}function fg(t){const e=[];return hg(t,r=>e.push(r)),new Uint8Array(e)}function ar(t){const e=[],r={queue:0,queuedBits:0},n=i=>{e.push(i)};return t.forEach(i=>ba(i,r,n)),ba(null,r,n),e.join("")}function pg(t){return Math.round(Date.now()/1e3)+t}function gg(){return Symbol("auth-callback")}const Le=()=>typeof window<"u"&&typeof document<"u",Qt={tested:!1,writable:!1},Hu=()=>{if(!Le())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Qt.tested)return Qt.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Qt.tested=!0,Qt.writable=!0}catch{Qt.tested=!0,Qt.writable=!1}return Qt.writable};function vg(t){const e={},r=new URL(t);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((i,s)=>{e[s]=i})}catch{}return r.searchParams.forEach((n,i)=>{e[i]=n}),e}const Wu=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),mg=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",Er=async(t,e,r)=>{await t.setItem(e,JSON.stringify(r))},Zt=async(t,e)=>{const r=await t.getItem(e);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Ft=async(t,e)=>{await t.removeItem(e)};class _i{constructor(){this.promise=new _i.promiseConstructor((e,r)=>{this.resolve=e,this.reject=r})}}_i.promiseConstructor=Promise;function qi(t){const e=t.split(".");if(e.length!==3)throw new ws("Invalid JWT structure");for(let n=0;n<e.length;n++)if(!ng.test(e[n]))throw new ws("JWT not in base64url format");return{header:JSON.parse(wa(e[0])),payload:JSON.parse(wa(e[1])),signature:Ir(e[2]),raw:{header:e[0],payload:e[1]}}}async function yg(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function _g(t,e){return new Promise((n,i)=>{(async()=>{for(let s=0;s<1/0;s++)try{const o=await t(s);if(!e(s,null,o)){n(o);return}}catch(o){if(!e(s,o)){i(o);return}}})()})}function bg(t){return("0"+t.toString(16)).substr(-2)}function wg(){const e=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let i="";for(let s=0;s<56;s++)i+=r.charAt(Math.floor(Math.random()*n));return i}return crypto.getRandomValues(e),Array.from(e,bg).join("")}async function Sg(t){const r=new TextEncoder().encode(t),n=await crypto.subtle.digest("SHA-256",r),i=new Uint8Array(n);return Array.from(i).map(s=>String.fromCharCode(s)).join("")}async function Pg(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const r=await Sg(t);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function mr(t,e,r=!1){const n=wg();let i=n;r&&(i+="/PASSWORD_RECOVERY"),await Er(t,`${e}-code-verifier`,i);const s=await Pg(n);return[s,n===s?"plain":"s256"]}const Tg=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Eg(t){const e=t.headers.get(_s);if(!e||!e.match(Tg))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function kg(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function Og(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const xg=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function yr(t){if(!xg.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Hi(){const t={};return new Proxy(t,{get:(e,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Rg(t,e){return new Proxy(t,{get:(r,n,i)=>{if(n==="__isInsecureUserWarningProxy")return!0;if(typeof n=="symbol"){const s=n.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)"||s==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,n,i)}return!e.value&&typeof n=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(r,n,i)}})}function Sa(t){return JSON.parse(JSON.stringify(t))}const tr=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Cg=[502,503,504];async function Pa(t){var e;if(!mg(t))throw new bs(tr(t),0);if(Cg.includes(t.status))throw new bs(tr(t),t.status);let r;try{r=await t.json()}catch(s){throw new sr(tr(s),s)}let n;const i=Eg(t);if(i&&i.getTime()>=Vu["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new ya(tr(r),t.status,((e=r.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(n==="session_not_found")throw new Qe}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((s,o)=>s&&typeof o=="string",!0))throw new ya(tr(r),t.status,r.weak_password.reasons);throw new sg(tr(r),t.status||500,n)}const Ag=(t,e,r,n)=>{const i={method:t,headers:e?.headers||{}};return t==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e?.headers),i.body=JSON.stringify(n),Object.assign(Object.assign({},i),r))};async function ae(t,e,r,n){var i;const s=Object.assign({},n?.headers);s[_s]||(s[_s]=Vu["2024-01-01"].name),n?.jwt&&(s.Authorization=`Bearer ${n.jwt}`);const o=(i=n?.query)!==null&&i!==void 0?i:{};n?.redirectTo&&(o.redirect_to=n.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",a=await Ig(t,e,r+l,{headers:s,noResolveJson:n?.noResolveJson},{},n?.body);return n?.xform?n?.xform(a):{data:Object.assign({},a),error:null}}async function Ig(t,e,r,n,i,s){const o=Ag(e,n,i,s);let l;try{l=await t(r,Object.assign({},o))}catch(a){throw console.error(a),new bs(tr(a),0)}if(l.ok||await Pa(l),n?.noResolveJson)return l;try{return await l.json()}catch(a){await Pa(a)}}function at(t){var e;let r=null;Lg(t)&&(r=Object.assign({},t),t.expires_at||(r.expires_at=pg(t.expires_in)));const n=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:r,user:n},error:null}}function Ta(t){const e=at(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Vt(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function jg(t){return{data:t,error:null}}function Dg(t){const{action_link:e,email_otp:r,hashed_token:n,redirect_to:i,verification_type:s}=t,o=Mr(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:e,email_otp:r,hashed_token:n,redirect_to:i,verification_type:s},a=Object.assign({},o);return{data:{properties:l,user:a},error:null}}function Ea(t){return t}function Lg(t){return t.access_token&&t.refresh_token&&t.expires_in}const Wi=["global","local","others"];class Ng{constructor({url:e="",headers:r={},fetch:n}){this.url=e,this.headers=r,this.fetch=Wu(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,r=Wi[0]){if(Wi.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Wi.join(", ")}`);try{return await ae(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(ie(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,r={}){try{return await ae(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Vt})}catch(n){if(ie(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:r}=e,n=Mr(e,["options"]),i=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(i.new_email=n?.newEmail,delete i.newEmail),await ae(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:Dg,redirectTo:r?.redirectTo})}catch(r){if(ie(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(e){try{return await ae(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Vt})}catch(r){if(ie(r))return{data:{user:null},error:r};throw r}}async listUsers(e){var r,n,i,s,o,l,a;try{const u={nextPage:null,lastPage:0,total:0},c=await ae(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=e?.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(s=(i=e?.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:Ea});if(c.error)throw c.error;const h=await c.json(),y=(o=c.headers.get("x-total-count"))!==null&&o!==void 0?o:0,g=(a=(l=c.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&a!==void 0?a:[];return g.length>0&&(g.forEach(d=>{const f=parseInt(d.split(";")[0].split("=")[1].substring(0,1)),p=JSON.parse(d.split(";")[1].split("=")[1]);u[`${p}Page`]=f}),u.total=parseInt(y)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(ie(u))return{data:{users:[]},error:u};throw u}}async getUserById(e){yr(e);try{return await ae(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Vt})}catch(r){if(ie(r))return{data:{user:null},error:r};throw r}}async updateUserById(e,r){yr(e);try{return await ae(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:r,headers:this.headers,xform:Vt})}catch(n){if(ie(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,r=!1){yr(e);try{return await ae(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:r},xform:Vt})}catch(n){if(ie(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){yr(e.userId);try{const{data:r,error:n}=await ae(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:r,error:n}}catch(r){if(ie(r))return{data:null,error:r};throw r}}async _deleteFactor(e){yr(e.userId),yr(e.id);try{return{data:await ae(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(r){if(ie(r))return{data:null,error:r};throw r}}async _listOAuthClients(e){var r,n,i,s,o,l,a;try{const u={nextPage:null,lastPage:0,total:0},c=await ae(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=e?.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(s=(i=e?.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:Ea});if(c.error)throw c.error;const h=await c.json(),y=(o=c.headers.get("x-total-count"))!==null&&o!==void 0?o:0,g=(a=(l=c.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&a!==void 0?a:[];return g.length>0&&(g.forEach(d=>{const f=parseInt(d.split(";")[0].split("=")[1].substring(0,1)),p=JSON.parse(d.split(";")[1].split("=")[1]);u[`${p}Page`]=f}),u.total=parseInt(y)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(ie(u))return{data:{clients:[]},error:u};throw u}}async _createOAuthClient(e){try{return await ae(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(ie(r))return{data:null,error:r};throw r}}async _getOAuthClient(e){try{return await ae(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(ie(r))return{data:null,error:r};throw r}}async _updateOAuthClient(e,r){try{return await ae(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:r,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(ie(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(e){try{return await ae(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(ie(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(e){try{return await ae(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(ie(r))return{data:null,error:r};throw r}}}function ka(t={}){return{getItem:e=>t[e]||null,setItem:(e,r)=>{t[e]=r},removeItem:e=>{delete t[e]}}}const _r={debug:!!(globalThis&&Hu()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Ku extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Fg extends Ku{}async function Ug(t,e,r){_r.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const n=new globalThis.AbortController;return e>0&&setTimeout(()=>{n.abort(),_r.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async i=>{if(i){_r.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,i.name);try{return await r()}finally{_r.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,i.name)}}else{if(e===0)throw _r.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new Fg(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(_r.debug)try{const s=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function Mg(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function zu(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function $g(t){return parseInt(t,16)}function Bg(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,n=>n.toString(16).padStart(2,"0")).join("")}function Vg(t){var e;const{chainId:r,domain:n,expirationTime:i,issuedAt:s=new Date,nonce:o,notBefore:l,requestId:a,resources:u,scheme:c,uri:h,version:y}=t;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!h)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(y!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${y}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const g=zu(t.address),d=c?`${c}://${n}`:n,f=t.statement?`${t.statement}
`:"",p=`${d} wants you to sign in with your Ethereum account:
${g}

${f}`;let v=`URI: ${h}
Version: ${y}
Chain ID: ${r}${o?`
Nonce: ${o}`:""}
Issued At: ${s.toISOString()}`;if(i&&(v+=`
Expiration Time: ${i.toISOString()}`),l&&(v+=`
Not Before: ${l.toISOString()}`),a&&(v+=`
Request ID: ${a}`),u){let m=`
Resources:`;for(const b of u){if(!b||typeof b!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${b}`);m+=`
- ${b}`}v+=m}return`${p}
${v}`}class Ce extends Error{constructor({message:e,code:r,cause:n,name:i}){var s;super(e,{cause:n}),this.__isWebAuthnError=!0,this.name=(s=i??(n instanceof Error?n.name:void 0))!==null&&s!==void 0?s:"Unknown Error",this.code=r}}class ei extends Ce{constructor(e,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:e}),this.name="WebAuthnUnknownError",this.originalError=r}}function qg({error:t,options:e}){var r,n,i;const{publicKey:s}=e;if(!s)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Ce({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((r=s.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new Ce({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((n=s.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new Ce({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((i=s.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new Ce({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new Ce({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new Ce({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return s.pubKeyCredParams.filter(l=>l.type==="public-key").length===0?new Ce({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new Ce({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const o=window.location.hostname;if(Gu(o)){if(s.rp.id!==o)return new Ce({message:`The RP ID "${s.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new Ce({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(s.user.id.byteLength<1||s.user.id.byteLength>64)return new Ce({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new Ce({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new Ce({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function Hg({error:t,options:e}){const{publicKey:r}=e;if(!r)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Ce({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new Ce({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const n=window.location.hostname;if(Gu(n)){if(r.rpId!==n)return new Ce({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new Ce({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new Ce({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new Ce({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class Wg{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const Kg=new Wg;function zg(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:r,excludeCredentials:n}=t,i=Mr(t,["challenge","user","excludeCredentials"]),s=Ir(e).buffer,o=Object.assign(Object.assign({},r),{id:Ir(r.id).buffer}),l=Object.assign(Object.assign({},i),{challenge:s,user:o});if(n&&n.length>0){l.excludeCredentials=new Array(n.length);for(let a=0;a<n.length;a++){const u=n[a];l.excludeCredentials[a]=Object.assign(Object.assign({},u),{id:Ir(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return l}function Gg(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:r}=t,n=Mr(t,["challenge","allowCredentials"]),i=Ir(e).buffer,s=Object.assign(Object.assign({},n),{challenge:i});if(r&&r.length>0){s.allowCredentials=new Array(r.length);for(let o=0;o<r.length;o++){const l=r[o];s.allowCredentials[o]=Object.assign(Object.assign({},l),{id:Ir(l.id).buffer,type:l.type||"public-key",transports:l.transports})}}return s}function Jg(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const r=t;return{id:t.id,rawId:t.id,response:{attestationObject:ar(new Uint8Array(t.response.attestationObject)),clientDataJSON:ar(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=r.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function Xg(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const r=t,n=t.getClientExtensionResults(),i=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:ar(new Uint8Array(i.authenticatorData)),clientDataJSON:ar(new Uint8Array(i.clientDataJSON)),signature:ar(new Uint8Array(i.signature)),userHandle:i.userHandle?ar(new Uint8Array(i.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:(e=r.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function Gu(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function Oa(){var t,e;return!!(Le()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator?.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator?.credentials)===null||e===void 0?void 0:e.get)=="function")}async function Yg(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new ei("Browser returned unexpected credential type",e)}:{data:null,error:new ei("Empty credential response",e)}}catch(e){return{data:null,error:qg({error:e,options:t})}}}async function Qg(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new ei("Browser returned unexpected credential type",e)}:{data:null,error:new ei("Empty credential response",e)}}catch(e){return{data:null,error:Hg({error:e,options:t})}}}const Zg={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},ev={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function ti(...t){const e=i=>i!==null&&typeof i=="object"&&!Array.isArray(i),r=i=>i instanceof ArrayBuffer||ArrayBuffer.isView(i),n={};for(const i of t)if(i)for(const s in i){const o=i[s];if(o!==void 0)if(Array.isArray(o))n[s]=o;else if(r(o))n[s]=o;else if(e(o)){const l=n[s];e(l)?n[s]=ti(l,o):n[s]=ti(o)}else n[s]=o}return n}function tv(t,e){return ti(Zg,t,e||{})}function rv(t,e){return ti(ev,t,e||{})}class nv{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:r,friendlyName:n,signal:i},s){try{const{data:o,error:l}=await this.client.mfa.challenge({factorId:e,webauthn:r});if(!o)return{data:null,error:l};const a=i??Kg.createNewAbortSignal();if(o.webauthn.type==="create"){const{user:u}=o.webauthn.credential_options.publicKey;u.name||(u.name=`${u.id}:${n}`),u.displayName||(u.displayName=u.name)}switch(o.webauthn.type){case"create":{const u=tv(o.webauthn.credential_options.publicKey,s?.create),{data:c,error:h}=await Yg({publicKey:u,signal:a});return c?{data:{factorId:e,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:c}},error:null}:{data:null,error:h}}case"request":{const u=rv(o.webauthn.credential_options.publicKey,s?.request),{data:c,error:h}=await Qg(Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:u,signal:a}));return c?{data:{factorId:e,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:c}},error:null}:{data:null,error:h}}}}catch(o){return ie(o)?{data:null,error:o}:{data:null,error:new sr("Unexpected error in challenge",o)}}}async _verify({challengeId:e,factorId:r,webauthn:n}){return this.client.mfa.verify({factorId:r,challengeId:e,webauthn:n})}async _authenticate({factorId:e,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},s){if(!r)return{data:null,error:new gn("rpId is required for WebAuthn authentication")};try{if(!Oa())return{data:null,error:new sr("Browser does not support WebAuthn",null)};const{data:o,error:l}=await this.challenge({factorId:e,webauthn:{rpId:r,rpOrigins:n},signal:i},{request:s});if(!o)return{data:null,error:l};const{webauthn:a}=o;return this._verify({factorId:e,challengeId:o.challengeId,webauthn:{type:a.type,rpId:r,rpOrigins:n,credential_response:a.credential_response}})}catch(o){return ie(o)?{data:null,error:o}:{data:null,error:new sr("Unexpected error in authenticate",o)}}}async _register({friendlyName:e,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},s){if(!r)return{data:null,error:new gn("rpId is required for WebAuthn registration")};try{if(!Oa())return{data:null,error:new sr("Browser does not support WebAuthn",null)};const{data:o,error:l}=await this._enroll({friendlyName:e});if(!o)return await this.client.mfa.listFactors().then(c=>{var h;return(h=c.data)===null||h===void 0?void 0:h.all.find(y=>y.factor_type==="webauthn"&&y.friendly_name===e&&y.status!=="unverified")}).then(c=>c?this.client.mfa.unenroll({factorId:c?.id}):void 0),{data:null,error:l};const{data:a,error:u}=await this._challenge({factorId:o.id,friendlyName:o.friendly_name,webauthn:{rpId:r,rpOrigins:n},signal:i},{create:s});return a?this._verify({factorId:o.id,challengeId:a.challengeId,webauthn:{rpId:r,rpOrigins:n,type:a.webauthn.type,credential_response:a.webauthn.credential_response}}):{data:null,error:u}}catch(o){return ie(o)?{data:null,error:o}:{data:null,error:new sr("Unexpected error in register",o)}}}}Mg();const iv={url:eg,storageKey:tg,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:rg,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function xa(t,e,r){return await r()}const br={};class vn{get jwks(){var e,r;return(r=(e=br[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(e){br[this.storageKey]=Object.assign(Object.assign({},br[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,r;return(r=(e=br[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){br[this.storageKey]=Object.assign(Object.assign({},br[this.storageKey]),{cachedAt:e})}constructor(e){var r,n,i;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const s=Object.assign(Object.assign({},iv),e);if(this.storageKey=s.storageKey,this.instanceID=(r=vn.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,vn.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.instanceID>0&&Le()){const o=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(o),this.logDebugMessages&&console.trace(o)}if(this.persistSession=s.persistSession,this.autoRefreshToken=s.autoRefreshToken,this.admin=new Ng({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=Wu(s.fetch),this.lock=s.lock||xa,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,this.throwOnError=s.throwOnError,s.lock?this.lock=s.lock:Le()&&(!((n=globalThis?.navigator)===null||n===void 0)&&n.locks)?this.lock=Ug:this.lock=xa,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new nv(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:Hu()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=ka(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=ka(this.memoryStorage)),Le()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(i=this.broadcastChannel)===null||i===void 0||i.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${Bu}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let r={},n="none";if(Le()&&(r=vg(window.location.href),this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce")),Le()&&this.detectSessionInUrl&&n!=="none"){const{data:i,error:s}=await this._getSessionFromURL(r,n);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),lg(s)){const a=(e=s.details)===null||e===void 0?void 0:e.code;if(a==="identity_already_exists"||a==="identity_not_found"||a==="single_identity_not_deletable")return{error:s}}return await this._removeSession(),{error:s}}const{session:o,redirectType:l}=i;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return ie(r)?this._returnResult({error:r}):this._returnResult({error:new sr("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var r,n,i;try{const s=await ae(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=e?.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(i=e?.options)===null||i===void 0?void 0:i.captchaToken}},xform:at}),{data:o,error:l}=s;if(l||!o)return this._returnResult({data:{user:null,session:null},error:l});const a=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",a)),this._returnResult({data:{user:u,session:a},error:null})}catch(s){if(ie(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signUp(e){var r,n,i;try{let s;if("email"in e){const{email:c,password:h,options:y}=e;let g=null,d=null;this.flowType==="pkce"&&([g,d]=await mr(this.storage,this.storageKey)),s=await ae(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:y?.emailRedirectTo,body:{email:c,password:h,data:(r=y?.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:y?.captchaToken},code_challenge:g,code_challenge_method:d},xform:at})}else if("phone"in e){const{phone:c,password:h,options:y}=e;s=await ae(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:c,password:h,data:(n=y?.data)!==null&&n!==void 0?n:{},channel:(i=y?.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:y?.captchaToken}},xform:at})}else throw new jn("You must provide either an email or phone number and a password");const{data:o,error:l}=s;if(l||!o)return this._returnResult({data:{user:null,session:null},error:l});const a=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",a)),this._returnResult({data:{user:u,session:a},error:null})}catch(s){if(ie(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithPassword(e){try{let r;if("email"in e){const{email:s,password:o,options:l}=e;r=await ae(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:o,gotrue_meta_security:{captcha_token:l?.captchaToken}},xform:Ta})}else if("phone"in e){const{phone:s,password:o,options:l}=e;r=await ae(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:o,gotrue_meta_security:{captcha_token:l?.captchaToken}},xform:Ta})}else throw new jn("You must provide either an email or phone number and a password");const{data:n,error:i}=r;if(i)return this._returnResult({data:{user:null,session:null},error:i});if(!n||!n.session||!n.user){const s=new vr;return this._returnResult({data:{user:null,session:null},error:s})}return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),this._returnResult({data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:i})}catch(r){if(ie(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(e){var r,n,i,s;return await this._handleProviderSignIn(e.provider,{redirectTo:(r=e.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=e.options)===null||n===void 0?void 0:n.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(s=e.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:r}=e;switch(r){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(e){var r,n,i,s,o,l,a,u,c,h,y;let g,d;if("message"in e)g=e.message,d=e.signature;else{const{chain:f,wallet:p,statement:v,options:m}=e;let b;if(Le())if(typeof p=="object")b=p;else{const U=window;if("ethereum"in U&&typeof U.ethereum=="object"&&"request"in U.ethereum&&typeof U.ethereum.request=="function")b=U.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof p!="object"||!m?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");b=p}const _=new URL((r=m?.url)!==null&&r!==void 0?r:window.location.href),w=await b.request({method:"eth_requestAccounts"}).then(U=>U).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!w||w.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const P=zu(w[0]);let O=(n=m?.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!O){const U=await b.request({method:"eth_chainId"});O=$g(U)}const H={domain:_.host,address:P,statement:v,uri:_.href,version:"1",chainId:O,nonce:(i=m?.signInWithEthereum)===null||i===void 0?void 0:i.nonce,issuedAt:(o=(s=m?.signInWithEthereum)===null||s===void 0?void 0:s.issuedAt)!==null&&o!==void 0?o:new Date,expirationTime:(l=m?.signInWithEthereum)===null||l===void 0?void 0:l.expirationTime,notBefore:(a=m?.signInWithEthereum)===null||a===void 0?void 0:a.notBefore,requestId:(u=m?.signInWithEthereum)===null||u===void 0?void 0:u.requestId,resources:(c=m?.signInWithEthereum)===null||c===void 0?void 0:c.resources};g=Vg(H),d=await b.request({method:"personal_sign",params:[Bg(g),P]})}try{const{data:f,error:p}=await ae(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:g,signature:d},!((h=e.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(y=e.options)===null||y===void 0?void 0:y.captchaToken}}:null),xform:at});if(p)throw p;if(!f||!f.session||!f.user){const v=new vr;return this._returnResult({data:{user:null,session:null},error:v})}return f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",f.session)),this._returnResult({data:Object.assign({},f),error:p})}catch(f){if(ie(f))return this._returnResult({data:{user:null,session:null},error:f});throw f}}async signInWithSolana(e){var r,n,i,s,o,l,a,u,c,h,y,g;let d,f;if("message"in e)d=e.message,f=e.signature;else{const{chain:p,wallet:v,statement:m,options:b}=e;let _;if(Le())if(typeof v=="object")_=v;else{const P=window;if("solana"in P&&typeof P.solana=="object"&&("signIn"in P.solana&&typeof P.solana.signIn=="function"||"signMessage"in P.solana&&typeof P.solana.signMessage=="function"))_=P.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof v!="object"||!b?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");_=v}const w=new URL((r=b?.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in _&&_.signIn){const P=await _.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},b?.signInWithSolana),{version:"1",domain:w.host,uri:w.href}),m?{statement:m}:null));let O;if(Array.isArray(P)&&P[0]&&typeof P[0]=="object")O=P[0];else if(P&&typeof P=="object"&&"signedMessage"in P&&"signature"in P)O=P;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in O&&"signature"in O&&(typeof O.signedMessage=="string"||O.signedMessage instanceof Uint8Array)&&O.signature instanceof Uint8Array)d=typeof O.signedMessage=="string"?O.signedMessage:new TextDecoder().decode(O.signedMessage),f=O.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in _)||typeof _.signMessage!="function"||!("publicKey"in _)||typeof _!="object"||!_.publicKey||!("toBase58"in _.publicKey)||typeof _.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");d=[`${w.host} wants you to sign in with your Solana account:`,_.publicKey.toBase58(),...m?["",m,""]:[""],"Version: 1",`URI: ${w.href}`,`Issued At: ${(i=(n=b?.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((s=b?.signInWithSolana)===null||s===void 0)&&s.notBefore?[`Not Before: ${b.signInWithSolana.notBefore}`]:[],...!((o=b?.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${b.signInWithSolana.expirationTime}`]:[],...!((l=b?.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${b.signInWithSolana.chainId}`]:[],...!((a=b?.signInWithSolana)===null||a===void 0)&&a.nonce?[`Nonce: ${b.signInWithSolana.nonce}`]:[],...!((u=b?.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${b.signInWithSolana.requestId}`]:[],...!((h=(c=b?.signInWithSolana)===null||c===void 0?void 0:c.resources)===null||h===void 0)&&h.length?["Resources",...b.signInWithSolana.resources.map(O=>`- ${O}`)]:[]].join(`
`);const P=await _.signMessage(new TextEncoder().encode(d),"utf8");if(!P||!(P instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");f=P}}try{const{data:p,error:v}=await ae(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:d,signature:ar(f)},!((y=e.options)===null||y===void 0)&&y.captchaToken?{gotrue_meta_security:{captcha_token:(g=e.options)===null||g===void 0?void 0:g.captchaToken}}:null),xform:at});if(v)throw v;if(!p||!p.session||!p.user){const m=new vr;return this._returnResult({data:{user:null,session:null},error:m})}return p.session&&(await this._saveSession(p.session),await this._notifyAllSubscribers("SIGNED_IN",p.session)),this._returnResult({data:Object.assign({},p),error:v})}catch(p){if(ie(p))return this._returnResult({data:{user:null,session:null},error:p});throw p}}async _exchangeCodeForSession(e){const r=await Zt(this.storage,`${this.storageKey}-code-verifier`),[n,i]=(r??"").split("/");try{const{data:s,error:o}=await ae(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:at});if(await Ft(this.storage,`${this.storageKey}-code-verifier`),o)throw o;if(!s||!s.session||!s.user){const l=new vr;return this._returnResult({data:{user:null,session:null,redirectType:null},error:l})}return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),this._returnResult({data:Object.assign(Object.assign({},s),{redirectType:i??null}),error:o})}catch(s){if(ie(s))return this._returnResult({data:{user:null,session:null,redirectType:null},error:s});throw s}}async signInWithIdToken(e){try{const{options:r,provider:n,token:i,access_token:s,nonce:o}=e,l=await ae(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:i,access_token:s,nonce:o,gotrue_meta_security:{captcha_token:r?.captchaToken}},xform:at}),{data:a,error:u}=l;if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!a||!a.session||!a.user){const c=new vr;return this._returnResult({data:{user:null,session:null},error:c})}return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),this._returnResult({data:a,error:u})}catch(r){if(ie(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(e){var r,n,i,s,o;try{if("email"in e){const{email:l,options:a}=e;let u=null,c=null;this.flowType==="pkce"&&([u,c]=await mr(this.storage,this.storageKey));const{error:h}=await ae(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=a?.data)!==null&&r!==void 0?r:{},create_user:(n=a?.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:a?.captchaToken},code_challenge:u,code_challenge_method:c},redirectTo:a?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:h})}if("phone"in e){const{phone:l,options:a}=e,{data:u,error:c}=await ae(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(i=a?.data)!==null&&i!==void 0?i:{},create_user:(s=a?.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:a?.captchaToken},channel:(o=a?.channel)!==null&&o!==void 0?o:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:u?.message_id},error:c})}throw new jn("You must provide either an email or phone number.")}catch(l){if(ie(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async verifyOtp(e){var r,n;try{let i,s;"options"in e&&(i=(r=e.options)===null||r===void 0?void 0:r.redirectTo,s=(n=e.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:l}=await ae(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:s}}),redirectTo:i,xform:at});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const a=o.session,u=o.user;return a?.access_token&&(await this._saveSession(a),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",a)),this._returnResult({data:{user:u,session:a},error:null})}catch(i){if(ie(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithSSO(e){var r,n,i,s,o;try{let l=null,a=null;this.flowType==="pkce"&&([l,a]=await mr(this.storage,this.storageKey));const u=await ae(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(n=(r=e.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((i=e?.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:l,code_challenge_method:a}),headers:this.headers,xform:jg});return!((s=u.data)===null||s===void 0)&&s.url&&Le()&&!(!((o=e.options)===null||o===void 0)&&o.skipBrowserRedirect)&&window.location.assign(u.data.url),this._returnResult(u)}catch(l){if(ie(l))return this._returnResult({data:null,error:l});throw l}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:r},error:n}=e;if(n)throw n;if(!r)throw new Qe;const{error:i}=await ae(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:i})})}catch(e){if(ie(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const r=`${this.url}/resend`;if("email"in e){const{email:n,type:i,options:s}=e,{error:o}=await ae(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:i,gotrue_meta_security:{captcha_token:s?.captchaToken}},redirectTo:s?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:o})}else if("phone"in e){const{phone:n,type:i,options:s}=e,{data:o,error:l}=await ae(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:i,gotrue_meta_security:{captcha_token:s?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:o?.message_id},error:l})}throw new jn("You must provide either an email or phone number and a type")}catch(r){if(ie(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(e,r){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await e(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const r=await Zt(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?e=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=e.expires_at?e.expires_at*1e3-Date.now()<Bi:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.userStorage){const o=await Zt(this.userStorage,this.storageKey+"-user");o?.user?e.user=o.user:e.user=Hi()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const o={value:this.suppressGetSessionWarning};e.user=Rg(e.user,o),o.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:i,error:s}=await this._callRefreshToken(e.refresh_token);return s?this._returnResult({data:{session:null},error:s}):this._returnResult({data:{session:i},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await ae(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Vt}):await this._useSession(async r=>{var n,i,s;const{data:o,error:l}=r;if(l)throw l;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Qe}:await ae(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(s=(i=o.session)===null||i===void 0?void 0:i.access_token)!==null&&s!==void 0?s:void 0,xform:Vt})})}catch(r){if(ie(r))return ag(r)&&(await this._removeSession(),await Ft(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(e,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,r))}async _updateUser(e,r={}){try{return await this._useSession(async n=>{const{data:i,error:s}=n;if(s)throw s;if(!i.session)throw new Qe;const o=i.session;let l=null,a=null;this.flowType==="pkce"&&e.email!=null&&([l,a]=await mr(this.storage,this.storageKey));const{data:u,error:c}=await ae(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r?.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:l,code_challenge_method:a}),jwt:o.access_token,xform:Vt});if(c)throw c;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),this._returnResult({data:{user:o.user},error:null})})}catch(n){if(ie(n))return this._returnResult({data:{user:null},error:n});throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Qe;const r=Date.now()/1e3;let n=r,i=!0,s=null;const{payload:o}=qi(e.access_token);if(o.exp&&(n=o.exp,i=n<=r),i){const{data:l,error:a}=await this._callRefreshToken(e.refresh_token);if(a)return this._returnResult({data:{user:null,session:null},error:a});if(!l)return{data:{user:null,session:null},error:null};s=l}else{const{data:l,error:a}=await this._getUser(e.access_token);if(a)throw a;s={access_token:e.access_token,refresh_token:e.refresh_token,user:l.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return this._returnResult({data:{user:s.user,session:s},error:null})}catch(r){if(ie(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async r=>{var n;if(!e){const{data:o,error:l}=r;if(l)throw l;e=(n=o.session)!==null&&n!==void 0?n:void 0}if(!e?.refresh_token)throw new Qe;const{data:i,error:s}=await this._callRefreshToken(e.refresh_token);return s?this._returnResult({data:{user:null,session:null},error:s}):i?this._returnResult({data:{user:i.user,session:i},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(ie(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(e,r){try{if(!Le())throw new Dn("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Dn(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new ma("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Dn("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new ma("No code detected.");const{data:m,error:b}=await this._exchangeCodeForSession(e.code);if(b)throw b;const _=new URL(window.location.href);return _.searchParams.delete("code"),window.history.replaceState(window.history.state,"",_.toString()),{data:{session:m.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:i,access_token:s,refresh_token:o,expires_in:l,expires_at:a,token_type:u}=e;if(!s||!l||!o||!u)throw new Dn("No session defined in URL");const c=Math.round(Date.now()/1e3),h=parseInt(l);let y=c+h;a&&(y=parseInt(a));const g=y-c;g*1e3<=Tr&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${g}s, should have been closer to ${h}s`);const d=y-h;c-d>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",d,y,c):c-d<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",d,y,c);const{data:f,error:p}=await this._getUser(s);if(p)throw p;const v={provider_token:n,provider_refresh_token:i,access_token:s,expires_in:h,expires_at:y,refresh_token:o,token_type:u,user:f.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:v,redirectType:e.type},error:null})}catch(n){if(ie(n))return this._returnResult({data:{session:null,redirectType:null},error:n});throw n}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const r=await Zt(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&r)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:i,error:s}=r;if(s)return this._returnResult({error:s});const o=(n=i.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:l}=await this.admin.signOut(o,e);if(l&&!(og(l)&&(l.status===404||l.status===401||l.status===403)))return this._returnResult({error:l})}return e!=="others"&&(await this._removeSession(),await Ft(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const r=gg(),n={id:r,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async r=>{var n,i;try{const{data:{session:s},error:o}=r;if(o)throw o;await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",e,"session",s)}catch(s){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",s),console.error(s)}})}async resetPasswordForEmail(e,r={}){let n=null,i=null;this.flowType==="pkce"&&([n,i]=await mr(this.storage,this.storageKey,!0));try{return await ae(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:i,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(s){if(ie(s))return this._returnResult({data:null,error:s});throw s}}async getUserIdentities(){var e;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return this._returnResult({data:{identities:(e=r.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(r){if(ie(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var r;try{const{data:n,error:i}=await this._useSession(async s=>{var o,l,a,u,c;const{data:h,error:y}=s;if(y)throw y;const g=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=e.options)===null||l===void 0?void 0:l.scopes,queryParams:(a=e.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:!0});return await ae(this.fetch,"GET",g,{headers:this.headers,jwt:(c=(u=h.session)===null||u===void 0?void 0:u.access_token)!==null&&c!==void 0?c:void 0})});if(i)throw i;return Le()&&!(!((r=e.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n?.url),this._returnResult({data:{provider:e.provider,url:n?.url},error:null})}catch(n){if(ie(n))return this._returnResult({data:{provider:e.provider,url:null},error:n});throw n}}async linkIdentityIdToken(e){return await this._useSession(async r=>{var n;try{const{error:i,data:{session:s}}=r;if(i)throw i;const{options:o,provider:l,token:a,access_token:u,nonce:c}=e,h=await ae(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=s?.access_token)!==null&&n!==void 0?n:void 0,body:{provider:l,id_token:a,access_token:u,nonce:c,link_identity:!0,gotrue_meta_security:{captcha_token:o?.captchaToken}},xform:at}),{data:y,error:g}=h;return g?this._returnResult({data:{user:null,session:null},error:g}):!y||!y.session||!y.user?this._returnResult({data:{user:null,session:null},error:new vr}):(y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("USER_UPDATED",y.session)),this._returnResult({data:y,error:g}))}catch(i){if(ie(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}})}async unlinkIdentity(e){try{return await this._useSession(async r=>{var n,i;const{data:s,error:o}=r;if(o)throw o;return await ae(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(n=s.session)===null||n===void 0?void 0:n.access_token)!==null&&i!==void 0?i:void 0})})}catch(r){if(ie(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(e){const r=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await _g(async i=>(i>0&&await yg(200*Math.pow(2,i-1)),this._debug(r,"refreshing attempt",i),await ae(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:at})),(i,s)=>{const o=200*Math.pow(2,i);return s&&Vi(s)&&Date.now()+o-n<Tr})}catch(n){if(this._debug(r,"error",n),ie(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}finally{this._debug(r,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",r,"url",n),Le()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const i=await Zt(this.storage,this.storageKey);if(i&&this.userStorage){let o=await Zt(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:i.user},await Er(this.userStorage,this.storageKey+"-user",o)),i.user=(e=o?.user)!==null&&e!==void 0?e:Hi()}else if(i&&!i.user&&!i.user){const o=await Zt(this.storage,this.storageKey+"-user");o&&o?.user?(i.user=o.user,await Ft(this.storage,this.storageKey+"-user"),await Er(this.storage,this.storageKey,i)):i.user=Hi()}if(this._debug(n,"session from storage",i),!this._isValidSession(i)){this._debug(n,"session is not valid"),i!==null&&await this._removeSession();return}const s=((r=i.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<Bi;if(this._debug(n,`session has${s?"":" not"} expired with margin of ${Bi}s`),s){if(this.autoRefreshToken&&i.refresh_token){const{error:o}=await this._callRefreshToken(i.refresh_token);o&&(console.error(o),Vi(o)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:l}=await this._getUser(i.access_token);!l&&o?.user?(i.user=o.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(n,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(n,"error",i),console.error(i);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var r,n;if(!e)throw new Qe;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new _i;const{data:s,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!s.session)throw new Qe;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);const l={data:s.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(s){if(this._debug(i,"error",s),ie(s)){const o={data:null,error:s};return Vi(s)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(s),s}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,r,n=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:r});const s=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(e,r)}catch(a){s.push(a)}});if(await Promise.all(o),s.length>0){for(let l=0;l<s.length;l+=1)console.error(s[l]);throw s[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const r=Object.assign({},e),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await Er(this.userStorage,this.storageKey+"-user",{user:r.user});const i=Object.assign({},r);delete i.user;const s=Sa(i);await Er(this.storage,this.storageKey,s)}else{const i=Sa(r);await Er(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),await Ft(this.storage,this.storageKey),await Ft(this.storage,this.storageKey+"-code-verifier"),await Ft(this.storage,this.storageKey+"-user"),this.userStorage&&await Ft(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Le()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Tr);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((n.expires_at*1e3-e)/Tr);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${Tr}ms, refresh threshold is ${ys} ticks`),i<=ys&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Ku)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Le()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const r=`#_onVisibilityChanged(${e})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,r,n){const i=[`provider=${encodeURIComponent(r)}`];if(n?.redirectTo&&i.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n?.scopes&&i.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[s,o]=await mr(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(o)}`});i.push(l.toString())}if(n?.queryParams){const s=new URLSearchParams(n.queryParams);i.push(s.toString())}return n?.skipBrowserRedirect&&i.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async r=>{var n;const{data:i,error:s}=r;return s?this._returnResult({data:null,error:s}):await ae(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(n=i?.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(ie(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(e){try{return await this._useSession(async r=>{var n,i;const{data:s,error:o}=r;if(o)return this._returnResult({data:null,error:o});const l=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:a,error:u}=await ae(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(n=s?.session)===null||n===void 0?void 0:n.access_token});return u?this._returnResult({data:null,error:u}):(e.factorType==="totp"&&a.type==="totp"&&(!((i=a?.totp)===null||i===void 0)&&i.qr_code)&&(a.totp.qr_code=`data:image/svg+xml;utf-8,${a.totp.qr_code}`),this._returnResult({data:a,error:null}))})}catch(r){if(ie(r))return this._returnResult({data:null,error:r});throw r}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:i,error:s}=r;if(s)return this._returnResult({data:null,error:s});const o=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?Jg(e.webauthn.credential_response):Xg(e.webauthn.credential_response)})}:{code:e.code}),{data:l,error:a}=await ae(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:o,headers:this.headers,jwt:(n=i?.session)===null||n===void 0?void 0:n.access_token});return a?this._returnResult({data:null,error:a}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),this._returnResult({data:l,error:a}))})}catch(r){if(ie(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:i,error:s}=r;if(s)return this._returnResult({data:null,error:s});const o=await ae(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(n=i?.session)===null||n===void 0?void 0:n.access_token});if(o.error)return o;const{data:l}=o;if(l.type!=="webauthn")return{data:l,error:null};switch(l.webauthn.type){case"create":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:zg(l.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:Gg(l.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(ie(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(e){const{data:r,error:n}=await this._challenge({factorId:e.factorId});return n?this._returnResult({data:null,error:n}):await this._verify({factorId:e.factorId,challengeId:r.id,code:e.code})}async _listFactors(){var e;const{data:{user:r},error:n}=await this.getUser();if(n)return{data:null,error:n};const i={all:[],phone:[],totp:[],webauthn:[]};for(const s of(e=r?.factors)!==null&&e!==void 0?e:[])i.all.push(s),s.status==="verified"&&i[s.factor_type].push(s);return{data:i,error:null}}async _getAuthenticatorAssuranceLevel(){var e,r;const{data:{session:n},error:i}=await this.getSession();if(i)return this._returnResult({data:null,error:i});if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:s}=qi(n.access_token);let o=null;s.aal&&(o=s.aal);let l=o;((r=(e=n.user.factors)===null||e===void 0?void 0:e.filter(c=>c.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(l="aal2");const u=s.amr||[];return{data:{currentLevel:o,nextLevel:l,currentAuthenticationMethods:u},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async r=>{const{data:{session:n},error:i}=r;return i?this._returnResult({data:null,error:i}):n?await ae(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:n.access_token,xform:s=>({data:s,error:null})}):this._returnResult({data:null,error:new Qe})})}catch(r){if(ie(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(e,r){try{return await this._useSession(async n=>{const{data:{session:i},error:s}=n;if(s)return this._returnResult({data:null,error:s});if(!i)return this._returnResult({data:null,error:new Qe});const o=await ae(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"approve"},xform:l=>({data:l,error:null})});return o.data&&o.data.redirect_url&&Le()&&!r?.skipBrowserRedirect&&window.location.assign(o.data.redirect_url),o})}catch(n){if(ie(n))return this._returnResult({data:null,error:n});throw n}}async _denyAuthorization(e,r){try{return await this._useSession(async n=>{const{data:{session:i},error:s}=n;if(s)return this._returnResult({data:null,error:s});if(!i)return this._returnResult({data:null,error:new Qe});const o=await ae(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"deny"},xform:l=>({data:l,error:null})});return o.data&&o.data.redirect_url&&Le()&&!r?.skipBrowserRedirect&&window.location.assign(o.data.redirect_url),o})}catch(n){if(ie(n))return this._returnResult({data:null,error:n});throw n}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:r},error:n}=e;return n?this._returnResult({data:null,error:n}):r?await ae(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new Qe})})}catch(e){if(ie(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async r=>{const{data:{session:n},error:i}=r;return i?this._returnResult({data:null,error:i}):n?(await ae(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Qe})})}catch(r){if(ie(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(e,r={keys:[]}){let n=r.keys.find(l=>l.kid===e);if(n)return n;const i=Date.now();if(n=this.jwks.keys.find(l=>l.kid===e),n&&this.jwks_cached_at+ig>i)return n;const{data:s,error:o}=await ae(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!s.keys||s.keys.length===0||(this.jwks=s,this.jwks_cached_at=i,n=s.keys.find(l=>l.kid===e),!n)?null:n}async getClaims(e,r={}){try{let n=e;if(!n){const{data:g,error:d}=await this.getSession();if(d||!g.session)return this._returnResult({data:null,error:d});n=g.session.access_token}const{header:i,payload:s,signature:o,raw:{header:l,payload:a}}=qi(n);r?.allowExpired||kg(s.exp);const u=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,r?.keys?{keys:r.keys}:r?.jwks);if(!u){const{error:g}=await this.getUser(n);if(g)throw g;return{data:{claims:s,header:i,signature:o},error:null}}const c=Og(i.alg),h=await crypto.subtle.importKey("jwk",u,c,!0,["verify"]);if(!await crypto.subtle.verify(c,h,o,fg(`${l}.${a}`)))throw new ws("Invalid JWT signature");return{data:{claims:s,header:i,signature:o},error:null}}catch(n){if(ie(n))return this._returnResult({data:null,error:n});throw n}}}vn.nextInstanceID={};const sv=vn;class ov extends sv{constructor(e){super(e)}}class av{constructor(e,r,n){var i,s,o;this.supabaseUrl=e,this.supabaseKey=r;const l=Zp(e);if(!r)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const a=`sb-${l.hostname.split(".")[0]}-auth-token`,u={db:Wp,realtime:zp,auth:Object.assign(Object.assign({},Kp),{storageKey:a}),global:Hp},c=Qp(n??{},u);this.storageKey=(i=c.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(s=c.global.headers)!==null&&s!==void 0?s:{},c.accessToken?(this.accessToken=c.accessToken,this.auth=new Proxy({},{get:(h,y)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(y)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=c.auth)!==null&&o!==void 0?o:{},this.headers,c.global.fetch),this.fetch=Xp(r,this._getAccessToken.bind(this),c.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},c.realtime)),this.accessToken&&this.accessToken().then(h=>this.realtime.setAuth(h)).catch(h=>console.warn("Failed to set initial Realtime auth token:",h)),this.rest=new zf(new URL("rest/v1",l).href,{headers:this.headers,schema:c.db.schema,fetch:this.fetch}),this.storage=new Bp(this.storageUrl.href,this.headers,this.fetch,n?.storage),c.accessToken||this._listenForAuthEvents()}get functions(){return new Bf(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,r={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,r,n)}channel(e,r={config:{}}){return this.realtime.channel(e,r)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e,r;if(this.accessToken)return await this.accessToken();const{data:n}=await this.auth.getSession();return(r=(e=n.session)===null||e===void 0?void 0:e.access_token)!==null&&r!==void 0?r:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:r,detectSessionInUrl:n,storage:i,userStorage:s,storageKey:o,flowType:l,lock:a,debug:u,throwOnError:c},h,y){const g={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new ov({url:this.authUrl.href,headers:Object.assign(Object.assign({},g),h),storageKey:o,autoRefreshToken:e,persistSession:r,detectSessionInUrl:n,storage:i,userStorage:s,flowType:l,lock:a,debug:u,throwOnError:c,fetch:y,hasCustomAuthorizationHeader:Object.keys(this.headers).some(d=>d.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new cp(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n?.access_token)})}_handleTokenChanged(e,r,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const lv=(t,e,r)=>new av(t,e,r);function uv(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}uv()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const cv="https://owwuimemjzgxvnpdfqrp.supabase.co",hv="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im93d3VpbWVtanpneHZucGRmcXJwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQ4MTUzNjUsImV4cCI6MjA4MDM5MTM2NX0.I4n1218a1qsoSRBZ5QCiGaZFRn_8jZd3OQzFQ8h9uvM",Xe=lv(cv,hv),dv={class:"scroll-container"},fv=["onClick"],pv={class:"content"},gv=["onClick"],vv=["src","poster"],mv={class:"modal"},yv={class:"form-group"},_v={class:"form-group"},bv={class:"form-group"},wv={key:0,class:"hint"},Sv={class:"modal-actions"},Pv=["disabled"],Tv=["disabled"],Ev={__name:"HomeView",setup(t){const e=Vs(),n=Re([{id:1,title:"",subtitle:"",actionText:"",videoUrl:"https://www.xiqianyangyi.com/imgs23/videos/fazitianran.mp4",poster:"https://www.xiqianyangyi.com/imgs23/videos/fazitianran-cover.png"},{id:2,title:"",subtitle:"",actionText:"",videoUrl:"https://www.xiqianyangyi.com/imgs23/videos/fazitianran.mp4",poster:"https://www.xiqianyangyi.com/imgs23/videos/fazitianran-cover.png"},{id:4,title:"",subtitle:"",actionText:"",videoUrl:"https://www.xiqianyangyi.com/imgs23/videos/fazitianran.mp4",poster:"https://www.xiqianyangyi.com/imgs23/videos/fazitianran-cover.png"},{id:3,title:"",subtitle:"",actionText:"",videoUrl:"https://www.xiqianyangyi.com/imgs23/videos/fazitianran.mp4",poster:"https://www.xiqianyangyi.com/imgs23/videos/fazitianran-cover.png"}]);fr(async()=>{const{data:d,error:f}=await Xe.from("home_sections").select("*").order("id",{ascending:!0});if(f){console.error("Error fetching sections:",f);return}if(d&&d.length>0){const p=d.map(m=>({id:m.id,title:m.title,subtitle:m.subtitle,actionText:m.action_text,videoUrl:m.video_url,poster:m.poster})),v=[1,2,4,3];p.sort((m,b)=>v.indexOf(m.id)-v.indexOf(b.id)),n.value=p}});const i=d=>{e.push(`/detail/${d}`)},s=Re(!1),o=Re(null),l=Re(!1),a=Re(null),u=Ht({title:"",subtitle:"",videoUrl:""}),c=d=>{o.value=d.id,u.title=d.title,u.subtitle=d.subtitle,u.videoUrl=d.videoUrl,a.value=null,s.value=!0},h=()=>{s.value=!1,o.value=null},y=d=>{const f=d.target.files[0];f&&(a.value=f)},g=async()=>{if(o.value){l.value=!0;try{let d=u.videoUrl;if(a.value){const v=a.value,m=v.name.split(".").pop(),b=`videos/section-${o.value}-${Date.now()}.${m}`,{error:_}=await Xe.storage.from("tape-assets").upload(b,v);if(_)throw _;const{data:{publicUrl:w}}=Xe.storage.from("tape-assets").getPublicUrl(b);d=w}const{error:f}=await Xe.from("home_sections").update({title:u.title,subtitle:u.subtitle,video_url:d}).eq("id",o.value);if(f)throw f;const p=n.value.findIndex(v=>v.id===o.value);p!==-1&&(n.value[p].title=u.title,n.value[p].subtitle=u.subtitle,n.value[p].videoUrl=d),h()}catch(d){console.error(d),alert("Failed to save settings: "+d.message)}finally{l.value=!1}}};return(d,f)=>(de(),ge("div",dv,[(de(!0),ge(He,null,Hn(n.value,p=>(de(),ge("section",{key:p.id,class:"section"},[j("div",{class:"settings-btn",onClick:Xn(v=>c(p),["stop"])},[...f[2]||(f[2]=[j("svg",{viewBox:"0 0 24 24",width:"24",height:"24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[j("circle",{cx:"12",cy:"12",r:"3"}),j("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"})],-1)])],8,fv),j("div",pv,[j("h1",null,Ne(p.title),1),j("div",{class:"videoWrapper___XGPv0",onClick:v=>i(p.id)},[f[3]||(f[3]=j("div",{class:"fazi___2Kd-r"},null,-1)),f[4]||(f[4]=j("div",{class:"tianran___vnish"},null,-1)),j("video",{src:p.videoUrl,loop:"",muted:"",autoplay:"",class:"video___1hJEZ","x5-playsinline":"true",playsinline:"","webkit-playsinline":"true","x-webkit-airplay":"true","x5-video-orientation":"portraint",poster:p.poster},null,8,vv)],8,gv),j("p",null,Ne(p.subtitle),1)])]))),128)),s.value?(de(),ge("div",{key:0,class:"modal-overlay",onClick:Xn(h,["self"])},[j("div",mv,[f[8]||(f[8]=j("h2",null,"",-1)),j("div",yv,[f[5]||(f[5]=j("label",null,"",-1)),Rr(j("input",{"onUpdate:modelValue":f[0]||(f[0]=p=>u.title=p),type:"text"},null,512),[[Ar,u.title]])]),j("div",_v,[f[6]||(f[6]=j("label",null,"",-1)),Rr(j("input",{"onUpdate:modelValue":f[1]||(f[1]=p=>u.subtitle=p),type:"text"},null,512),[[Ar,u.subtitle]])]),j("div",bv,[f[7]||(f[7]=j("label",null,"",-1)),j("input",{type:"file",accept:"video/*",onChange:y},null,32),u.videoUrl&&!a.value?(de(),ge("p",wv,": "+Ne(u.videoUrl.substring(0,30))+"...",1)):ct("",!0)]),j("div",Sv,[j("button",{class:"cancel-btn",onClick:h,disabled:l.value},"",8,Pv),j("button",{class:"save-btn",onClick:g,disabled:l.value},Ne(l.value?"...":""),9,Tv)])])])):ct("",!0)]))}},kv=Ur(Ev,[["__scopeId","data-v-22ea843f"]]);var Mn={exports:{}};var Ov=Mn.exports,Ra;function xv(){return Ra||(Ra=1,(function(t,e){(function(r,n){t.exports=n()})(Ov,function(){return(function(r){function n(s){if(i[s])return i[s].exports;var o=i[s]={i:s,l:!1,exports:{}};return r[s].call(o.exports,o,o.exports,n),o.l=!0,o.exports}var i={};return n.m=r,n.c=i,n.i=function(s){return s},n.d=function(s,o,l){n.o(s,o)||Object.defineProperty(s,o,{configurable:!1,enumerable:!0,get:l})},n.n=function(s){var o=s&&s.__esModule?function(){return s.default}:function(){return s};return n.d(o,"a",o),o},n.o=function(s,o){return Object.prototype.hasOwnProperty.call(s,o)},n.p="",n(n.s=25)})([function(r,n,i){function s(S){if(S){var k=S.staticMembers;k&&o.call(this,k),o.call(this.prototype,S)}}function o(S){for(var k in S)if(S.hasOwnProperty(k)&&k!=="staticMembers"){var R=Object.getOwnPropertyDescriptor(S,k);R.get||R.set?Object.defineProperty(this,k,R):l.call(this,k,S[k])}}function l(S,k){var R=this[S];return R instanceof Function&&k instanceof Function?a.call(this,S,k,R):A.instanceOrKindOf(k,A.Metadata)?u.call(this,S,k):void(this[S]=k)}function a(S,k,R){this[S]=function(){var q=this._super;this._super=R;var Y=k.apply(this,arguments);return this._super=q,Y}}function u(S,k){this.hasOwnProperty("_metadatas")||(this._metadatas=Object.create(this._metadatas)),(k.isLPKClass?k.sharedInstance:k).registerOnDefinition(this,S)}function c(S){var k=this["_callbacksFor_"+S];if(k){var R=void 0;if(arguments.length>1){R=A.arrayPool.get();for(var q=1,Y=arguments.length;q<Y;q++)R[q-1]=arguments[q]}var Z=void 0;if(Z=this._triggerPauseStack){var ee=Z[Z.length-1];if(ee[ee.length-1]!=="IS_FLUSHING")return void ee.push(this,S,R)}for(var X=0,pe=k.length;X<pe;X++){var ue=k[X];ue&&ue.apply(this,R)}R&&A.arrayPool.ret(R)}}function h(S,k){if(S.indexOf(".")!==-1)return g.call(this,S,k);var R="_callbackToIndexMapFor_"+S,q=this.hasOwnProperty(R)?this[R]:this[R]=this[R]?new x.a(this[R]):new x.a;if(q.get(k)===void 0){var Y="_callbacksFor_"+S,Z=this.hasOwnProperty(Y)?this[Y]:this[Y]=this[Y]?this[Y].slice():[];q.set(k,Z.length),Z.push(k)}}function y(S,k){if(S.indexOf(".")!==-1)return d.call(this,S,k);var R="_callbackToIndexMapFor_"+S,q=this[R];if(q&&q.get(k)!==void 0){var Y=this.hasOwnProperty(R)?this[R]:this[R]=this[R]?new x.a(this[R]):new x.a,Z="_callbacksFor_"+S;(this.hasOwnProperty(Z)?this[Z]:this[Z]=this[Z]?this[Z].slice():[])[Y.get(k)]=null,Y.delete(k)}}function g(S,k,R){var q="_"+S+"_"+A.guidFor(k)+"_"+A.guidFor(R),Y="_chainListenerMaintenanceCallback_for"+q;if(!this[Y]){var Z=S.indexOf("."),ee=Z!==-1,X=S.substring(Z+1),pe=X.substring(0,(X.indexOf(".")+1||X.length+1)-1),ue=S.substring(0,Z===-1?S.length:Z),fe="_chainListenerPreviousStoredValue_for"+q,I=function(G){var K=R||this;if(pe&&ee){var te=this[ue],ce=this[fe];te!==ce&&(this[fe]=te,ce&&ce.isLPKObservable&&d.call(ce,X,k,K),te&&te.isLPKObservable&&g.call(te,X,k,K))}G||k.call(K)};h.call(this,ue,I),this.isInitialized&&I.call(this,!0),this[Y]=I}}function d(S,k,R){var q="_"+S+"_"+A.guidFor(k)+"_"+A.guidFor(R),Y="_chainListenerMaintenanceCallback_for"+q,Z=this[Y];if(Z){var ee=S.indexOf("."),X=S.substring(0,ee===-1?S.length:ee);y.call(this,X,Z);var pe="_chainListenerPreviousStoredValue_for"+q,ue=this[pe];if(ue&&ue.isLPKObservable){this[pe]=void 0;var fe=S.substring(ee+1),I=R||this;d.call(ue,fe,k,I)}this[Y]=void 0}}function f(S,k){h.apply(this,arguments),this.isInitialized&&k.call(this)}function p(S,k){y.apply(this,arguments)}function v(){var S=this._nextObserverId=(this._nextObserverId||0)+1,k="_runtimeObserver"+S,R=A.observer.apply(A.observer,arguments);return R.registerOnDefinition(this,k),R}function m(S){var k=this._metadatas[S];k&&k.invalidateForObject&&k.invalidateForObject(this)}function b(S){return A.resolvePropertyPathFromObject(this,S)}function _(S,k){var R=S.lastIndexOf(".");if(R===-1)return void(this[S]=k);var q=A.resolvePropertyPathFromObject(this,S.slice(0,R));q&&(q[S.slice(R+1)]=k)}function w(){for(var S=A.objectPool.get(),k=0,R=arguments.length;k<R;k++){var q=arguments[k];S[q]=this.getPath(q)}return S}function P(){var S=arguments.length,k=arguments[S-1],R=A.arrayPool.get();if(S>1)for(var q=0;q<S-1;q++)R[q]=arguments[q];else for(var Y in k)Object.prototype.hasOwnProperty.call(k,Y)&&R.push(Y);A.Object.prototype.pauseNotifications();for(var Z=0,ee=R.length;Z<ee;Z++){var X=R[Z];this.setPath(X,k[X])}A.Object.prototype.resumeNotifications(),A.arrayPool.ret(R)}function O(){(this.hasOwnProperty("_triggerPauseStack")?this._triggerPauseStack:this._triggerPauseStack=A.arrayPool.get()).push(A.arrayPool.get())}function H(){var S=this.hasOwnProperty("_triggerPauseStack")&&this._triggerPauseStack;if(!S)throw"Unmatched `resumeNotifications` call. Cannot over-resume notifications.";var k=S[S.length-1];U(k),S.pop(),A.arrayPool.ret(k),S.length||(delete this._triggerPauseStack,A.arrayPool.ret(S))}function U(S){S.push("IS_FLUSHING");for(var k=A.objectPool.get(),R=0,q=S.length-1;R<q;R+=3){var Y=S[R],Z=S[R+1],ee=S[R+2],X=A.guidFor(Y)+":"+Z,pe=k[X];pe!==void 0&&(S[pe]=null),k[X]=ee?void 0:R}A.objectPool.ret(k);for(var ue=0,fe=S.length-1;ue<fe;ue+=3){var I=S[ue];if(I){var G=S[ue+1],K=S[ue+2];K?(K.unshift(G),I.trigger.apply(I,K),A.arrayPool.ret(K)):I.trigger(G)}}}var L=i(47),N=i(20),x=i(19),$=i(44),Q=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(S){return typeof S}:function(S){return S&&typeof Symbol=="function"&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S},A={mixin:function(S){for(var k=arguments.length,R=Array(k>1?k-1:0),q=1;q<k;q++)R[q-1]=arguments[q];for(var Y=1,Z=arguments.length;Y<Z;Y++){var ee=arguments[Y];if(ee)for(var X in ee)ee.hasOwnProperty(X)&&(S[X]=ee[X])}},instanceOf:function(S,k){return!!S&&(S.constructor===k||A.kindOf(S.constructor,k))},kindOf:function(S,k){if(!(S&&S.isLPKClass&&k&&k.isLPKClass))return!1;do if(S===k)return!0;while(S=S.superclass);return!1},instanceOrKindOf:function(S,k){return A.instanceOf(S,k)||A.kindOf(S,k)},isHash:function(S){var k=void 0;return!((S===void 0?"undefined":Q(S))!=="object"||S===null||(k=S.constructor)&&k!==Object||S.isLPKObject||S.isLPKClass)},arrayPool:L.a,mapPool:L.b,objectPool:L.c,canvasPool:L.d,String:$.a,Array:{mapIntoArray:function(S,k,R){var q=S.length;R.length!==q&&(R.length=q);for(var Y=0;Y<q;Y++)R[Y]=k(S[Y],Y);return R}},resolvePropertyPathFromObject:function(S,k){for(var R=k.indexOf("."),q=0,Y=S;R!==-1;){if(!(Y=Y[k.substring(q,R)]))return;q=R+1,R=k.indexOf(".",q)}return Y[k.substring(q)]},InequalityTests:{DEFAULT:function(S,k,R){return S!==k||Array.isArray(S)||A.isHash(S)},STRICT:function(S,k,R){return S!==k},NAN_AWARE:function(S,k,R){return!Object.is(S,k)}},guidFor:N.a,reusableObject:{},emptyArray:[],Object:null,Metadata:null,observer:null,MetadataExtension:null,metadataExtension:null,AccumulatorMetadata:null,accumulator:null,ObserverMetadata:null,Property:null,property:null,ObservableProperty:null,observableProperty:null,ProxyProperty:null,proxyProperty:null,boundFunction:null};A.Object={staticMembers:{isLPKClass:!0,isLPKObservable:!0,isInitialized:!0,create:function(){for(var S=arguments.length,k=Array(S),R=0;R<S;R++)k[R]=arguments[R];var q=Object.create(this.prototype);return q.constructor=this,q.init.apply(q,arguments),q},extend:function(){for(var S=arguments.length,k=Array(S),R=0;R<S;R++)k[R]=arguments[R];var q=Object.create(this);return q.prototype=Object.create(q.prototype),Array.prototype.forEach.call(arguments,s,q),q.superclass=this,q.init(),q},init:function(){},isClassFor:function(S){var k=S&&S.constructor;return!(!k||!this.isSuperclassOf(k))},isSuperclassOf:function(S){var k=this;if(!(S&&S.isLPKClass&&k&&k.isLPKClass))return!1;do if(S===k)return!0;while(S=S.superclass);return!1},_super:null,_metadatas:{},trigger:c,_listen:h,_observe:f,_unlisten:y,_unobserve:p,observe:v,propertyChanged:m,pauseNotifications:O,resumeNotifications:H,getPath:b,setPath:_,getMultiple:w,setMultiple:P},isLPKObject:!0,isLPKObservable:!0,isInitialized:!1,_metadatas:{},init:function(S){A.mixin(this,S),this._awakenPropertiesWithAccessors()},_awakenPropertiesWithAccessors:function(){var S=A.arrayPool.get(),k=this._metadatas;do S.push(k);while(k=Object.getPrototypeOf(k));for(var R,q=A.arrayPool.get(),Y=A.arrayPool.get(),Z=A.arrayPool.get(),ee=A.mapPool.get(),X=S.length-1;R=S[X];X--){for(var pe in R)if(R.hasOwnProperty(pe)){var ue=R[pe];if(ue.hasAccessors){var fe=this[pe];if(fe!==void 0){var I=ee.get(ue);I!==void 0&&(q[I]=Y[I]=void 0),ee.set(ue,q.length),q.push(ue),Y.push(fe)}}}Z.push(q.length)}this.isInitialized=!0,A.Object.prototype.pauseNotifications();for(var G=0,K=Y.length;G<K;G++){var te=Y[G];te!==void 0&&q[G].awakenForObjectWithValue(this,te)}A.Object.prototype.resumeNotifications(),A.arrayPool.ret(S),A.arrayPool.ret(q),A.arrayPool.ret(Y),A.arrayPool.ret(Z),A.mapPool.ret(ee)},_super:null,trigger:c,_listen:h,_observe:f,_unlisten:y,_unobserve:p,observe:v,propertyChanged:m,pauseNotifications:O,resumeNotifications:H,getPath:b,setPath:_,getMultiple:w,setMultiple:P},A.Object.staticMembers.prototype=A.Object,A.Object=A.Object.staticMembers,delete A.Object.prototype.staticMembers,Object.defineProperty(A.Object,"sharedInstance",{get:function(){return this.hasOwnProperty("_internalValue_for_sharedInstance")||(this._internalValue_for_sharedInstance=this.create()),this._internalValue_for_sharedInstance},set:function(){throw"Cannot write to a read-only property."}}),A.Metadata=A.Object.extend({registerOnDefinition:function(S,k){S._metadatas[k]=this},unregisterFromDefinition:function(S,k){S._metadatas[k]=void 0}}),A.MetadataExtension=A.Metadata.extend({init:function(S){this._super(),this._extensionParams=S},registerOnDefinition:function(S,k){S._metadatas[k].constructor.extend(this._extensionParams).sharedInstance.registerOnDefinition(S,k)}}),A.metadataExtension=A.MetadataExtension.create.bind(A.MetadataExtension),A.AccumulatorMetadata=A.Metadata.extend({init:function(S){this._super(),this.value=S},registerOnDefinition:function(S,k){var R=S[k];S[k]=this.accumulateValues(S,R,this.value)},accumulateValues:function(S,k,R){if(Array.isArray(k)&&Array.isArray(R))return k.concat(R);if(k&&k.isLPKClass&&A.isHash(R))return k.extend(R);if(R instanceof Function)return R.call(S,k);throw"Cannot use accumulators this way yet."}}),A.accumulator=A.AccumulatorMetadata.create.bind(A.AccumulatorMetadata),A.ObserverMetadata=A.Metadata.extend({staticMembers:{_collector:[]},dependencies:[],observerCallback:function(){throw"Must specify `observerCallback` on observers."},decideRequiresUpdate:A.InequalityTests.DEFAULT,init:function(){if(A.isHash(arguments[0]))this._super.apply(this,arguments);else{var S=Array.prototype.slice.call(arguments),k=S.pop();this._super({dependencies:S,observerCallback:k})}},registerOnDefinition:function(S,k){this._super.apply(this,arguments),this.keyOnObject=k;var R=this;this._invokeObserverCallbackIfNeeded=this._invokeObserverCallbackIfNeeded||(this._invokeObserverCallbackIfNeeded=function(){var Z=R.dependencies,ee=R.observerCallback,X=R.constructor._collector;X.length=Z.length;var pe=!1;R._shouldForceNextInvocationOfObserverCallback&&(R._shouldForceNextInvocationOfObserverCallback=!1,pe=!0);for(var ue=0;ue<Z.length;ue++){var fe=Z[ue],I=this.getPath(fe),G="_lastValueSeenByObserver_"+k+"_forDependency_"+fe,K=this[G];this[G]=I,!pe&&R.decideRequiresUpdate(I,K,fe)&&(pe=!0),X[ue]=I}pe&&ee.apply(this,X),X.length=0}),S[this.keyOnObject]=S[this.keyOnObject]||(S[this.keyOnObject]=function(){R._shouldForceNextInvocationOfObserverCallback=!0,R._invokeObserverCallbackIfNeeded.call(this)});for(var q=this.dependencies,Y=0;Y<q.length;Y++)S.isInitialized?S._observe(q[Y],this._invokeObserverCallbackIfNeeded):S._listen(q[Y],this._invokeObserverCallbackIfNeeded)},unregisterFromDefinition:function(S,k){this._super.apply(this,arguments);for(var R=this.dependencies,q=0;q<R.length;q++)S._unlisten(R[q],this._invokeObserverCallbackIfNeeded)}}),A.observer=A.ObserverMetadata.create.bind(A.ObserverMetadata),A.Property=A.Metadata.extend({staticMembers:{extend:function(S){return arguments.length!==1||A.isHash(S)?this._super.apply(this,arguments):this._super({defaultValue:S})}},hasAccessors:!0,readOnly:!1,defaultValue:void 0,get:null,set:null,keyOnObject:null,storageKeyOnObject:null,_defaultGetter:function(S){return S},_defaultSetter:function(S){return S},_internalGetterForObject:function(S){return this.get.call(S,S[this.storageKeyOnObject])},_internalSetterForObject:function(S,k){S[this.storageKeyOnObject]=this.set.call(S,k)},init:function(S){var k=this;if(arguments.length!==1||A.isHash(S)?this._super.apply(this,arguments):this._super({defaultValue:S}),this.get||(this.get=this._defaultGetter),this.readOnly){if(this.set)throw"Cannot include both `readOnly` and `set`.";this.set=function(R){if(k._isAwakeningInReadOnlyMode)return k._isAwakeningInReadOnlyMode=!1,R;throw"Cannot write to a read-only property"}}else this.set||(this.set=this._defaultSetter)},registerOnDefinition:function(S,k){this._super.apply(this,arguments),this.keyOnObject=k;var R=this.storageKeyOnObject="_internalValue_for_"+k;this._internalGetterForObject=this._internalGetterForObject.bind(this),this._internalSetterForObject=this._internalSetterForObject.bind(this);var q=this;Object.defineProperty(S,k,{get:function(){return this.isInitialized?q._internalGetterForObject(this):this[R]},set:function(Y){if(!this.isInitialized)return void(this[R]=Y);q._internalSetterForObject(this,Y)}}),S[k]=this.defaultValue},unregisterFromDefinition:function(S,k){A.reusableObject[k]=void 0;var R=Object.getOwnPropertyDescriptor(A.reusableObject,k);delete A.reusableObject[k],Object.defineProperty(S,k,R),delete S["_internalValue_for_"+k],this._super.apply(this,arguments)},awakenForObjectWithValue:function(S,k){this.readOnly&&(this._isAwakeningInReadOnlyMode=!0),k instanceof Function&&(k=k.call(S)),S[this.keyOnObject]=k}}),A.property=A.Property.extend.bind(A.Property),A.ObservableProperty=A.Property.extend({isCacheable:!1,dependencies:[],writeDependencies:[],decideRequiresUpdate:A.InequalityTests.DEFAULT,_internalSetterForObject:function(S){this._super.apply(this,arguments),this.invalidateForObject(S)},_internalGetterForObject:function(S){if(!this.isCacheable)return this._super.apply(this,arguments);var k=this.cacheExistenceKeyOnObject;if(S[k])return S[this.cacheStorageKeyOnObject];var R=this._super.apply(this,arguments);return S[k]=!0,S[this.cacheStorageKeyOnObject]=R,R},invalidateForObject:function(S){S[this.cacheExistenceKeyOnObject]=!1,S[this.cacheStorageKeyOnObject]=void 0,S.trigger(this.keyOnObject)},registerOnDefinition:function(S,k){this._super.apply(this,arguments);var R=this;this.cacheStorageKeyOnObject="_cacheStorageForProperty_"+k,this.cacheExistenceKeyOnObject="_cacheExistenceForProperty_"+k,A.observer({dependencies:this.dependencies,observerCallback:function(){R.invalidateForObject(this)},decideRequiresUpdate:this.decideRequiresUpdate}).registerOnDefinition(S,"_dependencyObserverForProperty_"+k),this.didChange&&A.observer({dependencies:[k],observerCallback:this.didChange,decideRequiresUpdate:this.decideRequiresUpdate}).registerOnDefinition(S,"_didChangeObserverForProperty_"+k)}}),A.observableProperty=A.ObservableProperty.extend.bind(A.ObservableProperty),A.ProxyProperty=A.ObservableProperty.extend({proxyPath:null,decode:function(S){return S},encode:function(S){return S},init:function(S){var k=typeof S=="string"?S:S.proxyPath;if(!k)throw"A proxyPath must be configured on a ProxyProperty.";this.dependencies=[k];var R=this;this.get=function(){return R.decode(this.getPath(R.proxyPath))},S&&S.readOnly||(this.set=function(q){this.setPath(R.proxyPath,R.encode(q))}),typeof S=="string"?this._super({proxyPath:S}):this._super.apply(this,arguments)}}),A.proxyProperty=A.ProxyProperty.create.bind(A.ProxyProperty),A.boundFunction=function(S){return A.property(function(){return S.bind(this)})},n.a=A},function(r,n,i){i.d(n,"a",function(){return s});var s={default:"full",FULL:"full",HINT:"hint",LOOP:"loop"}},function(r,n,i){function s(c,h){if(!(c instanceof h))throw new TypeError("Cannot call a class as a function")}var o=(function(){function c(h,y){for(var g=0;g<y.length;g++){var d=y[g];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(h,d.key,d)}}return function(h,y,g){return y&&c(h.prototype,y),g&&c(h,g),h}})(),l=navigator.userAgent.toLowerCase(),a=/\sedge\//.test(l),u=(function(){function c(){s(this,c)}return o(c,null,[{key:"isEdge",get:function(){return a}},{key:"isChrome",get:function(){return c._isChrome}},{key:"isSafari",get:function(){return c._isSafari}},{key:"isFirefox",get:function(){return c._isFirefox}},{key:"isIE",get:function(){return c._isIE}},{key:"isIOS",get:function(){if(c._isIOS)return!0;var h=window.top,y=h.document;return!(!c._macLike||!("ontouchstart"in h||"createTouch"in y))}}]),c})();n.a=u,u._isChrome=!u.isEdge&&/chrome/.test(l),u._isSafari=!u.isEdge&&!u.isChrome&&/safari/.test(l),u._isFirefox=!u.isEdge&&!u.isChrome&&!u.isSafari&&/firefox/.test(l),u._isIE=!u.isEdge&&!u.isChrome&&!u.isSafari&&!u.isFirefox&&/trident|msie/.test(l),u._isIOS=!!navigator.userAgent.match(/\b(iPad|iPhone|iPod)\b.*\bOS \d+_\d+/i),u._macLike=/mac/i.test(navigator.userAgent)&&!/like mac/i.test(navigator.userAgent)},function(r,n,i){var s=i(10),o=i(1);i.d(n,"a",function(){return l});var l={_mappingToLocalizedStrings:{live:"Live",get bounce(){return s.a.getString("VideoEffects.Badge.Title.Bounce")},get exposure(){return s.a.getString("VideoEffects.Badge.Title.LongExposure")},get loop(){return s.a.getString("VideoEffects.Badge.Title.Loop")}},_mappingToPlaybackStyle:{bounce:o.a.LOOP,exposure:o.a.FULL,live:o.a.FULL,loop:o.a.LOOP},default:"live",BOUNCE:"bounce",EXPOSURE:"exposure",LIVE:"live",LOOP:"loop",toBadgeText:function(a){return this.toLocalizedString(a).toLocaleUpperCase()},toLocalizedString:function(a){return this._mappingToLocalizedStrings[a||l.default]},toPlaybackStyle:function(a){return this._mappingToPlaybackStyle[a||o.a.default]}}},function(r,n,i){function s(m,b,_){return b in m?Object.defineProperty(m,b,{value:_,enumerable:!0,configurable:!0,writable:!0}):m[b]=_,m}var o=i(0),l=i(7),a=i(39),u=i(38),c=i(40),h=i(9),y=Object.assign||function(m){for(var b=1;b<arguments.length;b++){var _=arguments[b];for(var w in _)Object.prototype.hasOwnProperty.call(_,w)&&(m[w]=_[w])}return m},g=o.a.Object.extend({layerName:null,renderLayerClass_dom:null,renderLayerMixin:{},init:function(m){this._super(),this.renderLayerMixin=m},getRenderLayer:function(m,b){return this["renderLayerClass_"+m.approach].extend(this.renderLayerMixin,{layerName:this.layerName}).create(m,b)}}),d=g.extend({renderLayerClass_dom:a.a}),f=g.extend({renderLayerClass_dom:u.a}),p=g.extend({renderLayerClass_dom:c.a}),v=o.a.Object.extend({staticMembers:{PhotoIngredient:d,InterpolatedVideoIngredient:f,VideoIngredient:p,computedStyle:l.a.computedStyle,getRecipeFromPlaybackStyle:function(m){return this._recipesByPlaybackStyle[m]},registerRecipeWithPlaybackStyle:function(m,b){this._recipesByPlaybackStyle=y({},this._recipesByPlaybackStyle,s({},b,m))}},correspondingPlaybackStyle:null,get name(){return"recipe_for_playbackStyle_"+this.correspondingPlaybackStyle},minimumShortenedDuration:0,spontaneousFinishDuration:0,ingredients:null,requiresInterpolation:!1,init:function(m){this.ingredients=[],this._super();for(var b in m)if(m.hasOwnProperty(b)){var _=m[b];this[b]=_,g.isClassFor(_)&&(_.layerName=b,this.ingredients.push(_))}this.correspondingPlaybackStyle&&v.registerRecipeWithPlaybackStyle(this,this.correspondingPlaybackStyle)},getRenderLayers:function(m){for(var b,_=[],w=0;b=this.ingredients[w];w++)b.isDisabled||_.push(b.getRenderLayer(m,this));return _},beginFinishingPlaybackEarly:function(m){if(!m.isPlaying)return void(m.wantsToPlay=!1);m.duration=Math.min(m.duration,Math.max(this.minimumShortenedDuration,m.currentTime+this.spontaneousFinishDuration))},calculateAnimationDuration:function(m,b,_){return b||0},continuePlayback:function(m){m.currentTime<m.duration?m._rafID=requestAnimationFrame(m._nextFrame.bind(m)):(m.stop(),m.dispatchEvent(i.i(h.f)()))},register:function(){},requestMoreCompatibleRecipe:function(){return this}});n.a=v},function(r,n,i){var s=i(12),o={debug:function(l){for(var a=arguments.length,u=Array(a>1?a-1:0),c=1;c<a;c++)u[c-1]=arguments[c];s.a&&console.debug.apply(console,arguments)},log:function(l){for(var a=arguments.length,u=Array(a>1?a-1:0),c=1;c<a;c++)u[c-1]=arguments[c];s.a&&console.log.apply(console,arguments)},info:function(l){for(var a=arguments.length,u=Array(a>1?a-1:0),c=1;c<a;c++)u[c-1]=arguments[c];s.a&&console.info.apply(console,arguments)},warn:function(l){for(var a=arguments.length,u=Array(a>1?a-1:0),c=1;c<a;c++)u[c-1]=arguments[c];console.warn.apply(console,arguments)},error:function(l){for(var a=arguments.length,u=Array(a>1?a-1:0),c=1;c<a;c++)u[c-1]=arguments[c];console.error.apply(console,arguments)}};n.a=o},function(r,n,i){i.d(n,"a",function(){return s});var s;(function(o){o[o.FAILED_TO_DOWNLOAD_RESOURCE=0]="FAILED_TO_DOWNLOAD_RESOURCE",o[o.PHOTO_FAILED_TO_LOAD=1]="PHOTO_FAILED_TO_LOAD",o[o.VIDEO_FAILED_TO_LOAD=2]="VIDEO_FAILED_TO_LOAD"})(s||(s={}))},function(r,n,i){var s=i(8),o=i(0),l=s.a.extend({_hasBeenDisposed:!1,staticMembers:{computedStyle:function(a){return a._lpk_isComputedStyle=!0,a}},recipe:o.a.observableProperty(),renderer:o.a.observableProperty(),duration:o.a.proxyProperty("renderer.duration"),canRender:o.a.observableProperty(!1),computedStyles:o.a.property(function(){return[]}),displayWidth:0,displayHeight:0,shouldLoop:!1,init:function(a,u){this.renderer=a,this.recipe=u,this._super();for(var c in this){var h=this[c];h&&h._lpk_isComputedStyle&&this.computedStyles.push({styleKey:c,getter:h})}},updateSize:function(a,u){if(!arguments.length)return this.updateSize(this.displayWidth,this.displayHeight);this.displayWidth=a,this.displayHeight=u},setUpForRender:function(){},tearDownFromRender:function(){this.reduceMemoryFootprint()},reduceMemoryFootprint:function(){},_canRenderDidChange:o.a.observer("canRender","renderer._lastRecipe",function(a,u){var c=this.recipe,h=this.renderer;this._hasBeenDisposed||(!a||!u||u!==c&&h._hasInitialized?this.tearDownFromRender():(h._hasInitialized=!0,this.setUpForRender(),this.updateSize()))}),prepareToRenderAtTime:function(){return!0},canRenderAtTime:function(){return!0},renderAtTime:function(a){if(!arguments.length)return this.renderAtTime(this._lastRenderedTime);this._lastRenderedTime=a;for(var u,c=0;u=this.computedStyles[c];c++)u.value=u.getter.call(this,a);this.renderStyles(this.computedStyles)},renderStyles:function(a){},dispose:function(){this.detach(),this._hasBeenDisposed=!0}});n.a=l},function(r,n,i){var s=i(0),o=s.a.Object.extend({element:null,_lpk_isView:!0,tagName:"div",eventDispatchingElement:null,init:function(l){l?this.element=l:this.tagName&&(this.element=document.createElement(this.tagName)),this._super()},attachInto:function(l,a,u){if(!this.element)return void(this.parentView=l);a||(a=l.element),u&&u._lpk_isView&&(u=u.element),u?a.insertBefore(this.element,u):a.appendChild(this.element),this.parentView=l},detach:function(){this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element),this.parentView=null},dispatchEvent:function(l){var a=this.eventDispatchingElement||this.element;if(!a)throw"Cannot dispatch an event from a view with no DOM element.";a.dispatchEvent.call(a,l)},parentView:s.a.observableProperty(null)});n.a=o},function(r,n,i){function s(g){return function(d){return new CustomEvent(g,{detail:d})}}var o=i(14);i.d(n,"a",function(){return l}),i.d(n,"b",function(){return a}),i.d(n,"f",function(){return u}),i.d(n,"e",function(){return c}),i.d(n,"c",function(){return h}),i.d(n,"d",function(){return y}),(function(){function g(d,f){f=f||{bubbles:!1,cancelable:!1,detail:void 0};var p=document.createEvent("CustomEvent");return p.initCustomEvent(d,f.bubbles,f.cancelable,f.detail),p}if(typeof window.CustomEvent=="function")return!1;g.prototype=window.Event.prototype,window.CustomEvent=g})();var l=s(o.a.LIVEPHOTOSKIT_LOADED),a=s("canplay"),u=s("ended"),c=s("error"),h=s("photoload"),y=s("videoload")},function(r,n,i){var s=i(0),o=["ar-sa","ca-cs","cs-cz","da-dk","nl-nl","pt-br","pt-pt","no-no","el-gr","en-us","fi-fi","fr-fr","de-de","he-il","hr-hr","hu-hu","id-id","it-it","ja-jp","ko-kr","ms-my","pl-pl","ro-ro","ru-ru","zh-cn","zh-tw","sk-sk","es-es","sv-se","th-th","tr-tr","uk-ua","vi-vi"],l={"es-419":"es-es",pt:"pt-pt",no:"no-no",nb:"no-no",nn:"no-no",zh:"zh-cn","zh-Hans":"zh-cn","zh-Hant":"zh-tw","zh-HK":"zh-tw","zh-MO":"zh-tw","zh-SG":"zh-cn"},a={};for(var u in l){var c=l[u],h=a[c]||[];a[c]=[].concat((function(w){if(Array.isArray(w)){for(var P=0,O=Array(w.length);P<w.length;P++)O[P]=w[P];return O}return Array.from(w)})(h),[u])}for(var y={},g=0;g<o.length;g++){var d=o[g];try{var f=i(21)("./"+d+".lproj/strings.json"),p=d.split("-")[0],v=a[d];if(y[d]=f,y[p]||(y[p]=f),v)for(var m in v)y[m]=f}catch{}}var b=function(w){var P=_.locale,O=_.strings;return(O[P]||O["en-us"])[w]||""},_=s.a.Object.extend({locale:s.a.observableProperty({get:function(w){return w||window.navigator.language},set:function(w){return w}}),getString:b,strings:y}).create();n.a=_},function(r,n,i){function s(L,N){if(!(L instanceof N))throw new TypeError("Cannot call a class as a function")}function o(L){var N=parseFloat(L);if(+N===N)return N;var x=L==="true"||L!=="false"&&void 0;return!!x===x?x:L}var l=i(27),a=i(0),u=i(5),c=i(1),h=i(3),y=i(12);i.d(n,"a",function(){return P}),i.d(n,"b",function(){return O}),i.d(n,"c",function(){return H});var g=Object.assign||function(L){for(var N=1;N<arguments.length;N++){var x=arguments[N];for(var $ in x)Object.prototype.hasOwnProperty.call(x,$)&&(L[$]=x[$])}return L},d="property",f={play:"method",pause:"method",stop:"method",toggle:"method",beginFinishingPlaybackEarly:"method",isPlaying:"read_only_property",wantsToPlay:"read_only_property",currentTime:"read_only_property",renderedTime:"read_only_property",duration:"read_only_property",autoplay:d,caption:d,playbackStyle:d,preloadedEffectType:d,updateSize:"method",photoWidth:"read_only_property",photoHeight:"read_only_property",videoWidth:"read_only_property",videoHeight:"read_only_property",effectType:d,proactivelyLoadsVideo:d,photoSrc:d,photoMimeType:d,videoSrc:d,videoMimeType:d,metadataVideoSrc:d,photo:d,video:d,photoTime:d,frameTimes:d,videoRotation:d,canPlay:"read_only_property",loadProgress:"read_only_property",errors:"read_only_property",showsNativeControls:d,observe:"method"};delete f.observe;var p=(function(){var L=[];for(var N in f)f.hasOwnProperty(N)&&L.push(N);return L})(),v={},m=p.map(function(L){var N="data-"+a.a.String.hyphenate(L);return v[N]=L,N}),b=p.map(function(L){return f[L]}),_={enumerable:!1,configurable:!1,writable:!1},w={enumerable:!1,configurable:!1},P=function(L,N){if(!L)return u.a.warn("LivePhotosKit.augmentElementAsPlayer requires a target element to augment."),null;if(L.tagName==="IMG"){var x=document.createElement("div"),$=L.parentNode,Q=L.getAttribute("src"),A=L.getAttribute("photo-src")||Q;L.removeAttribute("src"),L.setAttribute("data-photo-src",A);for(var S=L.attributes,k=0;k<S.length;k++){var R=S[k],q=R.nodeName,Y=R.value;x.setAttribute(q,Y)}$.insertBefore(x,L),$.removeChild(L),L=x}var Z=void 0,ee=void 0,X=L;if(X.__isLPKPlayer__)return X;_.value=!0,Object.defineProperty(X,"__isLPKPlayer__",_);var pe=function(){var F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};y.a&&!F.videoSrc&&F.photoSrc?u.a.warn("Changing a `photoSrc` independent of its `videoSrc` can result in unexpected behavior"):y.a&&F.videoSrc&&!F.photoSrc&&u.a.warn("Changing a `videoSrc` independent of its `photoSrc` can result in unexpected behavior");var D=ee?{photoSrc:ee.photo,videoSrc:ee.videoSrc,effectType:ee.effectType,autoplay:ee.autoplay,proactivelyLoadsVideo:ee.proactivelyLoadsVideo}:{},B=g({},D,F),W=(B.photoSrc,B.videoSrc,B.effectType),z=B.autoplay,V=B.proactivelyLoadsVideo;Z=a.a.objectPool.get(),B.preloadedEffectType=W,B.autoplay=z!==!1;var se=W||h.a.default;h.a.toPlaybackStyle(se)===c.a.LOOP&&B.autoplay&&(y.a&&!V&&u.a.warn("When using a looping asset you should set `proactivelyLoadsVideo` to `true` unless `autoplay` is also set to `false`"),B.proactivelyLoadsVideo=!0);for(var J in B)Object.prototype.hasOwnProperty.call(B,J)&&(f[J]===d?Z[J]=B[J]:u.a.warn("LivePhotosKit.Player: Initial configuration for `"+J+"` was ignored, because the property is not a writable property."));if(ee)for(var ne in Z){var oe=Z[ne];ee[ne]=oe}else ee=l.a.create(X,Z);a.a.objectPool.ret(Z),Z=null};X.setProperties=pe,X.setProperties(N);for(var ue,fe,I=0;(ue=p[I])&&(fe=b[I]);I++)(function(F,D,B){B==="method"?(_.value=ee[D].bind(ee),Object.defineProperty(X,D,_)):(w.set=B===d?function(W){ee[D]=W}:function(){},w.get=function(){return ee[D]},Object.defineProperty(X,D,w))})(0,ue,fe);_.value=function(){var F=arguments.length,D=arguments[F-1];if(F<1||!(D instanceof Function))throw new Error("Invalid arguments passed to `observe`. Form: key, [key, ], callback.");for(var B=a.a.arrayPool.get(),W=0,z=F;W<z;W++)B[W]=arguments[W];for(var V=0,se=F-1;V<se;V++){var J=f[B[V]];if(J!==d&&J!=="read_only_property")throw new Error("Can't observe non-observable property '"+B[V]+"'.")}B[F-1]=D.bind(this);var ne=ee.observe.apply(ee,B);return a.a.arrayPool.ret(B),new U(ne,ee)},Object.defineProperty(X,"observe",_);for(var ue,fe,G,I=0;(ue=p[I])&&(fe=b[I])&&(G=m[I]);I++)if(fe===d){var K=X.getAttribute(G);K&&(ue==="effectType"?ee.preloadedEffectType=o(K):ee[ue]=o(K))}var te=X.setAttribute;_.value=function(F,D){var B=v[F];if(!B)return void te.apply(this,arguments);this[B]=o(D)},Object.defineProperty(X,"setAttribute",_);var ce=X.removeAttribute;_.value=function(F){var D=v[F];if(!D)return ce.apply(this,arguments);this[D]=null},Object.defineProperty(X,"removeAttribute",_);for(var T,E,C,M=0;(T=p[M])&&(E=b[M])&&(C=m[M]);M++)(function(F,D,B,W){if(B!==d&&B!=="read_only_property")return"continue";X.observe(D,function(z){z==null||typeof z!="string"&&+z!==z&&typeof z!="boolean"?ce.call(this,W):te.call(this,W,String(z))})})(0,T,E,C);return X.getAttribute("data-live-photo")!==""&&X.setAttribute("data-live-photo",""),_.value=ee,Object.defineProperty(X,"__internalLPKPlayer__",_),_.value=void 0,w.set=w.get=void 0,X},O=function(L){var N=document.createElement("div");return P(N,L)},H=function(L,N){if(arguments.length>=3||typeof arguments[0]=="string"&&typeof arguments[1]=="string")throw new Error("LivePhotosKit.Player: Creating a new Player using arguments of the form 'photoSrc, videoSrc, [targetElement, [options]]' is no longer supported. Instead, use the new signature, '[targetElement, [options]]");return u.a.warn("The `LivePhotosKit.Player` method will be deprecated in an upcoming release. Please use the `LivePhotosKit.augementElementAsPlayer` or `LivePhotosKit.createPlayer` methods, instead."),L?P(L,N):O(N)},U=function L(N,x){s(this,L),this.fire=function(){x[N.keyOnObject]()},this.disconnect=function(){N.unregisterFromDefinition(x)},this.connect=function(){N.registerOnDefinition(x)}}},function(r,n,i){var s=/_lpk_debug=true/i;n.a=s.test(window.location.search)||s.test(window.location.hash)},function(r,n,i){var s={setUpForRender:function(){this.attachInto(this.renderer)},tearDownFromRender:function(){this.detach(),this._super()},renderStyles:function(o){for(var l,a=this.element,u=a.style,c=0;l=o[c];c++){var h=l,y=h.styleKey,g=h.value;u[y]!==g&&(u[y]=g)}}};n.a=s},function(r,n,i){var s=i(55),o=i(56),l=i(57);n.a={APP_NAME:"LivePhotosKit",BUILD_NUMBER:s.a,MASTERING_NUMBER:o.a,FEEDBACK_URL_PREFIX:"https://feedbackws.icloud.com",LIVEPHOTOSKIT_LOADED:"livephotoskitloaded",URL_PREFIX:"https://cdn.apple-livephotoskit.com",VERSION:l.a}},function(r,n,i){function s(d,f){if(!(d instanceof f))throw new TypeError("Cannot call a class as a function")}var o=i(3),l=i(50),a=i(18),u=i(10),c=i(1);i.d(n,"a",function(){return g});var h=(function(){function d(f,p){for(var v=0;v<p.length;v++){var m=p[v];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(f,m.key,m)}}return function(f,p,v){return p&&d(f.prototype,p),v&&d(f,v),f}})(),y={element:null,label:"",labelPadding:6,leftPadding:5,height:25,backgroundColor:"rgba(255, 255, 255, 0.7)",itemColor:"rgb(0, 0, 0)",fontSize:9,borderRadius:5,dottedRadius:8.5,innerRadius:5.25,zIndex:4,shouldAnimateProgressRing:!0,progressRingAnimationSpeed:300,shouldAddEventListeners:!0,effectType:null,playbackStyle:null,configurePlayAction:i.i(l.a)(),configureStopAction:i.i(l.a)()},g=(function(){function d(){var f=this,p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};s(this,d),this._setInstanceProps(p),this._createCanvas(),this.redraw(),this._addEventListeners(),u.a.observe("locale",function(){return f.updateBadgeText()})}return h(d,[{key:"attachPlayerInstance",value:function(f){f.attachBadgeView(this),this.updateBadgeText(f.effectType)}},{key:"redraw",value:function(){var f=this.progress;f>0&&this.shouldAnimateProgressRing?this._animateProgressRing():this._redraw(f)}},{key:"reset",value:function(){var f=this._requestedFrame;f&&cancelAnimationFrame(f),this._progress=0,this._previousProgress=0,this.redraw()}},{key:"appendTo",value:function(f){f.appendChild(this.element)}},{key:"updateAriaLabel",value:function(){var f=o.a.toLocalizedString(this.effectType),p=u.a.getString("VideoEffects.Badge");this.element.setAttribute("aria-label",p+": "+f)}},{key:"updateBadgeText",value:function(f){f?this.effectType=f:f=this.effectType,this.label=f?o.a.toBadgeText(f):"",this.playbackStyle=o.a.toPlaybackStyle(f),this.updateAriaLabel(),this._redraw()}},{key:"_createCanvas",value:function(){var f=this.element;if(f){if(f.tagName.toLowerCase()!=="canvas")throw new Error("Backing element for LivePhotoBadge needs to be an HTMLCanvasElement.")}else f=this.element=document.createElement("canvas");f.setAttribute("role","button"),this.updateAriaLabel(),f.classList.add("lpk-badge"),this._context=f.getContext("2d")}},{key:"_setCanvasSize",value:function(){var f=this.element,p=a.a(),v=this.height,m=this.width;f.height=v*p,f.width=m*p,f.style.height=v+"px",f.style.width=m+"px"}},{key:"_setInstanceProps",value:function(f){var p={};for(var v in y)p.hasOwnProperty.call(y,v)&&(this[v]=f.hasOwnProperty(v)?f[v]:y[v]);this.defaultProps=y}},{key:"_redraw",value:function(){var f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,p=(this.element,this.label),v=p.toLowerCase()||o.a.default;this._setCanvasSize(),this._context.clearRect(0,0,this.width,this.height),this._drawBackground(),this._drawLabel(),this.shouldShowError||(this._drawInnerCircle(),o.a.toPlaybackStyle(v)!==c.a.LOOP?this._drawPlayArrow():this._drawLoopCircle()),this.shouldShowError?(this._drawProgressRing(1),this._drawErrorSlash()):this.progress>0?this._drawProgressRing(f):this._drawDottedCircle()}},{key:"_drawBackground",value:function(){var f=a.a(),p=this._context,v=this.borderRadius*f,m=this.width*f,b=this.height*f;p.beginPath(),p.moveTo(v,0),p.lineTo(m-v,0),p.quadraticCurveTo(m,0,m,v),p.lineTo(m,b-v),p.quadraticCurveTo(m,b,m-v,b),p.lineTo(v,b),p.quadraticCurveTo(0,b,0,b-v),p.lineTo(0,v),p.quadraticCurveTo(0,0,v,0),p.closePath(),p.fillStyle=this.backgroundColor,p.fill()}},{key:"_drawDottedCircle",value:function(){for(var f=d.numberOfDots,p=this.dottedRadius*a.a(),v=0;v<f;v++){var m=this.x0+p*Math.cos(2*Math.PI*v/f),b=this.y0+p*Math.sin(2*Math.PI*v/f);this._drawDot(m,b)}}},{key:"_drawDot",value:function(f,p){var v=this._context,m=a.a()===1?1:1.25;v.beginPath(),v.arc(f,p,m,0,2*Math.PI),v.fillStyle=this.itemColor,v.fill()}},{key:"_drawInnerCircle",value:function(){var f=a.a(),p=this._context,v=this.innerRadius*f;p.beginPath(),p.arc(this.x0,this.y0,v,0,2*Math.PI),p.lineWidth=f===1?1.25:1.5,p.strokeStyle=this.itemColor,p.stroke()}},{key:"_drawPlayArrow",value:function(){var f=a.a(),p=this._context,v=5*f,m=4*f,b=this.x0+.5*f,_=this.y0;p.beginPath(),p.moveTo(b-m/2,_-v/2),p.lineTo(b+m/2,_),p.lineTo(b-m/2,_+v/2),p.fillStyle=this.itemColor,p.fill()}},{key:"_drawLoopCircle",value:function(){var f=a.a(),p=this._context,v=2*f;p.beginPath(),p.arc(this.x0,this.y0,v,0,2*Math.PI),p.fillStyle=this.itemColor,p.fill()}},{key:"_drawLabel",value:function(){var f=a.a(),p=this._context,v=(this.leftPadding+2*this.dottedRadius+this.labelPadding)*f,m=(this.height/2+4.5)*f;p.fillStyle=this.itemColor,p.font=this.fontStyle,p.fillText(this.label,v,m)}},{key:"_drawProgressRing",value:function(f){var p=a.a(),v=this._context,m=this.dottedRadius*p,b=2*Math.PI*.75,_=(.75+f)*(2*Math.PI);v.beginPath(),v.arc(this.x0,this.y0,m,b,_,!1),v.lineWidth=1.5*p,v.strokeStyle=this.itemColor,v.stroke()}},{key:"_drawErrorSlash",value:function(){var f=a.a(),p=this._context,v=this.dottedRadius*f,m=v*Math.sqrt(2)/2;p.beginPath(),p.moveTo(this.x0+m,this.y0+m),p.lineTo(this.x0-m,this.y0-m),p.lineWidth=1.5*f,p.strokeStyle=this.itemColor,p.stroke()}},{key:"_animateProgressRing",value:function(){var f=this,p=this.progress,v=this._previousProgress||0,m=Math.abs(p-v),b=p<v;b&&(p=v,v=this.progress);for(var _=m*this.progressRingAnimationSpeed,w=_/(1e3/60),P=m/w,O=[],H=0,U=w;H<U;H++)O.push(v+H*P);O[O.length-1]=p,b&&O.reverse(),(function L(){var N=O.shift();f._redraw(N),O.length&&(f._requestedFrame=window.requestAnimationFrame(L)),N===1&&window.setTimeout(function(){f.progress=0},.25*f.progressRingAnimationSpeed)})()}},{key:"_addEventListeners",value:function(){var f=this,p=this.element,v=void 0;p.addEventListener("mouseup",function(){v=window.setTimeout(function(){f.configurePlayAction()},0)}),p.addEventListener("mouseenter",function(){v=window.setTimeout(function(){f.configurePlayAction()},0)}),p.addEventListener("mouseleave",function(){v&&window.clearTimeout(v),f.configureStopAction()})}},{key:"width",get:function(){var f=this._context;if(!f)return 0;var p=this.dottedRadius,v=this.fontStyle,m=this.label,b=this.labelPadding,_=this.leftPadding;f.font=v;var w=f.measureText(m);this._textMetrics=w;var P=m.length>0?w.width:0;return this._width=(P>2?_:-2)+2*p+2*b+Math.ceil(P/a.a())}},{key:"fontStyle",get:function(){return this.fontSize*a.a()+'pt/1 system, -apple-system, BlinkMacSystemFont, "Helvetica Neue", Helvetica'}},{key:"x0",get:function(){return(this.dottedRadius+this.leftPadding)*a.a()}},{key:"y0",get:function(){return this.height/2*a.a()}},{key:"progress",set:function(f){typeof f=="number"&&(this._previousProgress=this._progress,this._progress=f,this.redraw())},get:function(){return this._progress}},{key:"shouldShowError",set:function(f){this._shouldShowError=!!f,this._redraw(this.progress)},get:function(){return this._shouldShowError}}],[{key:"numberOfDots",get:function(){return a.a()===1?17:26}}]),d})()},function(r,n,i){var s=i(30),o=i(0),l=i(6),a=s.a.extend({mimeType:o.a.observableProperty({dependencies:["_mimeTypeFromXHR"],get:function(u){return this._mimeTypeFromXHR||u||null}}),_mimeTypeFromXHR:o.a.observableProperty(),requiresMimeTypeForRawArrayBufferSrc:!0,exposedMimeTypeKeyForErrorStrings:"mimeType",exposedSrcKeyForErrorStrings:"src",abortCurrentLoad:function(){this.__xhr&&(this._detachXHR(),this._xhr.abort()),this._mimeTypeFromXHR=null,this.abortCurrentSecondaryLoad()},loadSrc:function(u){if(typeof u=="string"){this._mimeTypeFromXHR=null,this._attachXHR();var c=this._xhr;c.open("GET",u),c.responseType="arraybuffer",c.send(null)}else if(u instanceof ArrayBuffer){if(!this.mimeType&&this.requiresMimeTypeForRawArrayBufferSrc)throw new Error("MIME Type must be assigned to `"+this.exposedMimeTypeKeyForErrorStrings+"` prior to assigning a raw ArrayBuffer to `"+this.exposedSrcKeyForErrorStrings+"`.");this.beginSecondaryLoad(u,this.mimeType)}},get _xhr(){var u=this.__xhr;return u||(u=this.__xhr=new XMLHttpRequest),u},_detachXHR:function(){var u=this._xhr;u.removeEventListener("progress",this._xhrProgress),u.removeEventListener("readystatechange",this._xhrReadyStateChanged)},_attachXHR:function(){var u=this._xhr;u.addEventListener("progress",this._xhrProgress),u.addEventListener("readystatechange",this._xhrReadyStateChanged)},_xhrReadyStateChanged:function(){if(this.state==="loading"){if(this._xhr.readyState>=2&&this._xhr.status!==200){var u=new Error("Failed to download resource from URL assigned to '"+this.exposedSrcKeyForErrorStrings+"'.");return u.errCode=l.a.FAILED_TO_DOWNLOAD_RESOURCE,this.loadDidFail(u)}return this._xhr.readyState===4&&this._xhr.status===200?this._xhrLoadDidFinish():void 0}},_xhrProgress:function(u){if(u&&u.total){var c=(+u.loaded||0)/u.total;+c===c&&(this.progress=Math.max(0,Math.min(1,c)))}},_xhrLoadDidFinish:function(){this._mimeTypeFromXHR=this._xhr.getResponseHeader("Content-Type"),this.beginSecondaryLoad(this._xhr.response,this.mimeType)},beginSecondaryLoad:function(u,c){this._defaultSecondaryLoadTimeout=setTimeout(this.loadDidSucceed.bind(this,u),0)},abortCurrentSecondaryLoad:function(){this._defaultSecondaryLoadTimeout&&(clearTimeout(this._defaultSecondaryLoadTimeout),this._defaultSecondaryLoadTimeout=null)},init:function(){this._xhrReadyStateChanged=this._xhrReadyStateChanged.bind(this),this._xhrProgress=this._xhrProgress.bind(this),this._super()}});n.a=a},function(r,n,i){var s=i(2);n.a=s.a.isEdge||s.a.isIE},function(r,n,i){function s(){c.forEach(function(h){return h()})}function o(h){c.push(h)}function l(){return window.devicePixelRatio}function a(){return Math.ceil(l())}n.b=o,n.a=a;var u=void 0,c=[];(function(){window.matchMedia&&(u=window.matchMedia("only screen and (-webkit-min-device-pixel-ratio:1.3),only screen and (-o-min-device-pixel-ratio:13/10),only screen and (min-resolution:120dpi)"),u.addListener(s))})()},function(r,n,i){function s(a,u){if(!(a instanceof u))throw new TypeError("Cannot call a class as a function")}var o=(function(){function a(u,c){for(var h=0;h<c.length;h++){var y=c[h];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(u,y.key,y)}}return function(u,c,h){return c&&a(u.prototype,c),h&&a(u,h),u}})(),l=(function(){function a(u){var c=this;s(this,a),this._k=[],this._v=[],u&&u._k.forEach(function(h){c.set(h,u.get(h))})}return o(a,[{key:"_indexOfKey",value:function(u){return this._k.indexOf(u)}},{key:"get",value:function(u){var c=this._indexOfKey(u);return c===-1?void 0:this._v[c]}},{key:"set",value:function(u,c){var h=this._indexOfKey(u);return h===-1&&(h=this._k.push(u)-1),this._v[h]=c,this}},{key:"delete",value:function(u){var c=this._indexOfKey(u);return c!==-1&&(this._k.splice(c,1),this._v.splice(c,1),!0)}},{key:"clear",value:function(){this._k.length>0&&(this._k.length=0,this._v.length=0)}}]),a})();n.a=l},function(r,n,i){function s(u){if(u===null)return"_null";if(u===void 0)return"_undefined";if(u.hasOwnProperty("_LPKGUID"))return u._LPKGUID;var c=u===void 0?"undefined":o(u);switch(c){case"number":Object.is(u,-0)&&(u="-0");case"string":case"boolean":return c+u;case"object":case"function":a++;var h=c+a;return l.value=h,Object.defineProperty(u,"_LPKGUID",l),h;default:throw"unrecognized object type"}}n.a=s;var o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(u){return typeof u}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u},l={value:"",enumerable:!1,writable:!1,configurable:!1},a=0},function(r,n,i){function s(a){return i(o(a))}function o(a){var u=l[a];if(!(u+1))throw new Error("Cannot find module '"+a+"'.");return u}var l={"./en-us.lproj/strings.json":22};s.keys=function(){return Object.keys(l)},s.resolve=o,r.exports=s,s.id=21},function(r,n){r.exports={"VideoEffects.Badge":"Badge","VideoEffects.Badge.Title.Loop":"Loop","VideoEffects.Badge.Title.Bounce":"Bounce","VideoEffects.Badge.Title.LongExposure":"Long Exposure"}},function(r,n,i){var s=i(28),o=i(32),l=i(34),a=i(37),u=i(35),c=i(4),h=i(0),y=i(8),g=i(5),d=i(1);l.a.register(),a.a.register(),u.a.register();var f=y.a.extend({approach:"",autoplay:!0,caption:"",_hasInitialized:!1,_lastRecipe:null,recipe:h.a.observableProperty({get:function(){var p=c.a.getRecipeFromPlaybackStyle(this.playbackStyle);return this._setRecipe(p),p},set:function(p){this._setRecipe(p)}}),_setRecipe:function(p){p&&p!==this._lastRecipe&&(this._lastRecipe=p,this.setUpRenderLayers())},requestMoreCompatibleRecipe:function(){this.recipe=this.recipe.requestMoreCompatibleRecipe()},duration:h.a.observableProperty({dependencies:["recipe","provider.videoDuration","provider.photoTime"],get:function(p){var v=this.recipe,m=this.provider,b=m.photoTime,_=m.videoDuration;return v?v.calculateAnimationDuration(p,_,b):0}}),displayWidth:0,displayHeight:0,get backingWidth(){return Math.round(this.displayWidth*devicePixelRatio)},get backingHeight(){return Math.round(this.displayHeight*devicePixelRatio)},get renderLayerWidth(){return this.displayWidth},get renderLayerHeight(){return this.displayHeight},get videoWidth(){return this.videoDecoder.videoWidth},get videoHeight(){return this.videoDecoder.videoHeight},photoWidth:h.a.proxyProperty("photo.width"),photoHeight:h.a.proxyProperty("photo.height"),photo:h.a.proxyProperty("provider.photo"),video:h.a.proxyProperty("provider.video"),photoTime:h.a.proxyProperty("provider.photoTime"),frameTimes:h.a.proxyProperty("provider.frameTimes"),effectType:h.a.proxyProperty("provider.effectType"),preloadedEffectType:h.a.proxyProperty("provider.preloadedEffectType"),playbackStyle:h.a.proxyProperty("provider.playbackStyle"),currentTime:h.a.observableProperty({defaultValue:0,dependencies:["duration"],get:function(p){return Math.min(this.duration||0,Math.max(0,p||0))},didChange:function(p){this.prepareToRenderAtTime(p)}}),canRenderCurrentTime:h.a.observableProperty({readOnly:!0,dependencies:["currentTime"],get:function(){return this.canRenderAtTime(this.currentTime)}}),_currentTimeRenderObserver:h.a.observer("currentTime","canRenderCurrentTime",function(p,v){v&&(this.renderedTime=p)}),renderedTime:h.a.observableProperty({defaultValue:0,didChange:function(p){this.renderAtTime(p),this.currentTime=p}}),areAllRenderLayersPrepared:h.a.observableProperty({defaultValue:!1}),isFullyPreparedForPlayback:h.a.observableProperty({readOnly:!0,dependencies:["video","areAllRenderLayersPrepared","photoTime","frameTimes","playbackStyle"],get:function(){return!!(this.video&&this.areAllRenderLayersPrepared&&(this.photoTime||this.playbackStyle!==d.a.HINT)&&Array.isArray(this.frameTimes))}}),cannotRenderDueToMissingPhotoTimeOrFrameTimes:h.a.observableProperty({readOnly:!0,dependencies:["video","areAllRenderLayersPrepared","photoTime","frameTimes","playbackStyle"],get:function(){return!!(this.video&&this.areAllRenderLayersPrepared&&(!this.photoTime&&this.playbackStyle===d.a.HINT||!Array.isArray(this.frameTimes)))}}),renderLayers:h.a.property(function(){return[]}),videoDecoder:h.a.observableProperty(function(){return this._videoDecoderClass.create({owner:this})}),_videoDecoderClass:s.a.extend({owner:h.a.observableProperty(),provider:h.a.proxyProperty("owner.provider")}),provider:h.a.observableProperty(function(){return o.a.create()}),init:function(){this._super(),this.element.className=((this.element.className||"")+" lpk-live-photo-renderer").trim(),this.element.style.position="absolute",this.element.style.overflow="hidden",this.element.style.textAlign="left"},updateSize:function(p,v){if(!arguments.length)return void(this.displayWidth&&this.displayHeight&&this.updateSize(this.displayWidth,this.displayHeight));this.displayWidth=p=Math.round(p),this.displayHeight=v=Math.round(v),this.element.style.width=p+"px",this.element.style.height=v+"px";for(var m,b=0;m=this.renderLayers[b];b++)m.updateSize(this.renderLayerWidth,this.renderLayerHeight)},_imageOrVideoDidEnterOrLeave:h.a.observer("videoDecoder.canProvideFrames","photo",function(){this.prepareToRenderAtTime(this.currentTime)}),prepareToRenderAtTime:h.a.boundFunction(function(p){this.propertyChanged("canRenderCurrentTime");for(var v,m=!0,b=0;v=this.renderLayers[b];b++)m=v.prepareToRenderAtTime(p)&&m;this.areAllRenderLayersPrepared=m}),canRenderAtTime:function(p){if(p===0)return!0;if(!this.duration&&p)return!1;for(var v,m=!0,b="",_=0;v=this.renderLayers[_];_++)v.canRenderAtTime(p)||(m=!1,b+=(b?", ":"Cannot render; waiting for ")+v.layerName);return b&&g.a.log(b+"."),m},renderAtTime:function(p){if(this.duration)for(var v,m=0;v=this.renderLayers[m];m++)v.renderAtTime(p)},getNewRenderLayers:function(){return this.recipe.getRenderLayers(this)},setUpRenderLayers:function(){var p=this.renderLayers;p&&this._cleanUpRenderLayers(p),this.renderLayers=this.getNewRenderLayers(),this.updateSize(),this.currentTime=0,this.prepareToRenderAtTime(0)},_cleanUpRenderLayers:function(p){for(var v,m=0;v=p[m];m++)v.dispose(),v.tearDownFromRender()},reduceMemoryFootprint:function(){for(var p,v=0;p=this.renderLayers[v];v++)p.reduceMemoryFootprint()},_clearRetainedFramesWhenNecessary:h.a.observer("provider.videoRotation","provider.frameTimes",function(){this.reduceMemoryFootprint(),this.prepareToRenderAtTime(this.currentTime)})});n.a=f},function(r,n,i){var s=i(23),o=s.a.extend({approach:"dom"});n.a=o},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var s=i(14),o=i(9),l=i(10),a=i(11);i.d(n,"augmentElementAsPlayer",function(){return a.a}),i.d(n,"createPlayer",function(){return a.b}),i.d(n,"Player",function(){return a.c});var u=i(6);i.d(n,"Errors",function(){return u.a});var c=i(15);i.d(n,"LivePhotoBadge",function(){return c.a});var h=i(1);i.d(n,"PlaybackStyle",function(){return h.a}),i.d(n,"Localization",function(){return y}),i.d(n,"BUILD_NUMBER",function(){return g}),i.d(n,"MASTERING_NUMBER",function(){return d}),i.d(n,"VERSION",function(){return f}),i.d(n,"LIVEPHOTOSKIT_LOADED",function(){return p});var y={get locale(){return l.a.locale},set locale(S){l.a.locale=S}},g=s.a.BUILD_NUMBER,d=s.a.MASTERING_NUMBER,f=s.a.VERSION,p=s.a.LIVEPHOTOSKIT_LOADED,v=typeof window<"u"&&typeof document<"u";if(v){var m=window.document;if(setTimeout(function(){return m.dispatchEvent(i.i(o.a)())}),m.styleSheets&&document.head){for(var b=null,_=null,w=0;w<m.styleSheets.length;++w)try{var P=m.styleSheets[w];if(P.cssRules)for(var O=0;O<P.cssRules.length;++O){var H=P.cssRules[O];if(H.cssText.indexOf(".lpk-live-photo-player")!==-1){b=H;break}}if(b){_=P;break}}catch(S){if(S.name!=="SecurityError"&&S.message.substring(0,17)!=="Access is denied."&&S.message.substring(0,17)!=="Member not found.")throw S}if(!_){var U=document.createElement("style");U.type="text/css",document.head.appendChild(U),_=U.sheet}var L="user-select: none;-khtml-user-select: none; -moz-user-select: none;-ms-user-select: none;-webkit-touch-callout: none; -webkit-user-select: none;";_.addRule?_.addRule(".lpk-live-photo-player",L):_.insertRule&&_.insertRule(".lpk-live-photo-player {"+L+"}",0)}}if(v&&document.querySelectorAll instanceof Function){var N=function(){A=!0,Array.prototype.forEach.call(document.querySelectorAll("[data-live-photo]"),function(S){return i.i(a.a)(S)})},x=function(){!A&&$&&Q&&N()},$=/interactive|complete|loaded/.test(document.readyState),Q=!!window.LivePhotosKit,A=!1;$||document.addEventListener("DOMContentLoaded",function(){$=!0,x()}),Q||document.addEventListener("livephotoskitloaded",function(){Q=!0,x()}),x()}},function(r,n,i){var s=i(8),o=i(18),l=i(15);i.d(n,"a",function(){return a});var a=s.a.extend({badgeView:null,init:function(){var u=this;this._super(),this._createBadgeView(),o.b(function(){return u.badgeView.redraw()})},_createBadgeView:function(){this.badgeView=new l.a,this.element.appendChild(this.badgeView.element);var u=this.badgeView.element.style;u.top="10px",u.left="10px",u.position="absolute",u.zIndex=4},updateToRendererLayout:function(u,c,h,y){var g=this.badgeView,d=g.element.style;d.left=u+10+"px",d.top=c+10+"px",d.right=""},redraw:function(){this.badgeView.redraw()}})},function(r,n,i){function s(v){if(Array.isArray(v)){for(var m=0,b=Array(v.length);m<v.length;m++)b[m]=v[m];return b}return Array.from(v)}function o(v){if(!v)return!1;try{v.appendChild(p),v.removeChild(p)}catch{return!1}return!0}var l=i(8),a=i(24),u=i(26),c=i(54),h=i(0),y=i(9),g=i(53),d=i(1),f=l.a.extend({staticMembers:{activeInstance:h.a.observableProperty(null)},renderer:h.a.observableProperty(function(){return a.a.create()}),showsNativeControls:h.a.observableProperty(!0),isPlaying:h.a.observableProperty(!1),wantsToPlay:h.a.observableProperty({defaultValue:!1,didChange:function(v){v&&(this.constructor.activeInstance=this)}}),canPlay:h.a.observableProperty({readOnly:!0,dependencies:["isPlaying","renderer.isFullyPreparedForPlayback"],get:function(){return this.isPlaying||this.renderer.isFullyPreparedForPlayback},didChange:function(v){v&&(this._hasHadCanPlay=!0,this.dispatchEvent(i.i(y.b)()),this.wantsToPlay&&this.play())}}),_generateErrorIfPlayedWithoutNecessaryMetadata:h.a.observer("renderer.cannotRenderDueToMissingPhotoTimeOrFrameTimes","wantsToPlay",function(v){v&&this.wantsToPlay&&(this._cannotRenderDueToMissingPhotoTimeOrFrameTimesError=new Error("The `photoTime` and/or `frameTimes` values are missing. Provide them directly (or via `metadataVideoSrc`) if they cannot be parsed from the video.")),v||(this._cannotRenderDueToMissingPhotoTimeOrFrameTimesError=null)}),_cannotRenderDueToMissingPhotoTimeOrFrameTimesError:h.a.observableProperty(),_playerErrors:h.a.observableProperty({readOnly:!0,dependencies:["_cannotRenderDueToMissingPhotoTimeOrFrameTimesError"],get:function(){var v=this._cannotRenderDueToMissingPhotoTimeOrFrameTimesError;return v?[v]:null}}),_captionChanged:h.a.observer("caption",function(v){var m="";v&&(m=": "+v),this.element.setAttribute("aria-label","Live Photo"+m)}),_effectTypeChanged:h.a.observer("effectType",function(v){this.badgeView&&v&&this.updateBadgeText()}),errors:h.a.observableProperty({readOnly:!0,dependencies:["provider.errors","_playerErrors"],get:function(){var v=this.provider.errors,m=this._playerErrors,b=[];return v&&v.length&&b.push.apply(b,s(v)),m&&m.length&&b.push.apply(b,s(m)),b}}),lastError:h.a.observableProperty({dependencies:["provider.lastError"],get:function(v){return v||this.provider.lastError||null},didChange:function(v){v&&(this.throwError(v),this.stop())}}),playbackRate:h.a.proxyProperty("renderer.videoDecoder.playbackRate"),currentTime:h.a.proxyProperty("renderer.currentTime"),renderedTime:h.a.proxyProperty("renderer.renderedTime"),duration:h.a.proxyProperty("renderer.duration"),videoWidth:h.a.proxyProperty("renderer.videoWidth"),videoHeight:h.a.proxyProperty("renderer.videoHeight"),photoWidth:h.a.proxyProperty("renderer.photoWidth"),photoHeight:h.a.proxyProperty("renderer.photoHeight"),recipe:h.a.proxyProperty("renderer.recipe"),requiresInterpolation:h.a.proxyProperty("renderer.recipe.requiresInterpolation"),effectType:h.a.proxyProperty("provider.effectType"),preloadedEffectType:h.a.proxyProperty("renderer.preloadedEffectType"),playbackStyle:h.a.proxyProperty("renderer.playbackStyle"),provider:h.a.proxyProperty("renderer.provider"),proactivelyLoadsVideo:h.a.proxyProperty("provider.proactivelyLoadsVideo"),metadataVideoSrc:h.a.proxyProperty("provider.metadataVideoSrc"),photoMimeType:h.a.proxyProperty("provider.photoMimeType"),photoSrc:h.a.proxyProperty("provider.photoSrc"),photo:h.a.proxyProperty("provider.photo"),videoMimeType:h.a.proxyProperty("provider.videoMimeType"),videoSrc:h.a.proxyProperty("provider.videoSrc"),video:h.a.proxyProperty("provider.video"),photoTime:h.a.proxyProperty("provider.photoTime"),frameTimes:h.a.proxyProperty("provider.frameTimes"),videoRotation:h.a.proxyProperty("provider.videoRotation"),loadProgress:h.a.proxyProperty("provider.progress"),autoplay:h.a.proxyProperty("renderer.autoplay"),caption:h.a.proxyProperty("renderer.caption"),_isZeroSizeWarningLogged:h.a.observableProperty(!1),_renderWhenPossible:h.a.observer("renderer.video","renderer.photo",function(){if(this._cannotRenderDueToMissingPhotoTimeOrFrameTimesError=null,this.updateSize(!0),!this._isZeroSizeWarningLogged){var v=this.element.getBoundingClientRect();v.width!==0&&v.height!==0||(console.warn("The LivePhotosKit Player located at position ("+v.left+", "+v.top+") in the viewport has either a zero width or zero height (or both) and will not render. To fix this, ensure that the Player has a style that will yield a non-zero width and height."),this._isZeroSizeWarningLogged=!0)}}),attachBadgeView:function(v){var m=this;this.badgeView=v,this.updateBadgeText(),v.configurePlayAction(function(){return m.play()}),v.configureStopAction(function(){return m.beginFinishingPlaybackEarly()})},updateBadgeText:function(){this.badgeView.updateBadgeText(this.effectType)},nativeControls:h.a.observableProperty({readOnly:!0,dependencies:["showsNativeControls"],get:function(){var v=this;return this.showsNativeControls?this._nativeControls_cachedValue||(this._nativeControls_cachedValue=u.a.extend({owner:h.a.observableProperty(this),_slurpProgress:h.a.observer("owner.provider.progress",function(m){this.badgeView&&(this.badgeView.progress=m)}),_slurpError:h.a.observer("owner.errors",function(m){this.badgeView&&(this.badgeView.shouldShowError=!!m&&m.length>0)}),init:function(){this._super.apply(this,arguments),v.attachBadgeView(this.badgeView)}}).create()):null},didChange:function(v){this._nativeControls_previousValue&&this._nativeControls_previousValue.detach(),this._nativeControls_previousValue=v,v&&v.attachInto(this)}}),init:function(v,m){var b=this;if(v&&!o(v))throw"Any pre-existing element provided for use as a LivePhotosKit.Player must be able to append child DOM nodes.";v&&v.childNodes.length&&(v.innerHTML="");for(var _ in m)Object.prototype.hasOwnProperty.call(m,_)&&(this[_]=m[_]);switch(this._super(v),this.element.className.indexOf("lpk-live-photo-player")<0&&(this.element.className=this.element.className+" lpk-live-photo-player"),this.element.setAttribute("role","image"),i.i(g.a)(this.element,"position")||this.element.style.position){case"absolute":case"fixed":case"relative":break;default:this.element.style.position="relative"}switch(i.i(g.a)(this.element,"display")||this.element.style.display){case"block":case"inline-block":case"table":case"table-caption":case"table-column-group":case"table-header-group":case"table-footer-group":case"table-row-group":case"table-cell":case"table-column":case"table-row":break;default:this.element.style.display="inline-block"}this.renderer.attachInto(this),this.renderer.eventDispatchingElement=this.element,window.addEventListener("resize",this.updateSize),"ontouchstart"in document.documentElement&&(this.addEventListener("touchstart",function(){return b.play()},!1),this.addEventListener("touchend",function(){return b.beginFinishingPlaybackEarly()},!1))},play:function(){if(!this.isPlaying){var v=this.provider;v.video||(v.needsLoadedVideoForPlayback=!0),this.wantsToPlay=!0,this.canPlay&&(this.isPlaying=!0,this._lastFrameNow=Date.now(),this._nextFrame())}return this.isPlaying},pause:function(){this.isPlaying=!1,this.wantsToPlay=!1,this._cancelNextFrame()},stop:function(){this.pause(),this.currentTime=0,this.renderer.duration=NaN},toggle:function(){this.wantsToPlay?this.pause():this.play()},beginFinishingPlaybackEarly:function(){this.recipe.beginFinishingPlaybackEarly(this)},_stopWhenAnotherPlayerStarts:h.a.observer("_constructor.activeInstance",function(v){v&&v!==this&&(this.stop(),this.renderer.reduceMemoryFootprint())}),_constructor:h.a.observableProperty(function(){return f}),_stopPlaybackWhenItemsLoadOrUnload:h.a.observer("video","photo",function(){!this.isPlaying||this.playbackStyle===d.a.LOOP&&this.autoplay||this.stop()}),addEventListener:function(v,m,b){var _=this.element;_.addEventListener.call(_,v,m,b)},removeEventListener:function(v,m,b){var _=this.element;_.removeEventListener.call(_,v,m,b)},_nextFrame:function(){var v=Date.now(),m=(v-this._lastFrameNow)*this.playbackRate;this._lastFrameNow=v,this.currentTime===this.renderedTime&&(this.currentTime+=m/1e3),this.recipe&&this.recipe.continuePlayback(this)},_cancelNextFrame:function(){cancelAnimationFrame(this._rafID)},updateSize:h.a.boundFunction(function(v,m){if(this.photoWidth&&this.photoHeight){var b=v===!0?void 0:v,_=v===!0?v:void 0;if(isNaN(b)||isNaN(m)?(b=this.element.offsetWidth,m=this.element.offsetHeight):(b=Math.round(b),m=Math.round(m),this.element.style.width=b+"px",this.element.style.height=m+"px"),b&&m){if(this._lastUpdateChangeToken===(this._lastUpdateChangeToken=b+":"+m)&&!_)return!1;var w=i.i(c.a)(this.photoWidth,this.photoHeight,b,m),P=Math.ceil(w.height),O=Math.ceil(w.width),H=Math.floor(b/2-O/2),U=Math.round(m/2-P/2),L=this.renderer;L.element.style.top=U+"px",L.element.style.left=H+"px",L.updateSize(O,P),this.displayWidth=b,this.displayHeight=m,this.nativeControls&&this.nativeControls.updateToRendererLayout(H,U,O,P)}}}),_dispatchPhotoLoadEventOnNewPhoto:h.a.observer("photo",function(v){v&&this.dispatchEvent(i.i(y.c)())}),_dispatchVideoLoadEventOnNewVideo:h.a.observer("video",function(v){v&&this.dispatchEvent(i.i(y.d)())}),throwError:function(v){this.dispatchEvent(i.i(y.e)({error:v,errorCode:v.errCode}))}}),p=document.createElement("div");n.a=f},function(r,n,i){function s(){p=!1}function o(){}function l(m,b){return-(m.importance-b.importance)||m.number-b.number}function a(m,b){for(var _=0,w=m.length,P=0;P<w-_;P++)if(m[P]===b&&(_++,P--),_){var O=P+1;m[O]=m[O+_]}return m.length-=_,m}var u=i(52),c=i(29),h=i(0),y=i(17),g=i(2),d=location.href.indexOf("_lpk_play_to_decode=true")!==-1||location.href.indexOf("_lpk_play_to_decode=false")===-1&&!g.a.isSafari&&!g.a.isIOS,f=location.href.indexOf("_lpk_persistent_frames=true")!==-1||(location.href.indexOf("_lpk_persistent_frames=false"),!1),p=!0,v=h.a.Object.extend({id:h.a.property(function(){return i.i(u.a)()}),provider:h.a.observableProperty(),video:h.a.proxyProperty("provider.video"),duration:h.a.proxyProperty("provider.videoDuration"),videoRotation:h.a.proxyProperty("provider.videoRotation"),frameTimes:h.a.proxyProperty("provider.frameTimes"),requiresInterpolation:h.a.proxyProperty("renderer.recipe.requiresInterpolation"),get frameCount(){var m=this.frameTimes;return m?m.length:0},shouldPrepareToSeek:!1,canProvideFrames:h.a.observableProperty({readOnly:!0,dependencies:["video"],get:function(){return!!this.video}}),videoWidth:h.a.observableProperty({readOnly:!0,dependencies:["video","videoRotation"],get:function(){var m=this.video;if(m)return this.videoRotation%180==0?m.videoWidth:m.videoHeight}}),videoHeight:h.a.observableProperty({readOnly:!0,dependencies:["video","videoRotation"],get:function(){var m=this.video;if(m)return this.videoRotation%180==0?m.videoHeight:m.videoWidth}}),playbackRate:h.a.observableProperty(1),_sendPlaybackRateToVideo:h.a.observer("playbackRate","video",function(m,b){b&&(b.playbackRate=m)}),_pendingFrames:h.a.property(function(){return[]}),init:function(){this._largeCanvas=document.createElement("canvas"),this._largeContext=this._largeCanvas.getContext("2d"),this._super.apply(this,arguments)},_handleVideoChange:h.a.observer("video",function(){var m=this.video,b=this._lastVideo;if(this._lastVideo=m,m!==b&&(b&&this.cleanUpOldVideo(b),m&&this.setUpNewVideo(m),m&&f))for(var _=y.a?1:0;this.frameTimes&&_<this.frameTimes.length;_++)this.getFrame(_).retain()}),setUpNewVideo:function(m){m.addEventListener("seeked",this._seeked),m.muted=!0},cleanUpOldVideo:function(m){m.removeEventListener("seeked",this._seeked),m.playbackRate=1,m.muted=!1,m.pause(),this._stopSeekingEntirely()},fractionalIndexForTime:function(m){if(m=Math.min(this.duration,Math.max(0,m)),isNaN(m))return m;var b=this.frameTimes,_=b.length,w=void 0;for(w=0;w<_&&b[w]<m;w++);w&&w--;var P=b[w],O=b[w+1];return O?w+Math.min(1,(m-P)/(O-P)):w},timeForFractionalIndex:function(m){if(m<=0)return 0;if(m>=this.frameTimes.length)return this.duration;var b=0|m,_=Math.ceil(m);if(b===_)return this.frameTimes[b];var w=this.frameTimes[b],P=_<this.frameTimes.length?this.frameTimes[_]:this.duration;return P?w+(m-b)*(P-w):w},getFrame:function(m,b){if(!this.frameTimes)throw"Attempted to get frame before ready.";if(isNaN(this.frameTimes[m]))throw"Frame number "+m+" is is not a frame in the video.";var _=c.a.getCached(this,m);return isNaN(b)||(_.importance=Math.max(_.importance,b)),_.readyState||(this._pendingFrames.push(_),this._pendingFrames.sort(l),_.didPend(),this._isSeeking||this._scheduleArtificialSeek()),_},peekFrame:function(m){var b=c.a.peekCached(this,m);return b&&b.readyState===2&&!b.lacksOwnPixelData?b:null},getNearestDecodedFrame:function(m){for(var b=Math.max(m,this.frameTimes.length-1-m),_=-1;++_<=b;){var w=this.peekFrame(m+_)||this.peekFrame(m-_);if(w)return w}return null},_scheduleArtificialSeek:function(){this._artificialSeekTimeout||(this._artificialSeekTimeout=setTimeout(this._seeked),this._artificialSeekRAFId=requestAnimationFrame(this._seeked))},_unscheduleArtificialSeek:function(){this._artificialSeekTimeout&&(clearTimeout(this._artificialSeekTimeout),this._artificialSeekTimeout=null,cancelAnimationFrame(this._artificialSeekRAFId),this._artificialSeekRAFId=null)},_stopSeekingEntirely:function(){this._unscheduleArtificialSeek(),this._isPlaying=!1,this._isSeeking=!1,this._expectedNextSeenFrameNumber=NaN,this.video&&this.video.pause()},_seeked:h.a.boundFunction(function(m){var b=this._pendingFrames;if((b.length!==0||this.requiresInterpolation)&&!(m instanceof Event&&m.target!==this.video)&&(m instanceof Event||this.video)){this._unscheduleArtificialSeek(),this._isSeeking=!1;var _=this.fractionalIndexForTime(this.video.currentTime);_|=0;for(var w,P=NaN,O=0;w=b[O];O++)if(w.number===_){P=_,w.didDecode(),this._removePendingFrame(w);break}var H=this._expectedNextSeenFrameNumber;if(this._expectedNextSeenFrameNumber=NaN,H<P)for(var U,L=0;U=b[L];L++)U.number>=H&&U.number<P&&(U.didGetSkipped(),this._removePendingFrame(U),L--);var N=b[0];if(!N)return this._isPlaying&&this.requiresInterpolation&&(this._isPlaying=!1,this.video.pause()),void(this._expectedNextSeenFrameNumber=NaN);var x=N.number>_&&N.number<=_+2&&p;if(d||(x=!1),x){if(!this._isPlaying){this._isPlaying=!0;try{var $=this.video.play();$&&$.then instanceof Function&&$.then(o,s)}catch{p=!1}}this._expectedNextSeenFrameNumber=N.number,this._scheduleArtificialSeek()}else this._isPlaying&&(this._isPlaying=!1,this.video.pause()),this._expectedNextSeenFrameNumber=NaN,this.video.currentTime=N.time+1e-4,this._isSeeking=!0}}),_frameWillDispose:function(m){this._removePendingFrame(m)},_removePendingFrame:function(m){a(this._pendingFrames,m),this._pendingFrames.length||this._unscheduleArtificialSeek()}});n.a=v},function(r,n,i){function s(f){f.container=document.createElement("div"),f.container.frame=f,f.container.innerHTML='<div style="position:absolute; left:0; right:0; top:0; bottom:0; text-align:center; line-height:30px; color:white; text-shadow: black 0px 0px 4px,black 0px 0px 4px,black 0px 0px 4px,black 0px 0px 4px; font-family:HelveticaNeue-Light;"></div>',f.textBox=f.container.lastChild,f.container.insertBefore(f.image,f.textBox),f.image.style.position="absolute",f.container.style.cssText="position:relative; display:inline-block; border: 1px solid black;";var p=f._debug_aspect||(f._debug_aspect=f.videoDecoder&&(f.videoDecoder.videoWidth>f.videoDecoder.videoHeight?"landscape":"portrait"));f.container.style.width=f.image.style.width=p==="landscape"?"40px":"30px",f.container.style.height=f.image.style.height=p==="landscape"?"30px":"40px",document.body.appendChild(f.container)}var o=i(12),l=i(48),a=i(5),u=i(0),c=i(46),h=i(2);i.d(n,"a",function(){return y});var y=u.a.Object.extend(c.a,l.a,{staticMembers:{getPoolingCacheKey:function(f,p){return"f"+p+"_in_"+f.id}},container:null,image:null,_context:null,number:-1,time:-1,importance:0,videoDecoder:null,readyState:0,_poolingCacheKey:null,_debugShowInDOM:o.a,lacksOwnPixelData:!1,_postDispose:function(){this.image.width=this.image.height=0},get backingFrame(){return this.lacksOwnPixelData?this.videoDecoder.getNearestDecodedFrame(this.number)||this:this},init:function(){this._postDispose=this._postDispose.bind(this);var f=this.image=document.createElement("canvas");this._context=this.image.getContext("2d"),this._super(),this._debugShowInDOM?s(this):d&&(d.appendChild(f),f.style.cssText="position: absolute; top: 0px; width:1px; height: 1px; display: inline-block;",f.style.left=g+++"px")},initFromPool:function(f,p){clearTimeout(this._postDisposalTimeout),this.videoDecoder=f,this.number=p,this.time=f.frameTimes[p],this._debugShowInDOM&&(this.textBox.innerHTML=this.number)},dispose:function(){this.resetReadiness(),this.videoDecoder._frameWillDispose(this),this.number=this.time=-1,this.importance=0,this.videoDecoder=null,this.readyState=0,this.lacksOwnPixelData=!1,this._postDisposalTimeout=setTimeout(this._postDispose,3e3),this.constructor._disposeInstance(this),this._debugShowInDOM&&(this.textBox.innerHTML="x",this.textBox.style.color="#FF0000",this._context.clearRect(0,0,this.image.width,this.image.height))},didPend:function(){this.readyState=1,this._debugShowInDOM&&(this.textBox.style.color="#FF8800")},didDecode:function(){this.obtainPixelData(),this.readyState=2,this.resolveReadiness(this),this._debugShowInDOM&&(this.textBox.style.color="#00FF00")},obtainPixelData:function(){var f=this.image,p=this._context,v=this.videoDecoder,m=v.videoRotation,b=v.videoWidth,_=v.videoHeight,w=m%180==0?b:_,P=m%180==0?_:b;f.width===b&&f.height===_||(f.width=b,f.height=_),h.a.isFirefox&&p.getImageData(0,0,1,1);for(var O=0;O<m;O+=90)p.translate(O%180?_:b,0),p.rotate(Math.PI/2);p.drawImage(v.video,0,0,w,P),p.setTransform(1,0,0,1,0,0)},didGetSkipped:function(){a.a.log("    Skipped decoding frame "+this.number+". Using nearest frame instead."),this.lacksOwnPixelData=!0,this.readyState=2,this.resolveReadiness(this),this._debugShowInDOM&&(this._context.fillStyle="red",this._context.fillRect(0,0,this.image.width,this.image.height),this.textBox.style.color="#00FF00")}}),g=0,d=(function(){if(!h.a.isIE&&!h.a.isEdge)return null;var f=document.createElement("div");return f.style.cssText="top: 0px; left: 0px; width: 50px; height: 1px; overflow: hidden; position: absolute; z-index: 100000; opacity: 0.001; pointer-events: none;",document.body?document.body.appendChild(f):setTimeout(function(){return document.body.appendChild(f)},0),f})()},function(r,n,i){var s=i(0),o=s.a.Object.extend({state:s.a.observableProperty("unloaded"),validateResult:function(l){return!!l},loadSrc:function(l){},abortCurrentLoad:function(){},isSrcLoadAllowed:s.a.observableProperty(!0),_loadSrcOnceAllowed:s.a.observer("isSrcLoadAllowed",function(l){if(l&&this.state==="unloaded"){var a=this.src;a&&(this.state="loading",this.loadSrc(a))}}),src:s.a.observableProperty({didChange:function(l){this._isWritingSrcDueToWritingOfResult||(this._isWritingResultDueToWritingOfSrc=!0,this.result=null,this._isWritingResultDueToWritingOfSrc=!1,this.abortCurrentLoad(),l&&this.isSrcLoadAllowed?(this.state="loading",this.loadSrc(l)):this.state="unloaded")}}),result:s.a.observableProperty({decideRequiresUpdate:function(){return!0},didChange:function(l){if(!this._isWritingResultDueToWritingOfSrc){var a=this.validateResult(l)?"loaded":l||this._isWritingResultDueToError?"errored":"unloaded";this._isWritingResultDueToLoadOfSrc||this._isWritingResultDueToError||(this._isWritingSrcDueToWritingOfResult=!0,this.src=null,this._isWritingSrcDueToWritingOfResult=!1,this.abortCurrentLoad(),this.state="unloaded"),this.state=a}}}),error:s.a.observableProperty(null),_clearErrorOnceNoLongerErrored:s.a.observer("state",function(l){l!=="errored"&&(this.error=null)}),progress:s.a.observableProperty({defaultValue:0,dependencies:["state"],get:function(l){return this.state==="loading"?Math.min(1,Math.max(0,+l||0)):this.state==="loaded"?1:0}}),_clearProgressOnceUnloaded:s.a.observer("state",function(l){l==="unloaded"&&(this.progress=0)}),loadDidFail:function(l){this.state==="loading"&&(this._isWritingResultDueToError=!0,this.result=null,this._isWritingResultDueToError=!1,this.error=l)},loadDidSucceed:function(l){this.state==="loading"&&(this._isWritingResultDueToLoadOfSrc=!0,this.result=l,this._isWritingResultDueToLoadOfSrc=!1,this.error=null)}});n.a=o},function(r,n,i){function s(g,d,f){var p=g.getContext("2d"),v=f===7||f===8?270:f===3||f===4?180:f===5||f===6?90:0,m=d.naturalWidth,b=d.naturalHeight,_=v%180==0?m:b,w=v%180==0?b:m,P=f===2||f===4?-1:1,O=f===5||f===7?-1:1;g.width===_&&g.height===w||(g.width=_,g.height=w);for(var H=0;H<v;H+=90)p.translate(H%180?w:_,0),p.rotate(Math.PI/2);p.scale(P,O),p.translate((P-1)/2*m,(O-1)/2*b),p.drawImage(d,0,0),p.setTransform(1,0,0,1,0,0)}var o=i(16),l=i(51),a=i(6),u=i(3),c=[],h={},y=o.a.extend({mimeType:"image/jpeg",beginSecondaryLoad:function(g,d){var f=i.i(l.a)(g);this._exifOrientationInLastLoadedBuffer=f.orientation||NaN,f.photosRenderEffect===3&&(this.effectType=u.a.EXPOSURE),c[0]=g,h.type=d,this._internalImage.src=this._internalImageSrc=URL.createObjectURL(new Blob(c,h)),(window.photoBuffers||(window.photoBuffers=[])).push(g)},abortCurrentSecondaryLoad:function(){this.__internalImage&&this._internalImage.removeAttribute("src"),this._internalImageSrc&&(URL.revokeObjectURL(this._internalImageSrc),this._internalImageSrc=null),this._exifOrientationInLastLoadedBuffer=null,this.effectType=null},get _internalImage(){var g=this.__internalImage;return g||(g=this.__internalImage=new Image,g.addEventListener("load",this._internalImageLoadDidSucceed.bind(this)),g.addEventListener("error",(function(d){this.loadDidFail(d)}).bind(this))),g},get _internalCanvas(){return this.__internalCanvas||(this.__internalCanvas=document.createElement("canvas"))},loadDidFail:function(g){if(g)return g.errCode=a.a.PHOTO_FAILED_TO_LOAD,this._super(g)},_internalImageLoadDidSucceed:function(){var g=this._internalImage;this._exifOrientationInLastLoadedBuffer!==1&&(s(this._internalCanvas,this._internalImage,this._exifOrientationInLastLoadedBuffer),g=this._internalCanvas),this.loadDidSucceed(g)}});n.a=y},function(r,n,i){var s=i(0),o=i(33),l=i(31),a=i(3),u=i(1),c=s.a.Object.extend({videoSrc:s.a.proxyProperty("_videoProvider.src"),videoMimeType:s.a.proxyProperty("_videoProvider.mimeType"),video:s.a.proxyProperty("_videoProvider.result"),effectType:s.a.observableProperty({dependencies:["_photoProvider.effectType","_videoProvider.effectType","preloadedEffectType"],get:function(){return this._photoProvider.effectType||this._videoProvider.effectType||this.preloadedEffectType||a.a.default},didChange:function(h){this.setPlaybackStyle(h)}}),preloadedEffectType:s.a.observableProperty({get:function(h){return h},set:function(h){return this._photoProvider.effectType=null,this._videoProvider.effectType=null,h}}),setPlaybackStyle:function(h){this.effectType=h,this.playbackStyle=a.a.toPlaybackStyle(h)},photoSrc:s.a.proxyProperty("_photoProvider.src"),photoMimeType:s.a.proxyProperty("_photoProvider.mimeType"),photo:s.a.proxyProperty("_photoProvider.result"),playbackStyle:s.a.observableProperty(u.a.default),metadataVideoSrc:s.a.proxyProperty("_metadataVideoProvider.src"),progress:s.a.observableProperty({readOnly:!0,dependencies:["_photoProvider.progress","_videoProvider.state","_videoProvider.progress","_metadataVideoProvider.state","_metadataVideoProvider.progress"],get:function(){var h=this._videoProvider,y=this._metadataVideoProvider,g=h.state,d=y.state,f=g!=="unloaded"||d!=="unloaded"?.75:0,p=f?d==="unloaded"?h.progress:(h.progress+y.progress)/2:0;return this._photoProvider.progress*(1-f)+p*f}}),photoTime:s.a.observableProperty({dependencies:["_metadataVideoProvider.photoTime","_videoProvider.photoTime"],get:function(h){return+h===h?h:this._metadataVideoProvider.photoTime||this._videoProvider.photoTime||null}}),videoRotation:s.a.observableProperty({dependencies:["_videoProvider.videoRotation"],get:function(h){if(+h===h)return h;var y=this._videoProvider.videoRotation;return+y===y?y:null},set:function(h){return 90*Math.round(h/90)%360|0}}),frameTimes:s.a.observableProperty({dependencies:["_metadataVideoProvider.frameTimes","_videoProvider.frameTimes"],get:function(h){return h||this._metadataVideoProvider.frameTimes||this._videoProvider.frameTimes},set:function(h){if(!h)return null;if(typeof h=="string"){var y=s.a.arrayPool.get();s.a.String.splitIntoArray(h,",",y),s.a.Array.mapIntoArray(y,function(m){return Number(m.trim())},y),h=y}for(var g=Array.isArray(h),d=g&&h.length>=2,f=0,p=h.length;f<p&&d;f++){var v=h[f];+v!==v&&(d=!1)}if(!d)throw new Error("If frameTimes is provided, it must be provided as an Array or comma-delimited string containing numbers.");return h}}),videoDuration:s.a.observableProperty({readOnly:!0,dependencies:["frameTimes"],get:function(){return this.frameTimes?this.frameTimes[this.frameTimes.length-1]:void 0}}),proactivelyLoadsVideo:s.a.observableProperty(!1),needsLoadedVideoForPlayback:s.a.observableProperty(!1),_reset_needsLoadedVideoForPlayback_whenAppropriate:s.a.observer("video",function(){this.needsLoadedVideoForPlayback=!1}),isVideoLoadAllowed:s.a.observableProperty({readOnly:!0,dependencies:["proactivelyLoadsVideo","needsLoadedVideoForPlayback"],get:function(){return this.proactivelyLoadsVideo||this.needsLoadedVideoForPlayback}}),errors:s.a.observableProperty({readOnly:!0,dependencies:["_videoProvider.error","_photoProvider.error"],get:function(){return[this._photoProvider.error,this._videoProvider.error].filter(function(h){return!!h})}}),lastError:s.a.observableProperty(),_lastPhotoError:s.a.observableProperty({readOnly:!0,dependencies:["_photoProvider.error"],get:function(){return this._photoProvider.error},didChange:function(h){this.lastError=h}}),_lastVideoError:s.a.observableProperty({readOnly:!0,dependencies:["_videoProvider.error"],get:function(){return this._videoProvider.error},didChange:function(h){this.lastError=h}}),_metadataVideoProvider:s.a.observableProperty(function(){return o.a.extend({requiresMimeTypeForRawArrayBufferSrc:!1,actuallyProvidesResultingVideoFromSecondaryLoad:!1}).create()}),_videoProvider:s.a.observableProperty(function(){return o.a.extend({owner:s.a.observableProperty(this),isSrcLoadAllowed:s.a.proxyProperty("owner.isVideoLoadAllowed"),exposedSrcKeyForErrorStrings:"videoSrc",exposedMimeTypeKeyForErrorStrings:"videoMimeType"}).create()}),_photoProvider:s.a.observableProperty(function(){return l.a.extend({exposedSrcKeyForErrorStrings:"photoSrc",exposedMimeTypeKeyForErrorStrings:"photoMimeType"}).create()})});n.a=c},function(r,n,i){function s(_){var w=[0,0,0,0,0,0,0,0,1];w[0]=o(_.slice(0,4),16,16),w[1]=o(_.slice(4,8),16,16),w[3]=o(_.slice(12,16),16,16),w[4]=o(_.slice(16,20),16,16);for(var P=0;P<b.length;P++)if(l(b[P],w))return 90*P;return 0}function o(_,w,P){var O=_[0]<<24|_[1]<<16|_[2]<<8|_[3];return Math.abs(O>>P)*((O&1<<w+P-1)!=0?-1:1)}function l(_,w){if(_===w)return!0;if(!_||!w)return!1;var P=_.length;if(P!==w.length)return!1;for(var O=0;O<P;O++)if(_[O]!==w[O])return!1;return!0}var a=i(16),u=i(45),c=i(0),h=i(5),y=i(6),g=i(2),d=i(3),f=[],p={},v=a.a.extend({__internalVideo:null,_internalVideoSRC:null,photoTime:c.a.observableProperty(),playbackStyle:c.a.observableProperty(null),effectType:c.a.observableProperty(null),frameTimes:c.a.observableProperty(),videoRotation:c.a.observableProperty(),actuallyProvidesResultingVideoFromSecondaryLoad:!0,_clearMetadataPropertiesOnUnload:c.a.observer("state",function(_){_!=="loaded"&&(this.photoTime=this.frameTimes=this.videoRotation=void 0)}),beginSecondaryLoad:function(_,w){this.preprocessAndAttemptToReadMetadataFromBuffer(_),this.actuallyProvidesResultingVideoFromSecondaryLoad&&(f[0]=_,p.type=w==="video/quicktime"?"video/mp4":w,w==="application/octet-stream"&&(h.a.warn('Encountered a Content-Type of "application/octet-stream" for the file obtained for `videoSrc`.Some browsers may be unable to use the video with this MIME type. If the video portion of the Player is not functioning, make sure the proper MIME type is being provided with the response,or provide the proper MIME type manually by assigning it to the `videoMimeType` property on the Player instance. For now, an attempt will be made to treat the videos bytes as "video/mp4", but playback is not guaranteed unless either of these corrective steps are taken.'),w="video/mp4"),this._internalVideo.src=this._internalVideoSRC=URL.createObjectURL(new Blob(f,p)),g.a.isIOS&&this._internalVideo.load())},abortCurrentSecondaryLoad:function(){this.__internalVideo&&(this.__internalVideo.pause(),this.__internalVideo.removeAttribute("src"),this.__internalVideo.load(),g.a.isIOS&&(this.__internalVideo=null),this._internalVideoSRC&&(URL.revokeObjectURL(this._internalVideoSRC),this._internalVideoSRC=null),this.effectType=null)},get _internalVideo(){var _=this.__internalVideo;return _||(_=this.__internalVideo=document.createElement("video"),_.addEventListener("canplay",this.loadDidSucceed.bind(this)),_.addEventListener("error",this.loadDidFail.bind(this)),_.volume=0),_},loadDidFail:function(_){if(_)return _.errCode=y.a.VIDEO_FAILED_TO_LOAD,this._super(_);var w=this.__internalVideo;return w.error.errCode=y.a.VIDEO_FAILED_TO_LOAD,w&&this._super(w.error)},loadDidSucceed:function(){var _=this.__internalVideo;return _&&this._super(_)},preprocessAndAttemptToReadMetadataFromBuffer:function(_){var w=void 0,P=void 0;try{w=new u.a(new u.b(_)),w.read()}catch{w=null}if(!w)return this.photoTime=null,this.frameTimes=null,void(this.videoRotation=0);var O=(P=w.tracks)&&(P=P.vide)&&(P=P[0])&&P.getAllSampleSeconds&&P.getAllSampleSeconds();O&&(this.frameTimes=O);var H=void 0;try{H=w.tracks.meta[0].timeToSeconds(w.tracks.meta[0].trak.edts.elst.editList[0].trackDuration)}catch{}H&&(this.photoTime=H);var U=new Uint8Array(_),L=(P=w.tracks)&&(P=P.soun)&&(P=P[0])&&(P=P.trak)&&P.offset;if(L){var N="free";U[L+4]=N.charCodeAt(0),U[L+5]=N.charCodeAt(1),U[L+6]=N.charCodeAt(2),U[L+7]=N.charCodeAt(3)}var x=(P=w.tracks)&&(P=P.vide)&&(P=P[0])&&(P=P.trak)&&(P=P.tkhd)&&(P=P.offset)&&P+48,$=0;if(x){for(var Q=[],A=0;A<m.length;A++)Q[A]=U[x+A];if($=s(Q))for(var S=0;S<m.length;S++)U[x+S]=m[S]}this.videoRotation=$;var k=w.metaData.keys&&w.metaData.keys.keyList.get("com.apple.photos.variation-identifier"),R=void 0;if(k>0)switch(w.metaData.values.items[k]){case 1:R=d.a.LOOP;break;case 2:R=d.a.BOUNCE;break;case 3:R=d.a.EXPOSURE}this.effectType=R}}),m=[0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0],b=[[1,0,0,0,1,0,0,0,1],[0,1,0,-1,0,0,0,0,1],[-1,0,0,0,-1,0,0,0,1],[0,-1,0,1,0,0,0,0,1]];n.a=v},function(r,n,i){var s=i(4),o=i(1),l=i(2),a=l.a.isSafari,u=s.a.create({correspondingPlaybackStyle:o.a.FULL,get minimumShortenedDuration(){return this.enterDuration+this.exitDuration+.01},get spontaneousFinishDuration(){return this.exitDuration},enterDuration:1/3,exitDuration:.5,videoBeginTime:.15,zoomScaleFactor:1.075,blurRadius:5,blurRadiusStep:.2,requiresInterpolation:!0,quantizeRadius:function(c){return this.blurRadiusStep?Math.round(c/this.blurRadiusStep)*this.blurRadiusStep:c},easeInOut:function(c){return c<0?0:c>1?1:.5-.5*Math.cos(c*Math.PI)},calculateAnimationDuration:function(c,h,y){var g=h?h+this.videoBeginTime+this.exitDuration:0;return Math.max(0,Math.min(c||1/0,g))},getEntranceExitParameter:function(c,h){return Math.min(Math.max(0,Math.min(1,1-this.easeInOut((c-(h-this.exitDuration))/this.exitDuration))),1-Math.max(0,Math.min(1,1-this.easeInOut(c/this.enterDuration))))||0},getTransform:function(c,h,y,g){var d=arguments.length>4&&arguments[4]!==void 0?arguments[4]:1,f=arguments.length>5&&arguments[5]!==void 0?arguments[5]:1,p=arguments.length>6&&arguments[6]!==void 0?arguments[6]:1,v=1+(this.zoomScaleFactor-1)*this.getEntranceExitParameter(c,h),m=-(v-1)/2*y,b=-(v-1)/2*g,_=Math.round(m*devicePixelRatio)/devicePixelRatio,w=Math.round(b*devicePixelRatio)/devicePixelRatio;return Math.abs(v-d)<1e-5?"translate3d("+_+"px, "+w+"px, 0) scale3d("+f+", "+p+", 1)":m||b||v?"translate3d("+m+"px, "+b+"px, 0) scale3d("+v+", "+v+", 1)":"translate3d(0, 0, 0)"},photo:s.a.PhotoIngredient.create({opacity:s.a.computedStyle(function(c){if(c<this.recipe.enterDuration)return(1-this.recipe.easeInOut(c/this.recipe.enterDuration)).toString();if(c<this.renderer.duration-this.recipe.exitDuration)return"0";var h=this.recipe.easeInOut((c-(this.renderer.duration-this.recipe.exitDuration))/this.recipe.exitDuration);return h!==1?h:"1"}),display:s.a.computedStyle(function(c){return c>this.recipe.enterDuration&&c<this.renderer.duration-this.recipe.exitDuration?"none":""}),filter:s.a.computedStyle(function(c){if(!a)return"";var h=this.recipe,y=h.blurRadius*h.getEntranceExitParameter(c,this.renderer.duration);return y?"blur("+h.quantizeRadius(y)+"px)":""}),transform:s.a.computedStyle(function(c){return this.recipe.getTransform(c,this.renderer.duration,this.displayWidth,this.displayHeight)}),zIndex:s.a.computedStyle(function(){return 3})}),video:s.a.InterpolatedVideoIngredient.create({get backingScaleFactor(){return this.recipe.zoomScaleFactor},lookaheadTime:.01+7/15,videoTimeAtTime:function(c){var h=Math.max(0,Math.min(this.videoDuration,c-this.recipe.videoBeginTime));return Math.min(h,this.renderer.duration-this.recipe.exitDuration-this.recipe.videoBeginTime)},prepareVideoFramesFromTime:function(c){this.retainFramesForTime(c,c+this.lookaheadTime)},display:s.a.computedStyle(function(c){return c===0||c===this.renderer.duration?"none":""}),transform:s.a.computedStyle(function(c){return this.recipe.getTransform(c,this.renderer.duration,this.displayWidth,this.displayHeight,this.backingScaleFactor,this.backingScaleX,this.backingScaleY)}),zIndex:s.a.computedStyle(function(){return 1})})});n.a=u},function(r,n,i){var s=i(4),o=i(1),l=s.a.create({correspondingPlaybackStyle:o.a.HINT,minimumShortenedDuration:.9,get spontaneousFinishDuration(){return this.exitBlurDuration},exitBlurDuration:.75,bottomVideoRevealBeginTime:.1,zoomScaleFactor:1.075,blurRadius:7.5,blurRadiusStep:1,requiresInterpolation:!0,quantizeRadius:function(a){return Math.round(a/this.blurRadiusStep)*this.blurRadiusStep},tween:function(a){return a<0?0:a>1?1:.5-.5*Math.cos(a*Math.PI)},calculateAnimationDuration:function(a,u,c){var h=u?u-c+this.exitBlurDuration:0;return Math.max(0,Math.min(a||1/0,h))},photo:s.a.PhotoIngredient.create({hideDuration:.06,get returnDuration(){return this.recipe.exitBlurDuration},opacity:s.a.computedStyle(function(a){if(a<this.hideDuration)return(1-this.recipe.tween(a/this.hideDuration)).toString();if(a<this.renderer.duration-this.returnDuration)return"0";var u=this.recipe.tween((a-(this.renderer.duration-this.returnDuration))/this.returnDuration);return u!==1?u.toString():""}),display:s.a.computedStyle(function(a){return a>this.hideDuration&&a<this.renderer.duration-this.returnDuration?"none":""}),webkitFilter:s.a.computedStyle(function(a){if(a<this.renderer.duration-this.returnDuration)return"";var u=this.recipe.blurRadius*(1-this.recipe.tween((a-(this.renderer.duration-this.returnDuration))/this.returnDuration));return u?"blur("+this.recipe.quantizeRadius(u)+"px)":""}),transform:s.a.computedStyle(function(a){if(a<this.renderer.duration-this.returnDuration)return"translateZ(0)";var u=1+(this.recipe.zoomScaleFactor-1)*(1-this.recipe.tween((a-(this.renderer.duration-this.returnDuration))/this.returnDuration));return"translate3d("+-(u-1)/2*this.displayWidth+"px, "+-(u-1)/2*this.displayHeight+"px, 0) scale3d("+u+", "+u+", 1)"}),zIndex:s.a.computedStyle(function(){return 3})}),video:s.a.InterpolatedVideoIngredient.create({get backingScaleFactor(){return this.recipe.zoomScaleFactor},scaleInDuration:.15,get blurOutDuration(){return this.recipe.exitBlurDuration},lookaheadTime:.01+7/15,videoTimeAtTime:function(a){return Math.min(this.videoDuration,a+this.renderer.photoTime)},prepareVideoFramesFromTime:function(a){this.retainFramesForTime(a,a+this.lookaheadTime)},display:s.a.computedStyle(function(a){return a&&a!==this.renderer.duration?"":"none"}),transform:s.a.computedStyle(function(a){var u=1+(this.recipe.zoomScaleFactor-1)*Math.max(0,Math.min(1,1-this.recipe.tween((a-(this.renderer.duration-this.blurOutDuration))/this.blurOutDuration)-(1-this.recipe.tween(a/this.scaleInDuration)))),c=-(u-1)/2*this.displayWidth,h=-(u-1)/2*this.displayHeight,y=Math.round(c*devicePixelRatio)/devicePixelRatio,g=Math.round(h*devicePixelRatio)/devicePixelRatio;return Math.abs(u-this.backingScaleFactor)<1e-5?"translate3d("+y+"px, "+g+"px, 0) scale3d("+this.backingScaleX+", "+this.backingScaleY+", 1)":"translate3d("+c+"px, "+h+"px, 0) scale3d("+u+", "+u+", 1)"}),webkitFilter:s.a.computedStyle(function(a){var u=this.recipe.blurRadius*this.recipe.tween((a-(this.renderer.duration-this.blurOutDuration))/this.blurOutDuration);return u?"blur("+this.recipe.quantizeRadius(u)+"px)":""}),zIndex:s.a.computedStyle(function(){return 1})})});n.a=l},function(r,n,i){var s=i(4),o=i(2),l=(o.a.isSafari,s.a.create({requiresInterpolation:!0,photo:s.a.PhotoIngredient.create({display:s.a.computedStyle(function(a){return this.isPlaying||a>0?"none":""})}),video:s.a.InterpolatedVideoIngredient.create({lookaheadTime:.01+7/15,videoTimeAtTime:function(a){return a%this.renderer.duration},prepareVideoFramesFromTime:function(a){this.retainFramesForTime(a,a+this.lookaheadTime)},display:s.a.computedStyle(function(a){return""})}),beginFinishingPlaybackEarly:function(a){a.autoplay||(a.isPlaying?a.pause():a.wantsToPlay=!1)},continuePlayback:function(a){var u=a.currentTime,c=a.duration;u>=c&&(a.currentTime=u%c),a._rafID=requestAnimationFrame(a._nextFrame.bind(a))}}));n.a=l},function(r,n,i){var s=i(4),o=i(36),l=i(1);o.a.register();var a=s.a.create({correspondingPlaybackStyle:l.a.LOOP,photo:s.a.PhotoIngredient.create({display:s.a.computedStyle(function(u){return this.isPlaying||u>0?"none":""})}),video:s.a.VideoIngredient.create({display:s.a.computedStyle(function(u){return""})}),beginFinishingPlaybackEarly:function(u){u.autoplay||(u.isPlaying?u.pause():u.wantsToPlay=!1)},continuePlayback:function(u){var c=u.currentTime,h=u.duration;c>=h&&(u.currentTime=c%h),u._rafID=requestAnimationFrame(u._nextFrame.bind(u))},requestMoreCompatibleRecipe:function(u){return s.a.registerRecipeWithPlaybackStyle(o.a,this.correspondingPlaybackStyle),o.a}});n.a=a},function(r,n,i){var s=i(0),o=i(41),l=i(1),a=i(13),u=o.a.extend(a.a,{_loCanvas:null,_hiCanvas:null,backingScaleFactor:1,setUpForRender:function(){var c=this.element,h=(this.isPlaying,this.renderer),y=h.autoplay,g=h.parentView,d=h.playbackStyle,f=h.video;if(!this._loCanvas||!this._hiCanvas){c.innerHTML&&(c.innerHTML="");var p=this._loCanvas=s.a.canvasPool.get(),v=this._hiCanvas=s.a.canvasPool.get();p._context=p.getContext("2d"),v._context=v.getContext("2d"),p.style.cssText=v.style.cssText="position: absolute; left: 0; top: 0; width: 100%; height: 100%; transform: translateZ(0);",c.appendChild(p),c.appendChild(v),this._swapCanvases()}c.className="lpk-render-layer lpk-video",c.style.position="absolute",c.style.transformOrigin="0 0",c.style.zIndex=1,this._super(),d===l.a.LOOP&&(this.shouldLoop=!0),this.shouldLoop&&requestAnimationFrame(function(){f.currentTime=-1,y&&g.play()}),window.test=this},updateSize:function(c,h){if(!arguments.length)return this._super();this._super(c,h);var y=Math.ceil(c*this.backingScaleFactor),g=Math.ceil(h*this.backingScaleFactor);this.backingScaleX=y/c,this.backingScaleY=g/h,this.element.style.width=y+"px",this.element.style.height=g+"px",this._loCanvas&&this._hiCanvas&&(this._loCanvas.width=this._hiCanvas.width=y*devicePixelRatio,this._loCanvas.height=this._hiCanvas.height=g*devicePixelRatio,this._loCanvas._drawnFrameNumber=this._hiCanvas._drawnFrameNumber=-1,this.renderAtTime())},renderAtTime:function(c){if(!arguments.length)return this._super();this._super(c);var h=this.backingScaleX,y=this.backingScaleY;h===1&&y===1||(this.element.style.transform+=" scale3d("+1/h+", "+1/y+", 1)")},renderFramePair:function(c,h,y){(c&&this._hiCanvas._drawnFrameNumber===c.number||h&&this._loCanvas._drawnFrameNumber===h.number)&&this._swapCanvases(),this._putFrameInCanvasIfNeeded(c,this._loCanvas),this._putFrameInCanvasIfNeeded(h,this._hiCanvas),h&&(this._hiCanvas.style.opacity=y)},_swapCanvases:function(){var c=this._hiCanvas;this._hiCanvas=this._loCanvas,this._loCanvas=c,this._loCanvas.style.opacity="",this._loCanvas.style.zIndex=1,this._hiCanvas.style.zIndex=2},_putFrameInCanvasIfNeeded:function(c,h){h._drawnFrameNumber!==(h._drawnFrameNumber=c?c.number:-1)&&(h.setAttribute("data-frame-number",h._drawnFrameNumber.toString()),c?h._context.drawImage(c.image,0,0,h.width,h.height):h._context.clearRect(0,0,h.width,h.height))},dispose:function(){this._super(),this._loCanvas&&s.a.canvasPool.ret(this._loCanvas),this._hiCanvas&&s.a.canvasPool.ret(this._hiCanvas)},tearDownFromRender:function(){var c=this.renderer,h=c.parentView;this.shouldLoop=!1,h&&h.stop(),this._clearAllRetainedFrames(),this._super()}});n.a=u},function(r,n,i){var s=i(42),o=i(13),l=i(49),a=s.a.extend(o.a,{tagName:"canvas",get _canvas(){return this.element},get _context(){return this.__context||(this.__context=this._canvas.getContext("2d"))},init:function(){this._super.apply(this,arguments),this.element.className="lpk-render-layer lpk-photo",this.element.style.position="absolute",this.element.style.width=this.element.style.height="100%",this.element.style.transformOrigin="0 0",this.element.style.zIndex=2},tearDownFromRender:function(){this._super(),this._canvas.width=this._canvas.height=0},updateSize:function(u,c){if(!arguments.length)return this._super();this._super(u,c);var h=Math.ceil(u*devicePixelRatio),y=Math.ceil(c*devicePixelRatio),g=this.photo,d=this._canvas;this._lastPhoto===(this._lastPhoto=g)&&d.width===h&&d.height===y||(d.width=h,d.height=y,g&&i.i(l.a)(this._context,g,0,0,h,y))}});n.a=a},function(r,n,i){var s=i(0),o=i(2),l=i(13),a=i(43),u=a.a.extend(l.a,{_isPlayingChanged:s.a.observer("isPlaying",function(c){this._video&&(c?(this.duration=1/0,this.play()):this.pause())}),_isVisible:!1,applyStyles:function(){var c=this.element,h=this.video,y=this.videoRotation,g=h.videoHeight,d=h.videoWidth,f=1;[90,270].indexOf(y)>=0&&(f=d/g);var p=`
                height: 100%;
                position: absolute;
                width: 100%;
                -moz-transform: scale(`+f+") rotate("+y+`deg);
                -webkit-transform: scale(`+f+") rotate("+y+`deg);
                -o-transform: scale(`+f+") rotate("+y+`deg);
                -ms-transform: scale(`+f+") rotate("+y+`deg);
                transform: scale(`+f+") rotate("+y+`deg);
                z-index: 1;
            `;c.setAttribute("style",p),c.className="lpk-render-layer lpk-video",h.style.height="100%",h.style.width="100%"},cleanupElement:function(){var c=this.element,h=this.renderer,y=this._video,g=h.parentView;c.innerHtml&&(c.innerHtml=""),y&&(y.loop=!1,y.muted=!1,y.removeEventListener("pause",this.playIfPlaying)),g&&g.stop(),delete this._video},pause:function(){var c=this._isVisible,h=this._video;c&&h.pause()},play:function(){if(this._isVisible){var c=this._video,h=c.play();h?h.catch(this._handlePlayFailure):o.a.isIE||o.a.isEdge||(c.pause(),setTimeout(this._handlePlayFailure))}},_handlePlayFailure:s.a.boundFunction(function(){this.renderer.requestMoreCompatibleRecipe()}),playIfPlaying:s.a.boundFunction(function(){var c=this.isPlaying,h=this._video;if(c&&h.paused){var y=h.play();y&&y.catch(function(){})}}),setUpForRender:function(){var c=this.element,h=(this.isPlaying,this.renderer),y=h.autoplay,g=h.parentView,d=h.video;this.cleanupElement(),c.appendChild(d),this.applyStyles(),d.loop=!0,d.muted=!0,this._video=d,this._isVisible=!0,this._super(),y&&(d.addEventListener("pause",this.playIfPlaying),g.play())},tearDownFromRender:function(){this.cleanupElement(),this._isVisible=!1,this._super()}});n.a=u},function(r,n,i){function s(g){g.retain()}function o(g){g.release()}var l=i(0),a=i(7),u=i(17),c=a.a.extend({videoDecoder:l.a.proxyProperty("renderer.videoDecoder"),videoDuration:l.a.proxyProperty("videoDecoder.duration"),canRender:l.a.proxyProperty({readOnly:!0,proxyPath:"videoDecoder.canProvideFrames"}),init:function(){this._super.apply(this,arguments);var g=this.layerName,d=this.recipe;this._framePrepIDKey=d.name+"_"+g+"_framePrepID"},videoTimeAtTime:function(g){return g},_videoTimeAtTime:function(g){return isNaN(g)?g:this.videoTimeAtTime(g)},prepareToRenderAtTime:function(g){var d=this._currentPrepID=++h;if(!this.canRender)return!1;this.prepareVideoFramesFromTime(g);for(var f,p=this._retainedFrames,v=0,m=0;f=p[m];m++)f.readyState!==2&&(f[this._framePrepIDKey]=d,f.onReadyOrFail(this._frameDidPrepare),v++);return this._preppingFrameCount=v,!v},reduceMemoryFootprint:function(){this._super(),this._clearAllRetainedFrames()},_clearAllRetainedFrames:function(){this._clearExtraRetainedFrames(),this._clearRetainedInstantaneousFrames()},_clearExtraRetainedFrames:function(){var g=this._retainedFrames;g&&(g.forEach(o),g.length=0)},_clearRetainedInstantaneousFrames:function(){this._retainedLoFrame&&this._retainedLoFrame.release(),this._retainedHiFrame&&this._retainedHiFrame.release(),this._retainedLoFrame=this._retainedHiFrame=null},_frameDidPrepare:l.a.boundFunction(function(g){g[this._framePrepIDKey]===this._currentPrepID&&(g[this._framePrepIDKey]=void 0,--this._preppingFrameCount||this.renderer.prepareToRenderAtTime(this.renderer.currentTime))}),prepareVideoFramesFromTime:function(g){this.retainFramesForTime(g)},canRenderAtTime:function(g){if(this.display(g)==="none")return!0;if(!this.canRender)return!1;for(var d,f=!0,p=this.requiredFramesForTime(g),v=0;d=p[v];v++)f=f&&d.readyState===2,d.retain().release();return f},renderAtTime:function(g){if(!arguments.length)return this._super();if(this.display(g)==="none")return this._clearRetainedInstantaneousFrames(),this._super(g);var d=this._videoTimeAtTime(g),f=this.requiredFramesForVideoTime(d),p=f[0]||null,v=f[1]||null;if(p&&p.retain(),v&&v.retain(),this._clearRetainedInstantaneousFrames(),this._retainedLoFrame=p,this._retainedHiFrame=v,p&&(p=p.backingFrame),v&&(v=v.backingFrame),p&&v&&p.number>v.number){var m=p;v=p,p=m}p===v&&(v=null);var b=!p||v?this.videoDecoder.fractionalIndexForTime(d):p.frameNumber,_=b-(0|b);this.renderFramePair(p,v,_),this._super(g)},renderFramePair:function(){},requiredFramesForVideoTime:function(g,d,f){isNaN(d)&&(d=g);var p=this.videoDecoder,v=this.videoDuration,m=p.frameCount,b=y;if(b.length=0,d<0||g>v||isNaN(g)||isNaN(d))return b;var _=Math.max(0,Math.floor(p.fractionalIndexForTime(g))),w=Math.min(p.frameCount,Math.ceil(p.fractionalIndexForTime(d))),P=w<_,O=P?m-1:w;if(_===O-1){var H=p.frameTimes;H[O]-H[_]<1/30+.001&&(O=_)}for(var U=_;U<=O;U++)u.a&&U===0||(b.push(p.getFrame(U,f)),U+1===m&&P&&(U=-1,O=w));return b},requiredFramesForTime:function(g,d,f){return this.requiredFramesForVideoTime(this._videoTimeAtTime(g),this._videoTimeAtTime(d),f)},retainFramesForVideoTime:function(g,d,f){d===void 0&&(d=g);var p=this.lookaheadTime,v=this.shouldLoop,m=this.requiredFramesForVideoTime(g,d,f),b=this._retainedFrames||(this._retainedFrames=[]);m.forEach(s);for(var _=b.length-1;_>=0;_--){var w=b[_],P=w.time;(!v||P>p/2)&&(o(w),b.splice(_,1))}b.push.apply(b,m)},retainFramesForTime:function(g,d,f){return this.retainFramesForVideoTime(this._videoTimeAtTime(g),this._videoTimeAtTime(d),f)},dispose:function(){this.retainFramesForVideoTime(NaN),this._super()}}),h=1,y=[];n.a=c},function(r,n,i){var s=i(7),o=i(0),l=s.a.extend({isPlaying:o.a.proxyProperty({readOnly:!0,proxyPath:"renderer.parentView.isPlaying"}),photo:o.a.proxyProperty({readOnly:!0,proxyPath:"renderer.photo"}),canRender:o.a.proxyProperty("photo"),canRenderAtTime:function(a){var u=this.photo;return!(this.display(a)!=="none"&&(!u||u instanceof Image&&!u.complete))}});n.a=l},function(r,n,i){var s=i(7),o=i(0),l=s.a.extend({canRender:o.a.proxyProperty({readOnly:!0,proxyPath:"video"}),isPlaying:o.a.proxyProperty({readOnly:!0,proxyPath:"renderer.parentView.isPlaying"}),video:o.a.proxyProperty({readOnly:!0,proxyPath:"renderer.video"}),videoRotation:o.a.proxyProperty({readOnly:!0,proxyPath:"renderer.provider.videoRotation"})});n.a=l},function(r,n,i){function s(b,_){if(!(b instanceof _))throw new TypeError("Cannot call a class as a function")}function o(b){var _=i.i(a.a)(b),w=h.get(_);if(w)return w;var P=b.map(function(O){if(O[0]==="i"&&d(O[1]))return"I"+O.substring(1)});return b=b.concat(P.filter(function(O){return!!O})),w=new RegExp(b.join("|"),"g"),h.set(_,w),w}function l(b,_){var w=b.charCodeAt(0),P=_.charCodeAt(0),O=new Map;return function(H){var U=O.get(H);if(U!==void 0)return U;var L=H.charCodeAt(0);return U=L>=w&&L<=P,O.set(H,U),U}}var a=i(20),u=(function(){function b(_,w){for(var P=0;P<w.length;P++){var O=w[P];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(_,O.key,O)}}return function(_,w,P){return w&&b(_.prototype,w),P&&b(_,P),_}})(),c=["iOS","iPhone","iPad","iPod","WebKit"],h=new Map,y=l("0","9"),g=l("a","z"),d=l("A","Z"),f=function(b){return g(b)||d(b)},p=function(b){return f(b)||y(b)},v=new Map,m=(function(){function b(){s(this,b)}return u(b,null,[{key:"splitIntoArray",value:function(_,w,P){for(var O=_.indexOf(w),H=0,U=w.length;O!==-1;)P.push(_.substring(H,O)),H=O+U,O=_.indexOf(w,H);P.push(_.substring(H))}},{key:"hyphenate",value:function(_,w,P){if(!_)return"";w||w===null||w===!1||(w=c);var O=w||P?i.i(a.a)(w)+"#"+_+"#"+!!P:_,H=v.get(O);if(H)return H;if(Array.isArray(w)){var U=b.hyphenateCarefully(_,w,P);return v.set(O,U),U}var L=_.length,N="",x=void 0,$=void 0,Q=void 0,A=void 0,S=void 0;for(x=0;x<L;x++)$=_[x-1],Q=_[x],A=Q.toLowerCase(),S=_[x+1],$&&p(Q)&&p($)&&(!d($)&&d(Q)||y($)&&f(Q)||S&&d($)&&d(Q)&&g(S))?N+="-"+A:N+=A;return v.set(O,N),N}},{key:"hyphenateCarefully",value:function(_,w,P){var O=o(w),H=_.match(O);if(!H||!H.length)return b.hyphenate(_,null,P);for(var U=_.split(O),L=b.hyphenate(U[0]),N=0,x=H.length;N<x;N++){var $=H[N];P||($=$.toLowerCase());var Q=U[N+1];Q&&(Q=b.hyphenate(Q,null,P)),L+=(L&&"-")+$,Q&&(L+=(f(Q[0])?"-":"")+Q)}return L}}]),b})();n.a=m},function(r,n,i){function s(g,d){if(!(g instanceof d))throw new TypeError("Cannot call a class as a function")}function o(g,d){g||l(d)}function l(g){throw g}var a=i(5);i.d(n,"b",function(){return c}),i.d(n,"a",function(){return h});var u=(function(){function g(d,f){for(var p=0;p<f.length;p++){var v=f[p];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(d,v.key,v)}}return function(d,f,p){return f&&g(d.prototype,f),p&&g(d,p),d}})(),c=((function(){function g(d,f){s(this,g),this.w=d,this.h=f}u(g,[{key:"toString",value:function(){return"("+this.w+", "+this.h+")"}},{key:"getHalfSize",value:function(){return new g(this.w>>>1,this.h>>>1)}},{key:"length",value:function(){return this.w*this.h}}])})(),(function(){function g(d,f,p){s(this,g),this.bytes=new Uint8Array(d),this.start=f||0,this.pos=this.start,this.end=f+p||this.bytes.length}return u(g,[{key:"readU8Array",value:function(d){if(this.pos>this.end-d)return null;var f=this.bytes.subarray(this.pos,this.pos+d);return this.pos+=d,f}},{key:"readU32Array",value:function(d,f,p){if(f=f||1,this.pos>this.end-d*f*4)return null;if(f===1){for(var v=new Uint32Array(d),m=0;m<d;m++)v[m]=this.readU32();return v}for(var b=new Array(d),_=0;_<d;_++){var w=null;if(p){w={};for(var P=0;P<f;P++)w[p[P]]=this.readU32()}else{w=new Uint32Array(f);for(var O=0;O<f;O++)w[O]=this.readU32()}b[_]=w}return b}},{key:"read8",value:function(){return this.readU8()<<24>>24}},{key:"readU8",value:function(){return this.pos>=this.end?null:this.bytes[this.pos++]}},{key:"read16",value:function(){return this.readU16()<<16>>16}},{key:"readU16",value:function(){if(this.pos>=this.end-1)return null;var d=this.bytes[this.pos+0]<<8|this.bytes[this.pos+1];return this.pos+=2,d}},{key:"read24",value:function(){return this.readU24()<<8>>8}},{key:"readU24",value:function(){var d=this.pos,f=this.bytes;if(d>this.end-3)return null;var p=f[d+0]<<16|f[d+1]<<8|f[d+2];return this.pos+=3,p}},{key:"peek32",value:function(d){var f=this.pos,p=this.bytes;if(f>this.end-4)return null;var v=p[f+0]<<24|p[f+1]<<16|p[f+2]<<8|p[f+3];return d&&(this.pos+=4),v}},{key:"read32",value:function(){return this.peek32(!0)}},{key:"readU32",value:function(){return this.peek32(!0)>>>0}},{key:"read4CC",value:function(){var d=this.pos;if(d>this.end-4)return null;for(var f="",p=0;p<4;p++)f+=String.fromCharCode(this.bytes[d+p]);return this.pos+=4,f}},{key:"readFP16",value:function(){return this.read32()/65536}},{key:"readFP8",value:function(){return this.read16()/256}},{key:"readISO639",value:function(){for(var d=this.readU16(),f="",p=0;p<3;p++){var v=d>>>5*(2-p)&31;f+=String.fromCharCode(v+96)}return f}},{key:"readUTF8",value:function(d){for(var f="",p=0;p<d;p++)f+=String.fromCharCode(this.readU8());return f}},{key:"readPString",value:function(d){var f=this.readU8();o(f<=d);var p=this.readUTF8(f);return this.reserved(d-f-1,0),p}},{key:"skip",value:function(d){this.seek(this.pos+d)}},{key:"reserved",value:function(d,f){for(var p=0;p<d;p++)o(this.readU8()===f)}},{key:"seek",value:function(d){(d<0||d>this.end)&&l("Index out of bounds (bounds: [0, "+this.end+"], index: "+d+")."),this.pos=d}},{key:"subStream",value:function(d,f){return new g(this.bytes.buffer,d,f)}},{key:"uint",value:function(d){for(var f=this.position,p=f+d,v=0,m=f;m<p;m++)v<<=8,v|=255&this.readU8();return v}},{key:"length",get:function(){return this.end-this.start}},{key:"position",get:function(){return this.pos}},{key:"remaining",get:function(){return this.end-this.pos}}]),g})()),h=(function(){function g(d){s(this,g),this.stream=d,this.tracks={},this.metaData={}}return u(g,[{key:"getPath",value:function(d){for(var f=d.split("."),p=this,v=0,m=f.length;v<m;v++)p=p?p[f[v]]:void 0;return p}},{key:"readBoxes",value:function(d,f){for(;d.peek32();){var p=this.readBox(d);if(p.type in f){var v=f[p.type];Array.isArray(v)||(f[p.type]=[v]),f[p.type].push(p)}else f[p.type]=p}}},{key:"readBox",value:function(d){function f(){b.version=d.readU8(),b.flags=d.readU24()}function p(){return b.size-(d.position-b.offset)}function v(){d.skip(p())}function m(){var ve=d.subStream(d.position,p());_.readBoxes(ve,b),d.skip(ve.length)}var b={offset:d.position},_=this;(function(){b.size=d.readU32(),b.type=d.read4CC()})();var w=void 0,P=void 0,O=void 0;switch(b.type){case"ftyp":var H=b;H.name="File Type Box",H.majorBrand=d.read4CC(),H.minorVersion=d.readU32(),H.compatibleBrands=new Array((H.size-16)/4);for(var U=0;U<H.compatibleBrands.length;U++)H.compatibleBrands[U]=d.read4CC();break;case"moov":b.name="Movie Box",m();break;case"mvhd":var L=b;L.name="Movie Header Box",f(),o(L.version==0),L.creationTime=d.readU32(),L.modificationTime=d.readU32(),L.timeScale=d.readU32(),L.duration=d.readU32(),L.rate=d.readFP16(),L.volume=d.readFP8(),d.skip(10),L.matrix=d.readU32Array(9),d.skip(24),L.nextTrackId=d.readU32();break;case"trak":var N=b;N.name="Track Box",m();var x=new y(this,N),$=N.mdia&&N.mdia.hdlr&&N.mdia.hdlr.handlerType||"unknownHandlerType",Q=this.tracks;(Q[$]||(Q[$]=[])).push(x),Q[N.tkhd.trackId]=x;break;case"tkhd":var A=b;A.name="Track Header Box",f(),o(A.version==0),A.creationTime=d.readU32(),A.modificationTime=d.readU32(),A.trackId=d.readU32(),d.skip(4),A.duration=d.readU32(),d.skip(8),A.layer=d.readU16(),A.alternateGroup=d.readU16(),A.volume=d.readFP8(),d.skip(2),A.matrix=d.readU32Array(9),A.width=d.readFP16(),A.height=d.readFP16();break;case"edts":b.name="Edit Atom",m();break;case"elst":var S=b;S.name="Edit List Atom",f(),S.editList=[],O=d.readU32();for(var k=0;k<O;k++)S.editList.push({trackDuration:d.read32(),mediaTime:d.read32(),mediaRate:d.readU32()});o(!p()),v();break;case"mdia":b.name="Media Box",m();break;case"mdhd":var R=b;R.name="Media Header Box",f(),o(R.version==0),R.creationTime=d.readU32(),R.modificationTime=d.readU32(),R.timeScale=d.readU32(),R.duration=d.readU32(),R.language=d.readISO639(),d.skip(2);break;case"hdlr":var q=b;q.name="Handler Reference Box",f(),d.skip(4),q.handlerType=d.read4CC(),d.skip(12),P=q.size-32,P>0&&(q.name=d.readUTF8(P));break;case"minf":b.name="Media Information Box",m();break;case"stbl":b.name="Sample Table Box",m();break;case"stsd":var Y=b;Y.name="Sample Description Box",f(),Y.sd=[],d.readU32(),m();break;case"avc1":var Z=b;d.reserved(6,0),Z.dataReferenceIndex=d.readU16(),o(d.readU16()==0),o(d.readU16()==0),d.readU32(),d.readU32(),d.readU32(),Z.width=d.readU16(),Z.height=d.readU16(),Z.horizontalResolution=d.readFP16(),Z.verticalResolution=d.readFP16(),o(d.readU32()==0),Z.frameCount=d.readU16(),Z.compressorName=d.readPString(32),Z.depth=d.readU16(),o(d.readU16()==65535),m();break;case"mp4a":var ee=b;if(d.reserved(6,0),ee.dataReferenceIndex=d.readU16(),ee.version=d.readU16(),ee.version!==0){v();break}d.skip(2),d.skip(4),ee.channelCount=d.readU16(),ee.sampleSize=d.readU16(),ee.compressionId=d.readU16(),ee.packetSize=d.readU16(),ee.sampleRate=d.readU32()>>>16,m();break;case"esds":b.name="Elementary Stream Descriptor",f(),v();break;case"avcC":var X=b;X.name="AVC Configuration Box",X.configurationVersion=d.readU8(),X.avcProfileIndicaation=d.readU8(),X.profileCompatibility=d.readU8(),X.avcLevelIndication=d.readU8(),X.lengthSizeMinusOne=3&d.readU8(),o(X.lengthSizeMinusOne==3,"TODO"),w=31&d.readU8(),X.sps=[];for(var pe=0;pe<w;pe++)X.sps.push(d.readU8Array(d.readU16()));w=31&d.readU8(),X.pps=[];for(var ue=0;ue<w;ue++)X.pps.push(d.readU8Array(d.readU16()));v();break;case"btrt":var fe=b;fe.name="Bit Rate Box",fe.bufferSizeDb=d.readU32(),fe.maxBitrate=d.readU32(),fe.avgBitrate=d.readU32();break;case"stts":var I=b;I.name="Decoding Time to Sample Box",f(),I.table=d.readU32Array(d.readU32(),2,["count","delta"]);break;case"stss":var G=b;G.name="Sync Sample Box",f(),G.samples=d.readU32Array(d.readU32());break;case"stsc":var K=b;K.name="Sample to Chunk Box",f(),K.table=d.readU32Array(d.readU32(),3,["firstChunk","samplesPerChunk","sampleDescriptionId"]);break;case"stsz":var te=b;te.name="Sample Size Box",f(),te.sampleSize=d.readU32(),w=d.readU32(),te.sampleSize==0&&(te.table=d.readU32Array(w));break;case"stco":var ce=b;ce.name="Chunk Offset Box",f(),ce.table=d.readU32Array(d.readU32());break;case"smhd":var T=b;T.name="Sound Media Header Box",f(),T.balance=d.readFP8(),d.reserved(2,0);break;case"mdat":var E=b;E.name="Media Data Box",o(E.size>=8,"Cannot parse large media data yet."),E.data=d.readU8Array(p());break;case"mebx":b.name="Mebx",m();break;case"meta":b.name="Metadata",m();break;case"keys":var C=b;C.name="Metadata Item Keys",f();var M=C.keyCount=d.read32(),F=C.offset-C.size;C.keyList=new Map;for(var D=1;D<=M;D++){var B=d.read32()-8;B<1||B>F||(d.skip(4),C.keyList.set(d.readUTF8(B),D))}this.metaData.keys=C;break;case"ilst":var W=b;W.name="Metadata Item List",W.items=[];for(var z=W.offset+W.size;d.position<z;){var V=(d.position,d.readU32(),d.readU32()),se=d.readU32()-16,J=(d.read4CC(),d.readU8()),ne=d.readU24(),oe=(d.readU16(),d.readU16(),void 0);oe=J===0&&ne!==1?d.uint(se):d.readUTF8(se),W.items[V]=oe}this.metaData.values=W;break;default:v()}return b}},{key:"read",value:function(){var d=new Date().getTime();this.file={},this.readBoxes(this.stream,this.file),a.a.info("Parsed stream in "+(new Date().getTime()-d)+" ms")}},{key:"traceSamples",value:function(){var d=this.tracks[1],f=this.tracks[2];a.a.info("Video Samples: "+d.getSampleCount()),a.a.info("Audio Samples: "+f.getSampleCount());for(var p=0,v=0,m=0;m<100;m++){var b=d.sampleToOffset(p),_=f.sampleToOffset(v),w=d.sampleToSize(p,1),P=f.sampleToSize(v,1);b<_?(a.a.info("V Sample "+p+" Offset : "+b+", Size : "+w),p++):(a.a.info("A Sample "+v+" Offset : "+_+", Size : "+P),v++)}}}]),g})(),y=(function(){function g(d,f){s(this,g),this.file=d,this.trak=f}return u(g,[{key:"getSampleSizeTable",value:function(){return this.trak.mdia.minf.stbl.stsz.table}},{key:"getSampleCount",value:function(){return this.getSampleSizeTable().length}},{key:"sampleToSize",value:function(d,f){for(var p=this.getSampleSizeTable(),v=0,m=d;m<d+f;m++)v+=p[m];return v}},{key:"sampleToChunk",value:function(d){var f=this.trak.mdia.minf.stbl.stsc.table;if(f.length===1){var p=f[0];return o(p.firstChunk===1),{index:d/p.samplesPerChunk,offset:d%p.samplesPerChunk}}for(var v=0,m=0;m<f.length;m++){var b=f[m];if(m>0){var _=f[m-1],w=b.firstChunk-_.firstChunk,P=_.samplesPerChunk*w;if(!(d>=P))return{index:v+Math.floor(d/_.samplesPerChunk),offset:d%_.samplesPerChunk};if(d-=P,m===f.length-1)return{index:v+w+Math.floor(d/b.samplesPerChunk),offset:d%b.samplesPerChunk};v+=w}}o(!1)}},{key:"chunkToOffset",value:function(d){return this.trak.mdia.minf.stbl.stco.table[d]}},{key:"sampleToOffset",value:function(d){var f=this.sampleToChunk(d);return this.chunkToOffset(f.index)+this.sampleToSize(d-f.offset,f.offset)}},{key:"timeToSample",value:function(d){for(var f=this.trak.mdia.minf.stbl.stts.table,p=0,v=0;v<f.length;v++){var m=f[v].count*f[v].delta;if(!(d>=m))return p+Math.floor(d/f[v].delta);d-=m,p+=f[v].count}}},{key:"sampleToTime",value:function(d){for(var f=this.trak.mdia.minf.stbl.stts.table,p=0,v=0,m=0;m<f.length&&p<d;m++){var b=f[m],_=Math.min(d-p,b.count);p+=_,v+=_*b.delta}return v}},{key:"getTotalTime",value:function(){for(var d=this.trak.mdia.minf.stbl.stts.table,f=0,p=0;p<d.length;p++)f+=d[p].count*d[p].delta;return o(this.trak.mdia.mdhd.duration===f),this.trak.mdia.mdhd.duration}},{key:"getTotalTimeInSeconds",value:function(){return this.timeToSeconds(this.getTotalTime())}},{key:"getTimeScale",value:function(){return this.trak.mdia.mdhd.timeScale}},{key:"timeToSeconds",value:function(d){return d/this.getTimeScale()}},{key:"secondsToTime",value:function(d){return d*this.getTimeScale()}},{key:"secondsToSample",value:function(d){return this.timeToSample(this.secondsToTime(d))}},{key:"sampleToSeconds",value:function(d){return this.timeToSeconds(this.sampleToTime(d))}},{key:"getAllSampleTimes",value:function(){for(var d=[],f=this.getSampleCount(),p=0;p<f;p++)d.push(this.sampleToTime(p));return d}},{key:"getAllSampleSeconds",value:function(){for(var d=[],f=this.getSampleCount(),p=0;p<f;p++)d.push(this.sampleToSeconds(p));return d}},{key:"getSampleNALUnits",value:function(d){for(var f=this.file.stream.bytes,p=this.sampleToOffset(d),v=p+this.sampleToSize(d,1),m=[];v-p>0;){var b=new c(f.buffer,p).readU32();m.push(f.subarray(p+4,p+b+4)),p=p+b+4}return m}}]),g})()},function(r,n,i){var s={staticMembers:{_pool:null,_cache:null,init:function(){this._pool=[],this._cache={},this._super()},getPoolingCacheKey:function(){throw"Must implement `getPoolingCacheKey` to use PoolCaching."},getCached:function(){var o=this.getPoolingCacheKey.apply(this,arguments),l=this._cache[o];return l||(l=this._cache[o]=this._pool.pop()||this.create(),l._poolingCacheKey=o,l.initFromPool.apply(l,arguments)),l},peekCached:function(){var o=this.getPoolingCacheKey.apply(this,arguments);return this._cache[o]||null},_disposeInstance:function(o){delete this._cache[o._poolingCacheKey],o._poolingCacheKey=void 0,o._poolingLifecycleCount=1+(0|o._poolingLifecycleCount),this._pool.push(o)}},dispose:function(){},_poolingCacheKey:null,initFromPool:function(){},_retainCount:0,retain:function(){return this._retainCount++,this},release:function(){return this._retainCount--,this._retainCount||this.dispose(),this}};n.a=s},function(r,n,i){function s(b,_){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!_||typeof _!="object"&&typeof _!="function"?b:_}function o(b,_){if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof _);b.prototype=Object.create(_&&_.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),_&&(Object.setPrototypeOf?Object.setPrototypeOf(b,_):b.__proto__=_)}function l(b,_){if(!(b instanceof _))throw new TypeError("Cannot call a class as a function")}var a=i(19);i.d(n,"a",function(){return y}),i.d(n,"b",function(){return d}),i.d(n,"c",function(){return p}),i.d(n,"d",function(){return m});var u=(function(){function b(_,w){for(var P=0;P<w.length;P++){var O=w[P];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(_,O.key,O)}}return function(_,w,P){return w&&b(_.prototype,w),P&&b(_,P),_}})(),c=(function(){function b(){l(this,b),this._a=[]}return u(b,[{key:"get",value:function(){return this._a.pop()||this.create()}},{key:"ret",value:function(_){this.prepare(_),this._a.push(_)}}]),b})(),h=(function(b){function _(){return l(this,_),s(this,(_.__proto__||Object.getPrototypeOf(_)).apply(this,arguments))}return o(_,b),u(_,[{key:"create",value:function(){return[]}},{key:"prepare",value:function(w){w.length=0}}]),_})(c),y=new h,g=(function(b){function _(){return l(this,_),s(this,(_.__proto__||Object.getPrototypeOf(_)).apply(this,arguments))}return o(_,b),u(_,[{key:"create",value:function(){return new a.a}},{key:"prepare",value:function(w){w.clear()}}]),_})(c),d=new g,f=(function(b){function _(){return l(this,_),s(this,(_.__proto__||Object.getPrototypeOf(_)).apply(this,arguments))}return o(_,b),u(_,[{key:"create",value:function(){return Object.create(null)}},{key:"prepare",value:function(w){var P=w;for(var O in P)delete P[O]}}]),_})(c),p=new f,v=(function(b){function _(){return l(this,_),s(this,(_.__proto__||Object.getPrototypeOf(_)).apply(this,arguments))}return o(_,b),u(_,[{key:"create",value:function(){return document.createElement("canvas")}},{key:"prepare",value:function(w){var P=w.parentNode;P&&P.removeChild(w),w.width=w.height=0}}]),_})(c),m=new v},function(r,n,i){function s(l,a){return l.apply(void 0,a)}var o={_readiness:"pending",_resolutionArgs:null,_fulfillmentCallbacks:null,_rejectionCallbacks:null,onReadyOrFail:function(l,a){this._resolveIfAlreadyResolved(l,a,!1)||this._pendCallbacks(l,a)},onReadyOrFailSync:function(l,a){this._resolveIfAlreadyResolved(l,a,!0)||this._pendCallbacks(l,a)},_resolveIfAlreadyResolved:function(l,a,u){var c=this._resolutionArgs;return this._readiness==="success"&&l?(u?s(l,c):setTimeout(s,0,l,c),!0):!(this._readiness!=="failure"||!a)&&(u?s(a,c):setTimeout(s,0,a,c),!0)},_pendCallbacks:function(l,a){l&&(this._fulfillmentCallbacks||(this._fulfillmentCallbacks=[])).push(l),a&&(this._rejectionCallbacks||(this._rejectionCallbacks=[])).push(a)},clearReadinessCallbacks:function(){this._fulfillmentCallbacks&&(this._fulfillmentCallbacks.length=0),this._rejectionCallbacks&&(this._rejectionCallbacks.length=0)},resetReadiness:function(){this._readiness="pending",this._resolutionArgs&&(this._resolutionArgs.length=0),this.clearReadinessCallbacks()},resolveReadiness:function(){this._readiness==="pending"&&(this._readiness="success",(this._resolutionArgs=this._resolutionArgs||[]).push.apply(this._resolutionArgs,arguments),this._invokeCallbacks(this._fulfillmentCallbacks),this.clearReadinessCallbacks())},rejectReadiness:function(){this._readiness==="pending"&&(this._readiness="failure",(this._resolutionArgs=this._resolutionArgs||[]).push.apply(this._resolutionArgs,arguments),this._invokeCallbacks(this._rejectionCallbacks),this.clearReadinessCallbacks())},_invokeCallbacks:function(l){if(l){for(var a,u=0;a=l[u];u++)a.apply(void 0,this._resolutionArgs);l.length=0}}};n.a=o},function(r,n,i){function s(){for(var f=1;f<arguments.length;f++)this[f-1]=arguments[f];return this}function o(f){return f&&f.tagName==="IMG"&&/^data:image\/svg|\.svg\?|\.svg$/.test(f.src)}var l=document.createElement("canvas"),a=l.getContext("2d"),u=document.createElement("canvas"),c=u.getContext("2d");l.width=u.width=l.height=u.height=0;var h=!1,y=!1,g=function(f,p){for(var v=arguments.length,m=Array(v>2?v-2:0),b=2;b<v;b++)m[b-2]=arguments[b];if(o(p))return f.drawImage.apply(f,s.apply(d,arguments)),!0;var _=h,w=y;h=y=!1;var P=p instanceof HTMLImageElement?p.naturalWidth:p.width,O=p instanceof HTMLImageElement?p.naturalHeight:p.height;if(!P||!O)throw"Source image provided to drawImageSmooth was not loaded, or otherwise had no dimensions.";var H=void 0,U=void 0,L=void 0,N=void 0,x=void 0,$=void 0,Q=void 0,A=void 0;switch(arguments.length-1){case 3:H=0,U=0,L=P,N=O,x=arguments[2],$=arguments[3],Q=P,A=O;break;case 5:H=0,U=0,L=P,N=O,x=arguments[2],$=arguments[3],Q=arguments[4],A=arguments[5];break;case 9:H=arguments[2],U=arguments[3],L=arguments[4],N=arguments[5],x=arguments[6],$=arguments[7],Q=arguments[8],A=arguments[9]}var S=Q/L,k=A/N;if(S&&k){var R=Math.max(S,k),q=Math.pow(2,Math.ceil(Math.log(1.1*R)/Math.log(2)));if(q>=1)return f.drawImage.apply(f,s.apply(d,arguments)),!0;var Y=void 0;if(_){Y="_cachedSmoothDownsample_from"+H+","+U+","+L+","+N+"@"+q+"x";var Z=p[Y];if(Z)return f.drawImage(Z,0,0,Z.width,Z.height,x,$,Q,A),!0}if(w)return f.drawImage.apply(f,s.apply(d,arguments)),!1;var ee=1,X=L,pe=N,ue=Math.max(Math.pow(2,Math.ceil(Math.log(X)/Math.log(2))),l.width),fe=Math.max(Math.pow(2,Math.ceil(Math.log(pe)/Math.log(2))),l.height);for(l.width===ue&&l.height===fe||(l.width=u.width=ue,l.height=u.height=fe),a.drawImage(p,H,U,L,N,0,0,L,N);ee>q;){c.drawImage(l,0,0,X,pe,0,0,X=Math.ceil(X/2),pe=Math.ceil(pe/2)),a.clearRect(0,0,X,pe);var I=l;l=u,u=I;var G=a;a=c,c=G,ee/=2}if(_){var K=document.createElement("canvas");K.width=X,K.height=pe,K.getContext("2d").drawImage(l,0,0),p[Y]=K}return f.drawImage(l,0,0,X,pe,x,$,Q,A),a.clearRect(0,0,L,N),c.clearRect(0,0,L,N),!0}};g.usingCache=function(){return h=!0,this},g.avoidingWorkIf=function(f){return y=f,this};var d=[];n.a=g},function(r,n,i){function s(){var l="_callbacksForEventHandler"+ ++o;return function(a){var u=this[l]||(this[l]=[]);if(typeof a=="function")return u.push(a);if(u)for(var c=0,h=u.length;c<h;++c)u[c](a)}}n.a=s;var o=1},function(r,n,i){function s(d){var f=d&&new DataView(d),p={};return f&&o(f)&&l(f,p),p}function o(d){return d.getUint16(0)===65496}function l(d,f){for(var p=d.byteLength,v=2;v<p;){var m=d.getUint16(v);m===65505&&a(d,v+4,f),m!==65472&&m!==65474||u(d,v+5,f),v+=2+d.getUint16(v+2)}return f}function a(d,f,p){if(d.getUint32(f)!==1165519206)return p;var v=f+6,m=void 0,b=d.getUint16(v);if(b===18761)m=!0;else{if(b!==19789)return p;m=!1}for(var _=v+d.getUint32(v+4,m),w=d.getUint16(_,m),P=0;P<w;P++){var O=_+12*P+2,H=d.getUint16(O,m);H===274&&(p.orientation=d.getUint16(O+8,m)),H===34665&&c(d,v,g(d,O,m),m,p)}return p}function u(d,f,p){return p.height=d.getUint16(f),p.width=d.getUint16(f+2),p}function c(d,f,p,v,m){var b=y(d,f+p,v),_=void 0;return 37500 in b&&(_=b[37500],h(d,f+d.getUint32(_+8),m)),m}function h(d,f,p){for(var v="",m=0;m<9;m++)v+=String.fromCharCode(d.getUint8(f+m));if(v!=="Apple iOS")return p;var b=d.getUint16(f+9+3)===18761,_=y(d,f+9+3+2,b);return 27 in _&&(p.photosRenderEffect=g(d,_[27],b)),p}function y(d,f,p){for(var v=d.getUint16(f,p),m=f+2,b={},_=0;_<v;_++){var w=m+12*_;b[d.getUint16(w,p)]=w}return b}function g(d,f,p){var v=d.getUint16(f+2,p),m=d.getUint32(f+4,p),b=d.getUint32(f+8,p),_=[];switch(v){case 3:if(m===1)return d.getUint16(f+8,p);if(m===2)return[d.getUint16(f+8,p),d.getUint16(f+10,p)];for(var w=0;w<m;w++)_[w]=d.getUint16(b+4*w,p);return _;case 4:if(m===1)return b;for(var P=0;P<m;P++)_[P]=d.getUint32(b+4*P,p);return _;case 9:if(m===1)return d.getInt32(f+8,p);for(var O=0;O<m;O++)_[O]=d.getInt32(b+4*O,p);return _;default:return null}}n.a=s},function(r,n,i){function s(){for(var l=o()+o();l.length<16;)l+=o();return l.slice(0,16)}function o(){return Math.random().toString(16).substring(2)}n.a=s},function(r,n,i){function s(a,u){var c=a,h=c._computedStyle;h||(h=c._computedStyle=document.defaultView.getComputedStyle(a,null));var y=h.getPropertyValue(u);return!y&&o.get(u)&&(y=o.get(u)(h)||y),y}n.a=s;var o=(function(){var a=new Map;return a.set("font",function(u){for(var c="",h=0,y=l.length;h<y;h++){var g=l[h],d=u.getPropertyValue("font-"+g);if(d&&(c&&(c+=" "),c+=d,g==="size")){var f=u.getPropertyValue("line-height");f&&(c+="/"+f)}}return c}),a})(),l=["style","variant","weight","size","family"]},function(r,n,i){function s(l,a,u,c,h,y,g){var d=void 0;d=!1;var f=arguments.length;f!==6&&(g=f-1);var p=void 0,v=void 0,m=void 0,b=void 0,_=void 0;if(g===2||g===3){var w=a,P=u;v=w.height,p=w.width,b=P.height,m=P.width,_=c}else p=a,v=u,m=c,b=h,_=y;var O=p/v,H=m/b,U=d?O<H:O>H;return _=_||{},_.width=U?m:b*O,_.height=U?m/O:b,_}function o(l,a,u,c,h){return s(!1,l,a,u,c,h,arguments.length)}n.a=o},function(r,n,i){n.a="current"},function(r,n,i){n.a="Mcurrent"},function(r,n,i){n.a="1.5.6"}])})})(Mn)),Mn.exports}var Rv=xv();const Cv=["src","alt"],Av={__name:"LivePhoto",props:{photoSrc:{type:String,required:!0},videoSrc:{type:String,default:null},alt:{type:String,default:""},className:{type:String,default:""}},setup(t){const e=t,r=Re(null);let n=null;const i=()=>{if(!(!r.value||!e.videoSrc)){if(n){n.photoSrc=e.photoSrc,n.videoSrc=e.videoSrc;return}n=Rv.Player(r.value),n.photoSrc=e.photoSrc,n.videoSrc=e.videoSrc,n.style.width="100%",n.style.height="100%",n.style.objectFit="contain"}};return fr(()=>{e.videoSrc&&i()}),Zr(()=>e.videoSrc,s=>{s&&i()}),Ls(()=>{n=null}),(s,o)=>t.videoSrc?(de(),ge("div",{key:0,ref_key:"containerRef",ref:r,class:hr(["live-photo-container",t.className])},null,2)):(de(),ge("img",{key:1,src:t.photoSrc,alt:t.alt,class:hr(t.className)},null,10,Cv))}},Iv=Ur(Av,[["__scopeId","data-v-aafe941e"]]),jv={class:"detail-page"},Dv={class:"header"},Lv={key:0,class:"content library-content"},Nv={class:"cassette-rack"},Fv={class:"wood-shelf"},Uv={class:"wood-shelf"},Mv={class:"wood-shelf"},$v={key:1,class:"timeline-container"},Bv={class:"timeline"},Vv={class:"timeline-date"},qv=["onClick"],Hv={key:0,class:"card-image-container"},Wv=["src"],Kv={class:"card-content"},zv={key:0,class:"stack-indicator"},Gv={key:0,class:"stack-hint"},Jv={class:"modal"},Xv={class:"form-group"},Yv={class:"form-group"},Qv={class:"form-group"},Zv={key:0,class:"image-preview"},em=["src"],tm={class:"form-group"},rm={key:0,class:"file-name"},nm={class:"form-group"},im={class:"modal-actions"},sm=["disabled"],om=["disabled"],am={key:0,class:"modal-loading"},lm={__name:"DetailView",setup(t){const e=Vs(),n=tu().params.id,i=je(()=>n==="3"),s=je(()=>n==="1"),o=je(()=>n==="2"),l=je(()=>n==="4"),a=je(()=>s.value?"":o.value?"":l.value?"":""),u=()=>{e.back()},c=N=>{e.push(`/player/${N}`)},h=Re([]),y=Re([]),g=Re([]);fr(async()=>{if(i.value)return;let N="";s.value?N="travel":o.value?N="pets":l.value&&(N="guzi");const{data:x,error:$}=await Xe.from("memories").select("*").eq("category",N).order("date",{ascending:!1});if($&&console.error("Error fetching memories:",$),x&&x.length>0){const Q=x.map(A=>({...A,text:A.description,image:A.image_url,liveVideoUrl:A.live_video_url}));s.value&&(h.value=Q),o.value&&(y.value=Q),l.value&&(g.value=Q)}else s.value?h.value=[{date:"2023-12-01",title:"",text:"",color:"#ff7e5f",image:"https://images.unsplash.com/photo-1493976040374-85c8e12f0c0e?q=80&w=800&auto=format&fit=crop"},{date:"2023-08-15",title:"",text:"",color:"#feb47b",image:"https://images.unsplash.com/photo-1502602898657-3e91760cbb34?q=80&w=800&auto=format&fit=crop"},{date:"2023-04-10",title:"",text:"",color:"#86a8e7",image:"https://images.unsplash.com/photo-1531366936337-7c912a4589a7?q=80&w=800&auto=format&fit=crop"},{date:"2023-01-05",title:"",text:"",color:"#91eae4",image:"https://images.unsplash.com/photo-1496442226666-8d4d0e62e6e9?q=80&w=800&auto=format&fit=crop"}]:o.value?y.value=[{date:"2024-02-20",title:"",text:"5",color:"#f6d365",image:"https://images.unsplash.com/photo-1576201836106-db1758fd1c97?q=80&w=800&auto=format&fit=crop"},{date:"2024-01-10",title:"",text:"",color:"#fda085",image:"https://images.unsplash.com/photo-1623387641168-d9803ddd3f35?q=80&w=800&auto=format&fit=crop"},{date:"2023-12-25",title:"",text:"",color:"#fbc2eb",image:"https://images.unsplash.com/photo-1514888286974-6c03e2ca1dba?q=80&w=800&auto=format&fit=crop"},{date:"2023-11-05",title:"",text:"",color:"#a6c1ee",image:"https://images.unsplash.com/photo-1587300003388-59208cc962cb?q=80&w=800&auto=format&fit=crop"}]:l.value&&(g.value=[{date:"2024-03-01",title:"",text:"",color:"#ff9a9e",image:"https://images.unsplash.com/photo-1606787366850-de6330128bfc?q=80&w=800&auto=format&fit=crop"},{date:"2024-02-14",title:"",text:"",color:"#fad0c4",image:"https://images.unsplash.com/photo-1581557991964-125469da3b8a?q=80&w=800&auto=format&fit=crop"}])});const d=je(()=>s.value?h.value:o.value?y.value:l.value?g.value:[]),f=je(()=>{const N={};return d.value.forEach(x=>{N[x.date]||(N[x.date]={date:x.date,items:[]}),N[x.date].items.push(x)}),Object.values(N).sort((x,$)=>new Date($.date)-new Date(x.date))}),p=Ht({}),v=(N,x,$)=>{p[N]||(p[N]=0);const Q=p[N];return(x-Q+$)%$},m=(N,x)=>{x<=1||(p[N]||(p[N]=0),p[N]=(p[N]+1)%x)},b=Re(!1),_=Ht({date:"",title:"",text:"",imageFile:null,imagePreview:null,videoFile:null}),w=Re(!1),P=()=>{const N=new Date().toISOString().split("T")[0];_.date=N,_.title="",_.text="",_.imageFile=null,_.imagePreview=null,_.videoFile=null,b.value=!0},O=()=>{b.value=!1},H=N=>{const x=N.target.files[0];if(!x)return;_.imageFile=x;const $=new FileReader;$.onload=Q=>{_.imagePreview=Q.target.result},$.readAsDataURL(x)},U=N=>{const x=N.target.files[0];x&&(_.videoFile=x)},L=async()=>{if(!_.title||!_.date){alert("");return}w.value=!0;try{let N=null;if(_.imageFile){const q=`memory-${Date.now()}-${_.imageFile.name}`,{error:Y}=await Xe.storage.from("tape-assets").upload(`memories/${q}`,_.imageFile);if(Y)throw Y;const{data:{publicUrl:Z}}=Xe.storage.from("tape-assets").getPublicUrl(`memories/${q}`);N=Z}let x=null;if(_.videoFile){const q=_.videoFile.name.split(".").pop(),Y=`memory-video-${Date.now()}-${Math.random().toString(36).substring(7)}.${q}`,{error:Z}=await Xe.storage.from("tape-assets").upload(`memories/${Y}`,_.videoFile);if(Z)throw Z;const{data:{publicUrl:ee}}=Xe.storage.from("tape-assets").getPublicUrl(`memories/${Y}`);x=ee}const $="#"+Math.floor(Math.random()*16777215).toString(16);let Q="";s.value?Q="travel":o.value?Q="pets":l.value&&(Q="guzi");const{data:A,error:S}=await Xe.from("memories").insert([{category:Q,date:_.date,title:_.title,description:_.text,image_url:N,live_video_url:x,color:$}]).select();if(S)throw S;const k=A[0],R={...k,text:k.description,image:k.image_url,liveVideoUrl:k.live_video_url};s.value?h.value.unshift(R):o.value?y.value.unshift(R):l.value&&g.value.unshift(R),O()}catch(N){console.error("Save failed:",N),alert("Save failed: "+N.message)}finally{w.value=!1}};return(N,x)=>(de(),ge("div",jv,[j("div",Dv,[j("button",{onClick:u,class:"back-btn-chalk",title:""},[...x[10]||(x[10]=[j("svg",{viewBox:"0 0 50 30",width:"50",height:"30",class:"chalk-arrow"},[j("path",{d:"M 48 15 C 38 13, 28 17, 4 15 M 6 15 C 10 10, 12 8, 16 4 M 6 14 C 10 19, 11 22, 15 26"})],-1)])]),j("h1",null,Ne(a.value),1)]),i.value?(de(),ge("div",Lv,[j("div",Nv,[j("div",Fv,[j("div",{class:"tape tape-1",onClick:x[0]||(x[0]=$=>c(1))},[...x[11]||(x[11]=[j("div",{class:"tape-label"},"Lo-Fi",-1),j("div",{class:"tape-holes"},[j("span"),j("span")],-1)])]),j("div",{class:"tape tape-2",onClick:x[1]||(x[1]=$=>c(2))},[...x[12]||(x[12]=[j("div",{class:"tape-label"},"Jazz",-1),j("div",{class:"tape-holes"},[j("span"),j("span")],-1)])]),j("div",{class:"tape tape-3",onClick:x[2]||(x[2]=$=>c(3))},[...x[13]||(x[13]=[j("div",{class:"tape-label"},"Rock",-1),j("div",{class:"tape-holes"},[j("span"),j("span")],-1)])])]),j("div",Uv,[j("div",{class:"tape tape-4",onClick:x[3]||(x[3]=$=>c(4))},[...x[14]||(x[14]=[j("div",{class:"tape-label"},"Pop 80s",-1),j("div",{class:"tape-holes"},[j("span"),j("span")],-1)])]),j("div",{class:"tape tape-5",onClick:x[4]||(x[4]=$=>c(5))},[...x[15]||(x[15]=[j("div",{class:"tape-label"},"Synth",-1),j("div",{class:"tape-holes"},[j("span"),j("span")],-1)])])]),j("div",Mv,[j("div",{class:"tape tape-6",onClick:x[5]||(x[5]=$=>c(6))},[...x[16]||(x[16]=[j("div",{class:"tape-label"},"Ambient",-1),j("div",{class:"tape-holes"},[j("span"),j("span")],-1)])]),j("div",{class:"tape tape-1",onClick:x[6]||(x[6]=$=>c(7))},[...x[17]||(x[17]=[j("div",{class:"tape-label"},"Piano",-1),j("div",{class:"tape-holes"},[j("span"),j("span")],-1)])])])]),x[18]||(x[18]=j("p",null,"",-1))])):(de(),ge("div",$v,[j("div",Bv,[(de(!0),ge(He,null,Hn(f.value,($,Q)=>(de(),ge("div",{key:$.date,class:"timeline-item"},[x[20]||(x[20]=j("div",{class:"timeline-marker"},null,-1)),j("div",Vv,Ne($.date),1),j("div",{class:hr(["card-stack",{"is-stacked":$.items.length>1}]),onClick:A=>m(Q,$.items.length)},[(de(!0),ge(He,null,Hn($.items,(A,S)=>(de(),ge("div",{key:S,class:"card card-stack-item",style:jr({"--stack-order":v(Q,S,$.items.length),zIndex:$.items.length-v(Q,S,$.items.length)})},[A.image?(de(),ge("div",Hv,[A.liveVideoUrl?(de(),zn(Iv,{key:0,photoSrc:A.image,videoSrc:A.liveVideoUrl,className:"card-img-display",alt:"Memory Live Photo"},null,8,["photoSrc","videoSrc"])):(de(),ge("img",{key:1,src:A.image,alt:"Memory",class:"card-img-display"},null,8,Wv))])):(de(),ge("div",{key:1,class:"card-image-container placeholder",style:jr({backgroundColor:A.color})},[...x[19]||(x[19]=[j("span",null,"",-1)])],4)),j("div",Kv,[j("h2",null,Ne(A.title),1),j("p",null,Ne(A.text),1),$.items.length>1?(de(),ge("div",zv,Ne(v(Q,S,$.items.length)+1)+" / "+Ne($.items.length),1)):ct("",!0)])],4))),128)),$.items.length>1?(de(),ge("div",Gv,"  ")):ct("",!0)],10,qv)]))),128))]),j("button",{class:"fab",onClick:P},"+")])),b.value?(de(),ge("div",{key:2,class:"modal-overlay",onClick:Xn(O,["self"])},[j("div",Jv,[x[27]||(x[27]=j("h2",null,"",-1)),j("div",Xv,[x[21]||(x[21]=j("label",null,"",-1)),Rr(j("input",{"onUpdate:modelValue":x[7]||(x[7]=$=>_.date=$),type:"date"},null,512),[[Ar,_.date]])]),j("div",Yv,[x[22]||(x[22]=j("label",null,"",-1)),Rr(j("input",{"onUpdate:modelValue":x[8]||(x[8]=$=>_.title=$),type:"text",placeholder:""},null,512),[[Ar,_.title]])]),j("div",Qv,[x[23]||(x[23]=j("label",null," (Live Photo )",-1)),j("input",{type:"file",accept:"image/*",onChange:H},null,32),_.imagePreview?(de(),ge("div",Zv,[j("img",{src:_.imagePreview,alt:"Preview"},null,8,em)])):ct("",!0)]),j("div",tm,[x[24]||(x[24]=j("label",null,"Live Video ( - .mov/.mp4)",-1)),j("input",{type:"file",accept:"video/*",onChange:U},null,32),_.videoFile?(de(),ge("div",rm," : "+Ne(_.videoFile.name),1)):ct("",!0)]),j("div",nm,[x[25]||(x[25]=j("label",null,"",-1)),Rr(j("textarea",{"onUpdate:modelValue":x[9]||(x[9]=$=>_.text=$),rows:"4",placeholder:"..."},null,512),[[Ar,_.text]])]),j("div",im,[j("button",{class:"cancel-btn",onClick:O,disabled:w.value},"",8,sm),j("button",{class:"save-btn",onClick:L,disabled:w.value},Ne(w.value?"...":""),9,om)]),w.value?(de(),ge("div",am,[...x[26]||(x[26]=[j("div",{class:"spinner"},null,-1)])])):ct("",!0)])])):ct("",!0)]))}},um=Ur(lm,[["__scopeId","data-v-7ff02ab9"]]),cm={class:"player-page"},hm={key:0,class:"retro-player"},dm={class:"player-header"},fm={class:"cover-art-container"},pm=["src"],gm={class:"controls-row"},vm={x:"15",y:"45","font-size":"10",fill:"white",stroke:"none"},mm={key:0,d:"M 25 15 L 45 30 L 25 45 Z",fill:"none"},ym={key:1,d:"M 22 15 L 22 45 M 38 15 L 38 45"},_m={class:"song-list-container"},bm={class:"song-list"},wm=["onClick"],Sm={key:1},Pm={class:"modal"},Tm={class:"form-group"},Em={class:"form-group"},km={class:"form-group"},Om={class:"modal-actions"},xm=["disabled"],Rm=["disabled"],Cm={key:0,class:"modal-loading"},Am={__name:"PlayerView",setup(t){const e=Vs(),n=tu().params.tapeId,i=Re(new Audio),s=Re(!1),o=Re(!1),l=Re(1),a=Re(null);fr(async()=>{const w=["https://images.unsplash.com/photo-1614613535308-eb5fbd3d2c17?q=80&w=600&auto=format&fit=crop","https://images.unsplash.com/photo-1511671782779-c97d3d27a1d4?q=80&w=600&auto=format&fit=crop","https://images.unsplash.com/photo-1498038432885-c6f3f1b912ee?q=80&w=600&auto=format&fit=crop","https://images.unsplash.com/photo-1594623930572-305a0b480b2d?q=80&w=600&auto=format&fit=crop","https://images.unsplash.com/photo-1550745165-9bc0b252726f?q=80&w=600&auto=format&fit=crop","https://images.unsplash.com/photo-1515405295579-ba7b454989d3?q=80&w=600&auto=format&fit=crop","https://images.unsplash.com/photo-1520523839897-bd0b52f945a0?q=80&w=600&auto=format&fit=crop"],P=["#ff7e5f","#feb47b","#86a8e7","#91eae4","#f6d365","#fbc2eb"],O=parseInt(n)||1,{data:H,error:U}=await Xe.from("songs").select("*").eq("tape_id",n).order("created_at",{ascending:!0});U&&console.error("Error loading songs:",U);let L=H||[];L.length===0&&(L=[{id:`default-${n}-1`,title:"Track 01 - Intro (Demo)",audio_url:"https://actions.google.com/sounds/v1/cartoon/pop.ogg",image_url:null},{id:`default-${n}-2`,title:"Track 02 - Memories",audio_url:null,image_url:null},{id:`default-${n}-3`,title:"Track 03 - Sunset",audio_url:null,image_url:null}]),a.value={id:n,title:`Mixtape #${n}`,image:w[O%w.length]||w[0],color:P[O%6],songs:L},i.value.addEventListener("ended",()=>{o.value?(i.value.currentTime=0,i.value.play()):s.value=!1})}),hi(()=>{i.value&&(i.value.pause(),i.value.src="")});const u=()=>{e.back()},c=()=>{i.value.src?(s.value?i.value.pause():i.value.play(),s.value=!s.value):a.value&&a.value.songs.length>0?g(a.value.songs[0]):alert("No tracks available.")},h=()=>{o.value=!o.value},y=()=>{l.value=l.value===1?1.5:l.value===1.5?2:1,i.value&&(i.value.playbackRate=l.value)},g=w=>{w.image_url&&(a.value.image=w.image_url),w.audio_url?(i.value.src=w.audio_url,i.value.playbackRate=l.value,i.value.play(),s.value=!0):(console.warn("No audio file for this song"),s.value=!0)},d=Re(!1),f=Ht({title:"",audioFile:null,imageFile:null}),p=Re(!1),v=()=>{f.title="",f.audioFile=null,f.imageFile=null,d.value=!0},m=(w,P)=>{const O=w.target.files[0];O&&(P==="audio"&&(f.audioFile=O),P==="image"&&(f.imageFile=O))},b=async(w,P)=>{const O=`${Date.now()}-${w.name}`,{data:H,error:U}=await Xe.storage.from("tape-assets").upload(`${P}/${O}`,w);if(U)throw U;const{data:{publicUrl:L}}=Xe.storage.from("tape-assets").getPublicUrl(`${P}/${O}`);return L},_=async()=>{if(!f.title)return alert("Please enter a title");if(!f.audioFile)return alert("Please upload an audio file");p.value=!0;try{let w=null,P=null;f.audioFile&&(w=await b(f.audioFile,"audio")),f.imageFile&&(P=await b(f.imageFile,"images"));const{data:O,error:H}=await Xe.from("songs").insert([{tape_id:n,title:f.title,audio_url:w,image_url:P}]).select();if(H)throw H;O&&a.value.songs.push(O[0]),d.value=!1}catch(w){console.error("Upload failed",w),alert("Upload failed: "+w.message)}finally{p.value=!1}};return(w,P)=>(de(),ge("div",cm,[a.value?(de(),ge("div",hm,[j("div",dm,[(de(),ge("svg",{class:"doodle-icon side-btn",viewBox:"0 0 50 50",onClick:h,style:jr({opacity:o.value?1:.5})},[...P[5]||(P[5]=[j("path",{d:"M 10 25 C 10 10, 40 10, 40 25 C 40 40, 10 40, 10 25 M 35 20 L 40 25 L 35 30"},null,-1)])],4)),(de(),ge("svg",{class:"doodle-icon side-btn",viewBox:"0 0 50 50",onClick:u},[...P[6]||(P[6]=[j("path",{d:"M 15 15 L 35 35 M 35 15 L 15 35"},null,-1)])]))]),j("div",fm,[j("img",{src:a.value.image||"https://via.placeholder.com/280",alt:"Cover Art",class:hr(["cover-art",{playing:s.value}])},null,10,pm)]),P[13]||(P[13]=j("div",{class:"progress-area"},[j("div",{class:"progress-bar"},[j("div",{class:"progress-fill"})])],-1)),j("div",gm,[(de(),ge("svg",{class:"doodle-icon side-btn",viewBox:"0 0 50 50",onClick:y},[P[7]||(P[7]=j("path",{d:"M 10 40 L 10 10 L 30 25 Z M 30 40 L 30 10 L 50 25 Z"},null,-1)),j("text",vm,Ne(l.value)+"x",1)])),P[9]||(P[9]=j("svg",{class:"doodle-icon side-btn",viewBox:"0 0 50 50"},[j("path",{d:"M 40 10 L 15 25 L 40 40 M 15 10 L 15 40"})],-1)),(de(),ge("svg",{class:"doodle-icon play-btn",viewBox:"0 0 60 60",onClick:c},[P[8]||(P[8]=j("circle",{cx:"30",cy:"30",r:"28","stroke-dasharray":"5,5"},null,-1)),s.value?(de(),ge("path",ym)):(de(),ge("path",mm))])),P[10]||(P[10]=j("svg",{class:"doodle-icon side-btn",viewBox:"0 0 50 50"},[j("path",{d:"M 10 10 L 35 25 L 10 40 M 35 10 L 35 40"})],-1)),P[11]||(P[11]=j("div",{class:"side-btn"},null,-1))]),j("div",_m,[j("div",{class:"song-list-header"},[P[12]||(P[12]=j("span",null,"Tracks",-1)),j("button",{class:"add-song-btn",onClick:v},"+")]),j("ul",bm,[(de(!0),ge(He,null,Hn(a.value.songs,O=>(de(),ge("li",{key:O.id,onClick:H=>g(O),class:"song-item"},Ne(O.title),9,wm))),128))])])])):(de(),ge("div",Sm,"Loading...")),d.value?(de(),ge("div",{key:2,class:"modal-overlay",onClick:P[4]||(P[4]=Xn(O=>d.value=!1,["self"]))},[j("div",Pm,[P[18]||(P[18]=j("h2",null,"",-1)),j("div",Tm,[P[14]||(P[14]=j("label",null,"",-1)),Rr(j("input",{"onUpdate:modelValue":P[0]||(P[0]=O=>f.title=O),type:"text"},null,512),[[Ar,f.title]])]),j("div",Em,[P[15]||(P[15]=j("label",null,"",-1)),j("input",{type:"file",accept:"audio/*",onChange:P[1]||(P[1]=O=>m(O,"audio"))},null,32)]),j("div",km,[P[16]||(P[16]=j("label",null,"",-1)),j("input",{type:"file",accept:"image/*",onChange:P[2]||(P[2]=O=>m(O,"image"))},null,32)]),j("div",Om,[j("button",{class:"cancel-btn",onClick:P[3]||(P[3]=O=>d.value=!1),disabled:p.value},"",8,xm),j("button",{class:"save-btn",onClick:_,disabled:p.value},Ne(p.value?"...":""),9,Rm)]),p.value?(de(),ge("div",Cm,[...P[17]||(P[17]=[j("div",{class:"spinner"},null,-1)])])):ct("",!0)])])):ct("",!0)]))}},Im=Ur(Am,[["__scopeId","data-v-640edb5a"]]),jm=Cf({history:uf("/zhiyizhi/"),routes:[{path:"/",name:"home",component:kv},{path:"/detail/:id",name:"detail",component:um},{path:"/player/:tapeId",name:"player",component:Im}]}),Ju=Sd(Df);Ju.use(jm);Ju.mount("#app");
